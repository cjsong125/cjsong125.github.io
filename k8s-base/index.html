<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="ÈõÜÁæ§,k8s," />










<meta name="description" content="ÊñáÊ°£Êù•Ëá™Ôºöüìö KubenetesÔºàK8SÔºâÁÆÄ‰ªã - K8S ÊïôÁ®ã - ÊòìÊñáÊ°£ (easydoc.net) ÁÆÄ‰ªãÂÆÉÊòØ‰∏Ä‰∏™‰∏∫ ÂÆπÂô®Âåñ Â∫îÁî®Êèê‰æõÈõÜÁæ§ÈÉ®ÁΩ≤ÂíåÁÆ°ÁêÜÁöÑÂºÄÊ∫êÂ∑•ÂÖ∑ÔºåÁî± Google ÂºÄÂèë„ÄÇkubernetesÁöÑÊú¨Ë¥®ÊòØ‰∏ÄÁªÑÊúçÂä°Âô®ÈõÜÁæ§ÔºåÂÆÉÂèØ‰ª•Âú®ÈõÜÁæ§ÁöÑÊØè‰∏™ËäÇÁÇπ‰∏äËøêË°åÁâπÂÆöÁöÑÁ®ãÂ∫èÔºåÊù•ÂØπËäÇÁÇπ‰∏≠ÁöÑÂÆπÂô®ËøõË°åÁÆ°ÁêÜ„ÄÇÂÆÉÁöÑÁõÆÁöÑÂ∞±ÊòØÊòØÂÆûÁé∞ËµÑÊ∫êÁÆ°ÁêÜÁöÑËá™Âä®ÂåñÔºå‰∏ªË¶ÅÊèê‰æõ‰∫ÜÂ¶Ç‰∏ãÁöÑ‰∏ªË¶ÅÂäüËÉΩÔºö  Ëá™Êàë‰øÆÂ§çÔºö‰∏ÄÊó¶Êüê‰∏Ä‰∏™ÂÆπÂô®Â¥©Ê∫ÉÔºåËÉΩÂ§ü">
<meta property="og:type" content="article">
<meta property="og:title" content="k8s-base">
<meta property="og:url" content="https://cjsong125.github.io/k8s-base/index.html">
<meta property="og:site_name" content="CodeChenBlog">
<meta property="og:description" content="ÊñáÊ°£Êù•Ëá™Ôºöüìö KubenetesÔºàK8SÔºâÁÆÄ‰ªã - K8S ÊïôÁ®ã - ÊòìÊñáÊ°£ (easydoc.net) ÁÆÄ‰ªãÂÆÉÊòØ‰∏Ä‰∏™‰∏∫ ÂÆπÂô®Âåñ Â∫îÁî®Êèê‰æõÈõÜÁæ§ÈÉ®ÁΩ≤ÂíåÁÆ°ÁêÜÁöÑÂºÄÊ∫êÂ∑•ÂÖ∑ÔºåÁî± Google ÂºÄÂèë„ÄÇkubernetesÁöÑÊú¨Ë¥®ÊòØ‰∏ÄÁªÑÊúçÂä°Âô®ÈõÜÁæ§ÔºåÂÆÉÂèØ‰ª•Âú®ÈõÜÁæ§ÁöÑÊØè‰∏™ËäÇÁÇπ‰∏äËøêË°åÁâπÂÆöÁöÑÁ®ãÂ∫èÔºåÊù•ÂØπËäÇÁÇπ‰∏≠ÁöÑÂÆπÂô®ËøõË°åÁÆ°ÁêÜ„ÄÇÂÆÉÁöÑÁõÆÁöÑÂ∞±ÊòØÊòØÂÆûÁé∞ËµÑÊ∫êÁÆ°ÁêÜÁöÑËá™Âä®ÂåñÔºå‰∏ªË¶ÅÊèê‰æõ‰∫ÜÂ¶Ç‰∏ãÁöÑ‰∏ªË¶ÅÂäüËÉΩÔºö  Ëá™Êàë‰øÆÂ§çÔºö‰∏ÄÊó¶Êüê‰∏Ä‰∏™ÂÆπÂô®Â¥©Ê∫ÉÔºåËÉΩÂ§ü">
<meta property="og:locale">
<meta property="og:image" content="https://cjsong125.github.io/D:/Learning/PersonalBlog/CodeChenBlog/source_posts/k8s-base/Snipaste_2022-04-11_20-53-03.jpg">
<meta property="og:image" content="https://cjsong125.github.io/D:/Learning/PersonalBlog/CodeChenBlog/source_posts/k8s-base/kwmxgxwp.svg">
<meta property="og:image" content="https://cjsong125.github.io/D:/Learning/PersonalBlog/CodeChenBlog/source_posts/k8s-base/Snipaste_2022-04-11_21-04-25.jpg">
<meta property="og:image" content="https://cjsong125.github.io/D:/Learning/PersonalBlog/CodeChenBlog/source_posts/k8s-base/kwonmx7e.png">
<meta property="og:image" content="https://cjsong125.github.io/D:/Learning/PersonalBlog/CodeChenBlog/source_posts/k8s-base/kwob90mh.png">
<meta property="og:image" content="https://cjsong125.github.io/D:/Learning/PersonalBlog/CodeChenBlog/source_posts/k8s-base/kwoccq7d.jpg">
<meta property="og:image" content="https://cjsong125.github.io/D:/Learning/PersonalBlog/CodeChenBlog/source_posts/k8s-base/Snipaste_2022-04-11_15-51-49.jpg">
<meta property="og:image" content="https://cjsong125.github.io/D:/Learning/PersonalBlog/CodeChenBlog/source_posts/k8s-base/Snipaste_2022-04-11_16-28-30.jpg">
<meta property="og:image" content="https://cjsong125.github.io/D:/Learning/PersonalBlog/CodeChenBlog/source_posts/k8s-base/Snipaste_2022-04-11_16-36-24.jpg">
<meta property="og:image" content="https://cjsong125.github.io/D:/Learning/PersonalBlog/CodeChenBlog/source_posts/k8s-base/Snipaste_2022-04-11_21-25-31.jpg">
<meta property="og:image" content="https://cjsong125.github.io/D:/Learning/PersonalBlog/CodeChenBlog/source_posts/k8s-base/Snipaste_2022-04-12_16-00-29.jpg">
<meta property="og:image" content="https://cjsong125.github.io/D:/Learning/PersonalBlog/CodeChenBlog/source_posts/k8s-base/Snipaste_2022-04-12_16-41-43.jpg">
<meta property="og:image" content="https://cjsong125.github.io/D:/Learning/PersonalBlog/CodeChenBlog/source_posts/k8s-base/Snipaste_2022-04-13_17-05-09.jpg">
<meta property="og:image" content="https://cjsong125.github.io/D:/Learning/PersonalBlog/CodeChenBlog/source_posts/k8s-base/Snipaste_2022-04-13_20-14-41.jpg">
<meta property="og:image" content="https://cjsong125.github.io/D:/Learning/PersonalBlog/CodeChenBlog/source_posts/k8s-base/Snipaste_2022-04-14_14-33-22.jpg">
<meta property="og:image" content="https://cjsong125.github.io/D:/Learning/PersonalBlog/CodeChenBlog/source_posts/k8s-base/Snipaste_2022-04-14_14-54-11.jpg">
<meta property="og:image" content="https://cjsong125.github.io/D:/Learning/PersonalBlog/CodeChenBlog/source_posts/k8s-base/Snipaste_2022-04-14_16-17-10.jpg">
<meta property="og:image" content="https://cjsong125.github.io/D:/Learning/PersonalBlog/CodeChenBlog/source_posts/k8s-base/Snipaste_2022-04-14_16-45-06.jpg">
<meta property="og:image" content="https://cjsong125.github.io/D:/Learning/PersonalBlog/CodeChenBlog/source_posts/k8s-base/Snipaste_2022-04-14_17-30-32.jpg">
<meta property="og:image" content="https://cjsong125.github.io/D:/Learning/PersonalBlog/CodeChenBlog/source_posts/k8s-base/Snipaste_2022-04-14_14-54-11.jpg">
<meta property="article:published_time" content="2022-03-28T07:13:33.000Z">
<meta property="article:modified_time" content="2022-04-14T14:35:08.128Z">
<meta property="article:author" content="CodeChen">
<meta property="article:tag" content="ÈõÜÁæ§">
<meta property="article:tag" content="k8s">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cjsong125.github.io/D:/Learning/PersonalBlog/CodeChenBlog/source_posts/k8s-base/Snipaste_2022-04-11_20-53-03.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Âçö‰∏ª'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://cjsong125.github.io/k8s-base/"/>





  <title>k8s-base | CodeChenBlog</title>
  








<meta name="generator" content="Hexo 5.4.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">CodeChenBlog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            È¶ñÈ°µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Ê†áÁ≠æ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            ÂàÜÁ±ª
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            ÂΩíÊ°£
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            ÊêúÁ¥¢
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="ÊêúÁ¥¢..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://cjsong125.github.io/k8s-base/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/myPicture1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CodeChenBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">k8s-base</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">ÂèëË°®‰∫é</span>
              
              <time title="ÂàõÂª∫‰∫é" itemprop="dateCreated datePublished" datetime="2022-03-28T15:13:33+08:00">
                2022-03-28
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/k8s-base/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/k8s-base/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv">Êú¨ÊñáÊÄªÈòÖËØªÊï∞ <i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>Ê¨°
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>ÊñáÊ°£Êù•Ëá™Ôºö<a target="_blank" rel="noopener" href="https://k8s.easydoc.net/docs/dRiQjyTY/28366845/6GiNOzyZ/9EX8Cp45">üìö KubenetesÔºàK8SÔºâÁÆÄ‰ªã - K8S ÊïôÁ®ã - ÊòìÊñáÊ°£ (easydoc.net)</a></p>
<h1 id="ÁÆÄ‰ªã"><a href="#ÁÆÄ‰ªã" class="headerlink" title="ÁÆÄ‰ªã"></a>ÁÆÄ‰ªã</h1><p>ÂÆÉÊòØ‰∏Ä‰∏™‰∏∫ <strong>ÂÆπÂô®Âåñ</strong> Â∫îÁî®Êèê‰æõÈõÜÁæ§ÈÉ®ÁΩ≤ÂíåÁÆ°ÁêÜÁöÑÂºÄÊ∫êÂ∑•ÂÖ∑ÔºåÁî± Google ÂºÄÂèë„ÄÇ<br>kubernetesÁöÑÊú¨Ë¥®ÊòØ‰∏ÄÁªÑÊúçÂä°Âô®ÈõÜÁæ§ÔºåÂÆÉÂèØ‰ª•Âú®ÈõÜÁæ§ÁöÑÊØè‰∏™ËäÇÁÇπ‰∏äËøêË°åÁâπÂÆöÁöÑÁ®ãÂ∫èÔºåÊù•ÂØπËäÇÁÇπ‰∏≠ÁöÑÂÆπÂô®ËøõË°åÁÆ°ÁêÜ„ÄÇÂÆÉÁöÑÁõÆÁöÑÂ∞±ÊòØÊòØÂÆûÁé∞ËµÑÊ∫êÁÆ°ÁêÜÁöÑËá™Âä®ÂåñÔºå‰∏ªË¶ÅÊèê‰æõ‰∫ÜÂ¶Ç‰∏ãÁöÑ‰∏ªË¶ÅÂäüËÉΩÔºö</p>
<ul>
<li><p>Ëá™Êàë‰øÆÂ§çÔºö‰∏ÄÊó¶Êüê‰∏Ä‰∏™ÂÆπÂô®Â¥©Ê∫ÉÔºåËÉΩÂ§üÂú®1Áßí‰∏≠Â∑¶Âè≥ËøÖÈÄüÂêØÂä®Êñ∞ÁöÑÂÆπÂô®</p>
</li>
<li><p>ÂºπÊÄß‰º∏Áº©ÔºöÂèØ‰ª•Ê†πÊçÆÈúÄË¶ÅÔºåËá™Âä®ÂØπÈõÜÁæ§‰∏≠Ê≠£Âú®ËøêË°åÁöÑÂÆπÂô®Êï∞ÈáèËøõË°åË∞ÉÊï¥</p>
</li>
<li><p>ÊúçÂä°ÂèëÁé∞ÔºöÊúçÂä°ÂèØ‰ª•ÈÄöËøáËá™Âä®ÂèëÁé∞ÁöÑÂΩ¢ÂºèÊâæÂà∞ÂÆÉÊâÄ‰æùËµñÁöÑÊúçÂä°</p>
</li>
<li><p>Ë¥üËΩΩÂùáË°°ÔºöÂ¶ÇÊûú‰∏Ä‰∏™ÊúçÂä°Ëµ∑Âä®‰∫ÜÂ§ö‰∏™ÂÆπÂô®ÔºåËÉΩÂ§üËá™Âä®ÂÆûÁé∞ËØ∑Ê±ÇÁöÑË¥üËΩΩÂùáË°°</p>
</li>
<li><p>ÁâàÊú¨ÂõûÈÄÄÔºöÂ¶ÇÊûúÂèëÁé∞Êñ∞ÂèëÂ∏ÉÁöÑÁ®ãÂ∫èÁâàÊú¨ÊúâÈóÆÈ¢òÔºåÂèØ‰ª•Á´ãÂç≥ÂõûÈÄÄÂà∞ÂéüÊù•ÁöÑÁâàÊú¨</p>
</li>
<li><p>Â≠òÂÇ®ÁºñÊéí:ÂèØ‰ª•Ê†πÊçÆÂÆπÂô®Ëá™Ë∫´ÁöÑÈúÄÊ±ÇËá™Âä®ÂàõÂª∫Â≠òÂÇ®Âç∑</p>
</li>
</ul>
<p><img src="/D:/Learning\PersonalBlog\CodeChenBlog\source_posts\k8s-base\Snipaste_2022-04-11_20-53-03.jpg"></p>
<p><strong>‰∏çÂêåÁöÑÂ∫îÁî®ÈÉ®ÁΩ≤ÊñπÊ°à</strong></p>
<p>Âú®ÈÉ®ÁΩ≤Â∫îÁî®Á®ãÂ∫èÁöÑÊñπÂºè‰∏äÔºå‰∏ªË¶ÅÁªèÂéÜ‰∫Ü‰∏â‰∏™Êó∂‰ª£Ôºö</p>
<ul>
<li><p>‰º†ÁªüÈÉ®ÁΩ≤Ôºö‰∫íËÅîÁΩëÊó©ÊúüÔºå‰ºöÁõ¥Êé•Â∞ÜÂ∫îÁî®Á®ãÂ∫èÈÉ®ÁΩ≤Âú®Áâ©ÁêÜÊú∫‰∏ä</p>
<blockquote>
<p>‰ºòÁÇπÔºöÁÆÄÂçïÔºå‰∏çÈúÄË¶ÅÂÖ∂ÂÆÉÊäÄÊúØÁöÑÂèÇ‰∏é</p>
<p>Áº∫ÁÇπÔºö‰∏çËÉΩ‰∏∫Â∫îÁî®Á®ãÂ∫èÂÆö‰πâËµÑÊ∫ê‰ΩøÁî®ËæπÁïåÔºåÂæàÈöæÂêàÁêÜÂú∞ÂàÜÈÖçËÆ°ÁÆóËµÑÊ∫êÔºåËÄå‰∏îÁ®ãÂ∫è‰πãÈó¥ÂÆπÊòì‰∫ßÁîüÂΩ±Âìç</p>
</blockquote>
</li>
<li><p>ËôöÊãüÂåñÈÉ®ÁΩ≤ÔºöÂèØ‰ª•Âú®‰∏ÄÂè∞Áâ©ÁêÜÊú∫‰∏äËøêË°åÂ§ö‰∏™ËôöÊãüÊú∫ÔºåÊØè‰∏™ËôöÊãüÊú∫ÈÉΩÊòØÁã¨Á´ãÁöÑ‰∏Ä‰∏™ÁéØÂ¢É</p>
<blockquote>
<p>‰ºòÁÇπÔºöÁ®ãÂ∫èÁéØÂ¢É‰∏ç‰ºöÁõ∏‰∫íÂΩ±ÂìçÔºåÊèê‰æõ‰∏ÄÂÆöÁ®ãÂ∫¶ÁöÑÂÆâÂÖ®ÊÄß</p>
<p>Áº∫ÁÇπÔºöÂ¢ûÂä†‰∫ÜÊìç‰ΩúÁ≥ªÁªüÔºåÊµ™Ë¥π‰∫ÜÈÉ®ÂàÜËµÑÊ∫ê</p>
</blockquote>
</li>
<li><p>ÂÆπÂô®ÂåñÈÉ®ÁΩ≤Ôºö‰∏éËôöÊãüÂåñÁ±ª‰ººÔºå‰ΩÜÊòØÂÖ±‰∫´‰∫ÜÊìç‰ΩúÁ≥ªÁªü</p>
<blockquote>
<p>‰ºòÁÇπÔºö</p>
<p>‚Äã        ÂèØ‰ª•‰øùËØÅÊØè‰∏™ÂÆπÂô®Êã•ÊúâËá™Â∑±ÁöÑÊñá‰ª∂Á≥ªÁªü„ÄÅCPU„ÄÅÂÜÖÂ≠ò„ÄÅËøõÁ®ãÁ©∫Èó¥Á≠â</p>
<p>‚Äã        ËøêË°åÂ∫îÁî®Á®ãÂ∫èÊâÄÈúÄË¶ÅÁöÑËµÑÊ∫êÈÉΩË¢´ÂÆπÂô®ÂåÖË£ÖÔºåÂπ∂ÂíåÂ∫ïÂ±ÇÂü∫Á°ÄÊû∂ÊûÑËß£ËÄ¶</p>
<p>‚Äã        ÂÆπÂô®ÂåñÁöÑÂ∫îÁî®Á®ãÂ∫èÂèØ‰ª•Ë∑®‰∫ëÊúçÂä°ÂïÜ„ÄÅË∑®LinuxÊìç‰ΩúÁ≥ªÁªüÂèëË°åÁâàËøõË°åÈÉ®ÁΩ≤</p>
</blockquote>
</li>
</ul>
<p><img src="/D:/Learning\PersonalBlog\CodeChenBlog\source_posts\k8s-base\kwmxgxwp.svg"></p>
<p>ÂÆπÂô®ÂåñÈÉ®ÁΩ≤ÊñπÂºèÂ∏¶Êù•‰∫ÜÂæàÂ§öÁöÑÈÅçÂéÜÔºå‰ΩÜÊòØ‰πü‰ºöÂá∫Áé∞‰∏Ä‰∫õÈóÆÈ¢òÔºåÊØîÂ¶ÇËØ¥‚Äú</p>
<ul>
<li>‰∏Ä‰∏™ÂÆπÂô®ÊïÖÈöúÂÅúÊú∫‰∫ÜÔºåÊÄé‰πàÊ†∑ËÆ©Âè¶Â§ñ‰∏Ä‰∏™ÂÆπÂô®Á´ãÂàªÂêØÂä®ÂéªÊõøË°•ÂÅúÊú∫ÁöÑÂÆπÂô®</li>
<li>ÂΩìÂπ∂ÂèëËÆøÈóÆÈáèÂèòÂ§ßÁöÑÊó∂ÂÄôÔºåÊÄé‰πàÊ†∑ÂÅöÂà∞Ê®™ÂêëÊâ©Â±ïÂÆπÂô®Êï∞Èáè</li>
</ul>
<p>Ëøô‰∫õÂÆπÂô®ÁÆ°ÁêÜÁöÑÈóÆÈ¢òÁªüÁß∞‰∏∫ÂÆπÂô®ÁºñÊéíÈóÆÈ¢òÔºå‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∫õÂÆπÂô®ÁºñÊéíÈóÆÈ¢òÔºåÂ∞±‰∫ßÁîü‰∫Ü‰∏Ä‰∫õÂÆπÂô®ÁºñÊéíÁöÑËΩØ‰ª∂Ôºö</p>
<ul>
<li>SwarmÔºöDockerËá™Â∑±ÁöÑÂÆπÂô®ÁºñÊéíÂ∑•ÂÖ∑</li>
<li>MesosÔºöApacheÁöÑ‰∏Ä‰∏™ËµÑÊ∫êÁªü‰∏ÄÁÆ°ÊéßÁöÑÂ∑•ÂÖ∑ÔºåÈúÄË¶ÅÂíåMarathonÁªìÂêà‰ΩøÁî®</li>
<li>KubernetesÔºöGoogleÂºÄÊ∫êÁöÑÂÆπÂô®ÁºñÊéíÂ∑•ÂÖ∑</li>
</ul>
<h2 id="‰ªÄ‰πàÊó∂ÂÄôÈúÄË¶Åk8sÔºü"><a href="#‰ªÄ‰πàÊó∂ÂÄôÈúÄË¶Åk8sÔºü" class="headerlink" title="‰ªÄ‰πàÊó∂ÂÄôÈúÄË¶Åk8sÔºü"></a>‰ªÄ‰πàÊó∂ÂÄôÈúÄË¶Åk8sÔºü</h2><p>ÂΩì‰Ω†ÁöÑÂ∫îÁî®Âè™ÊòØË∑ëÂú®‰∏ÄÂè∞Êú∫Âô®ÔºåÁõ¥Êé•‰∏Ä‰∏™ docker + docker-compose Â∞±Â§ü‰∫ÜÔºåÊñπ‰æøËΩªÊùæÔºõ<br>ÂΩì‰Ω†ÁöÑÂ∫îÁî®ÈúÄË¶ÅË∑ëÂú® 3Ôºå4 Âè∞Êú∫Âô®‰∏äÔºå‰Ω†‰æùÊóßÂèØ‰ª•ÊØèÂè∞Êú∫Âô®ÂçïÁã¨ÈÖçÁΩÆËøêË°åÁéØÂ¢É + Ë¥üËΩΩÂùáË°°Âô®Ôºõ<br>ÂΩì‰Ω†Â∫îÁî®ËÆøÈóÆÊï∞‰∏çÊñ≠Â¢ûÂä†ÔºåÊú∫Âô®ÈÄêÊ∏êÂ¢ûÂä†Âà∞ÂçÅÂá†Âè∞„ÄÅ‰∏äÁôæÂè∞„ÄÅ‰∏äÂçÉÂè∞Êó∂ÔºåÊØèÊ¨°Âä†Êú∫Âô®„ÄÅËΩØ‰ª∂Êõ¥Êñ∞„ÄÅÁâàÊú¨ÂõûÊªöÔºåÈÉΩ‰ºöÂèòÂæóÈùûÂ∏∏È∫ªÁÉ¶„ÄÅÁóõ‰∏çÊ¨≤ÁîüÔºåÂÜç‰πü‰∏çËÉΩÂ•ΩÂ•ΩÁöÑÊë∏È±º‰∫ÜÔºå‰∫∫ÁîüÊµ™Ë¥πÂú®ÈÇ£‰∫õÊ≤°ÊäÄÊúØÂê´ÈáèÁöÑÈáçÂ§çÊÄßÂ∑•‰Ωú‰∏ä„ÄÇ</p>
<p>ËøôÊó∂ÂÄôÔºåKubernetes Â∞±ÂèØ‰ª•‰∏ÄÂ±ïË∫´Êâã‰∫ÜÔºåËÆ©‰Ω†ËΩªÊùæÁÆ°ÁêÜÁôæ‰∏áÂçÉ‰∏áÂè∞Êú∫Âô®ÁöÑÈõÜÁæ§„ÄÇ‚ÄúË∞àÁ¨ëÈó¥ÔºåÊ®ØÊ©πÁÅ∞È£ûÁÉüÁÅ≠‚ÄùÔºå‰∫´ÂèóÁùÄ‰∏ÄÊâãÊéåÊéßÊâÄÊúâÔºåÂπ¥Ëñ™Áôæ‰∏áÊåáÊó•ÂèØÂæÖ„ÄÇ</p>
<p>Kubernates ÂèØ‰ª•‰∏∫‰Ω†Êèê‰æõÈõÜ‰∏≠ÂºèÁöÑÁÆ°ÁêÜÈõÜÁæ§Êú∫Âô®ÂíåÂ∫îÁî®ÔºåÂä†Êú∫Âô®„ÄÅÁâàÊú¨ÂçáÁ∫ß„ÄÅÁâàÊú¨ÂõûÊªöÔºåÈÇ£ÈÉΩÊòØ‰∏Ä‰∏™ÂëΩ‰ª§Â∞±ÊêûÂÆöÁöÑ‰∫ãÔºå‰∏çÂÅúÊú∫ÁöÑÁÅ∞Â∫¶Êõ¥Êñ∞ÔºåÁ°Æ‰øùÈ´òÂèØÁî®„ÄÅÈ´òÊÄßËÉΩ„ÄÅÈ´òÊâ©Â±ï„ÄÇ</p>
<h2 id="KubernetesÁªÑ‰ª∂"><a href="#KubernetesÁªÑ‰ª∂" class="headerlink" title="KubernetesÁªÑ‰ª∂"></a>KubernetesÁªÑ‰ª∂</h2><p>‰∏Ä‰∏™KubernetesÈõÜÁæ§‰∏ªË¶ÅÊòØÁî±**ÊéßÂà∂ËäÇÁÇπ(master)„ÄÅÂ∑•‰ΩúËäÇÁÇπ(node)**ÊûÑÊàêÔºåÊØè‰∏™ËäÇÁÇπ‰∏äÈÉΩ‰ºöÂÆâË£Ö‰∏çÂêåÁöÑÁªÑ‰ª∂„ÄÇ</p>
<p>masterÔºöÈõÜÁæ§ÁöÑÊéßÂà∂Âπ≥Èù¢ÔºåË¥üË¥£ÈõÜÁæ§ÁöÑÂÜ≥Á≠ñ</p>
<blockquote>
<p>ApiServerÔºöËµÑÊ∫êÊìç‰ΩúÁöÑÂîØ‰∏ÄÂÖ•Âè£ÔºåÊé•Êî∂Áî®Êà∑ËæìÂÖ•ÁöÑÂëΩ‰ª§ÔºåÊèê‰æõËÆ§ËØÅ„ÄÅÊéàÊùÉ„ÄÅAPIÊ≥®ÂÜåÂíåÂèëÁé∞Á≠âÊú∫Âà∂</p>
<p>SchedulerÔºöË¥üË¥£ÈõÜÁæ§ËµÑÊ∫êË∞ÉÂ∫¶ÔºåÊåâÁÖßÈ¢ÑÂÆöÁöÑË∞ÉÂ∫¶Á≠ñÁï•Â∞ÜPodË∞ÉÂ∫¶Âà∞Áõ∏Â∫îÁöÑnodeËäÇÁÇπ‰∏ä</p>
<p>ControllerManagerÔºöË¥üË¥£Áª¥Êä§ÈõÜÁæ§ÁöÑÁä∂ÊÄÅÔºåÊØîÂ¶ÇÁ®ãÂ∫èÈÉ®ÁΩ≤ÂÆâÊéí„ÄÅÊïÖÈöúÊ£ÄÊµã„ÄÅËá™Âä®Êâ©Â±ï„ÄÅÊªöÂä®Êõ¥Êñ∞Á≠â</p>
<p>EtcdÔºöË¥üË¥£Â≠òÂÇ®ÈõÜÁæ§‰∏≠ÂêÑÁßçËµÑÊ∫êÂØπË±°ÁöÑ‰ø°ÊÅØ</p>
</blockquote>
<p>nodeÔºöÈõÜÁæ§ÁöÑÊï∞ÊçÆÂπ≥Èù¢ÔºåË¥üË¥£‰∏∫ÂÆπÂô®Êèê‰æõËøêË°åÁéØÂ¢É</p>
<blockquote>
<p>Kubelet:Ë¥üË¥£Áª¥Êä§ÂÆπÂô®ÁöÑÁîüÂëΩÂë®ÊúüÔºåÂç≥ÈÄöËøáÊéßÂà∂dockerÔºåÊù•ÂàõÂª∫„ÄÅÊõ¥Êñ∞„ÄÅÈîÄÊØÅÂÆπÂô®</p>
<p>KubeProxy:Ë¥üË¥£Êèê‰æõÈõÜÁæ§ÂÜÖÈÉ®ÁöÑÊúçÂä°ÂèëÁé∞ÂíåË¥üËΩΩÂùáË°°</p>
<p>Docker:Ë¥üË¥£ËäÇÁÇπ‰∏äÂÆπÂô®ÁöÑÂêÑÁßçÊìç‰Ωú</p>
</blockquote>
<p><img src="/D:/Learning\PersonalBlog\CodeChenBlog\source_posts\k8s-base\Snipaste_2022-04-11_21-04-25.jpg"></p>
<p>‰∏ãÈù¢Ôºå‰ª•ÈÉ®ÁΩ≤‰∏Ä‰∏™nginxÊúçÂä°Êù•ËØ¥ÊòékubernetesÁ≥ªÁªüÂêÑ‰∏™ÁªÑ‰ª∂Ë∞ÉÁî®ÂÖ≥Á≥ª:</p>
<ol>
<li><p>È¶ñÂÖàË¶ÅÊòéÁ°ÆÔºå‰∏ÄÊó¶kubernetesÁéØÂ¢ÉÂêØÂä®‰πãÂêéÔºåmasterÂíånodeÈÉΩ‰ºöÂ∞ÜËá™Ë∫´ÁöÑ‰ø°ÊÅØÂ≠òÂÇ®Âà∞etcdÊï∞ÊçÆÂ∫ì‰∏≠</p>
</li>
<li><p>‰∏Ä‰∏™nginxÊúçÂä°ÁöÑÂÆâË£ÖËØ∑Ê±Ç‰ºöÈ¶ñÂÖàË¢´ÂèëÈÄÅÂà∞masterËäÇÁÇπÁöÑapiServerÁªÑ‰ª∂</p>
</li>
<li><p>apiServerÁªÑ‰ª∂‰ºöË∞ÉÁî®schedulerÁªÑ‰ª∂Êù•ÂÜ≥ÂÆöÂà∞Â∫ïÂ∫îËØ•ÊääËøô‰∏™ÊúçÂä°ÂÆâË£ÖÂà∞Âì™‰∏™nodeËäÇÁÇπ‰∏ä<br>Âú®Ê≠§Êó∂ÔºåÂÆÉ‰ºö‰ªéetcd‰∏≠ËØªÂèñÂêÑ‰∏™nodeËäÇÁÇπÁöÑ‰ø°ÊÅØÔºåÁÑ∂ÂêéÊåâÁÖß‰∏ÄÂÆöÁöÑÁÆóÊ≥ïËøõË°åÈÄâÊã©ÔºåÂπ∂Â∞ÜÁªìÊûúÂëäÁü•apiServer</p>
</li>
<li><p>apiServerË∞ÉÁî®controller-managerÂéªË∞ÉÂ∫¶NodeËäÇÁÇπÂÆâË£ÖnginxÊúçÂä°</p>
</li>
<li><p>kubeletÊé•Êî∂Âà∞Êåá‰ª§ÂêéÔºå‰ºöÈÄöÁü•dockerÔºåÁÑ∂ÂêéÁî±dockerÊù•ÂêØÂä®‰∏Ä‰∏™nginxÁöÑpod<br>podÊòØkubernetesÁöÑÊúÄÂ∞èÊìç‰ΩúÂçïÂÖÉÔºåÂÆπÂô®ÂøÖÈ°ªË∑ëÂú®pod‰∏≠Ëá≥Ê≠§</p>
</li>
<li><p>‰∏Ä‰∏™NginxÊúçÂä°Â∞±ËøêË°å‰∫ÜÔºåÂ¶ÇÊûúÈúÄË¶ÅËÆøÈóÆNginxÔºåÂ∞±ÈúÄË¶ÅÈÄöËøákube-proxyÊù•ÂØπpod‰∫ßÁîüËÆøÈóÆ‰ª£ÁêÜ</p>
<p>ËøôÊ†∑ÔºåÂ§ñÁïåÁî®Êà∑Â∞±ÂèØ‰ª•ËÆøÈóÆÈõÜÁæ§‰∏≠ÁöÑNginxÊúçÂä°‰∫Ü</p>
</li>
</ol>
<h5 id="Kubernetes-ÁªÑ‰ª∂"><a href="#Kubernetes-ÁªÑ‰ª∂" class="headerlink" title="Kubernetes ÁªÑ‰ª∂"></a>Kubernetes ÁªÑ‰ª∂</h5><p><code>kube-apiserver</code> API ÊúçÂä°Âô®ÔºåÂÖ¨ÂºÄ‰∫Ü Kubernetes API<br><code>etcd</code> ÈîÆÂÄºÊï∞ÊçÆÂ∫ìÔºåÂèØ‰ª•‰Ωú‰∏∫‰øùÂ≠ò Kubernetes ÊâÄÊúâÈõÜÁæ§Êï∞ÊçÆÁöÑÂêéÂè∞Êï∞ÊçÆÂ∫ì<br><code>kube-scheduler</code> Ë∞ÉÂ∫¶ Pod Âà∞Âì™‰∏™ËäÇÁÇπËøêË°å<br><code>kube-controller</code> ÈõÜÁæ§ÊéßÂà∂Âô®<br><code>cloud-controller</code> ‰∏é‰∫ëÊúçÂä°ÂïÜ‰∫§‰∫í</p>
<p><img src="/D:/Learning\PersonalBlog\CodeChenBlog\source_posts\k8s-base\kwonmx7e.png"></p>
<h2 id="k8sÈõÜÁæ§Êû∂ÊûÑ"><a href="#k8sÈõÜÁæ§Êû∂ÊûÑ" class="headerlink" title="k8sÈõÜÁæ§Êû∂ÊûÑ"></a>k8sÈõÜÁæ§Êû∂ÊûÑ</h2><p><img src="/D:/Learning\PersonalBlog\CodeChenBlog\source_posts\k8s-base\kwob90mh.png"></p>
<h5 id="master"><a href="#master" class="headerlink" title="master"></a>master</h5><p>‰∏ªËäÇÁÇπÔºåÊéßÂà∂Âπ≥Âè∞Ôºå‰∏çÈúÄË¶ÅÂæàÈ´òÊÄßËÉΩÔºå‰∏çË∑ë‰ªªÂä°ÔºåÈÄöÂ∏∏‰∏Ä‰∏™Â∞±Ë°å‰∫ÜÔºå‰πüÂèØ‰ª•ÂºÄÂ§ö‰∏™‰∏ªËäÇÁÇπÊù•ÊèêÈ´òÈõÜÁæ§ÂèØÁî®Â∫¶„ÄÇ</p>
<h5 id="worker"><a href="#worker" class="headerlink" title="worker"></a>worker</h5><p>Â∑•‰ΩúËäÇÁÇπÔºåÂèØ‰ª•ÊòØËôöÊãüÊú∫ÊàñÁâ©ÁêÜËÆ°ÁÆóÊú∫Ôºå‰ªªÂä°ÈÉΩÂú®ËøôÈáåË∑ëÔºåÊú∫Âô®ÊÄßËÉΩÈúÄË¶ÅÂ•ΩÁÇπÔºõÈÄöÂ∏∏ÈÉΩÊúâÂæàÂ§ö‰∏™ÔºåÂèØ‰ª•‰∏çÊñ≠Âä†Êú∫Âô®Êâ©Â§ßÈõÜÁæ§ÔºõÊØè‰∏™Â∑•‰ΩúËäÇÁÇπÁî±‰∏ªËäÇÁÇπÁÆ°ÁêÜ</p>
<h5 id="ÈáçË¶ÅÊ¶ÇÂøµ-Pod"><a href="#ÈáçË¶ÅÊ¶ÇÂøµ-Pod" class="headerlink" title="ÈáçË¶ÅÊ¶ÇÂøµ Pod"></a>ÈáçË¶ÅÊ¶ÇÂøµ Pod</h5><p>Ë±ÜËçöÔºåK8S Ë∞ÉÂ∫¶„ÄÅÁÆ°ÁêÜÁöÑÊúÄÂ∞èÂçï‰ΩçÔºå‰∏Ä‰∏™ Pod ÂèØ‰ª•ÂåÖÂê´‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂÆπÂô®ÔºåÊØè‰∏™ Pod ÊúâËá™Â∑±ÁöÑËôöÊãüIP„ÄÇ‰∏Ä‰∏™Â∑•‰ΩúËäÇÁÇπÂèØ‰ª•ÊúâÂ§ö‰∏™ podÔºå‰∏ªËäÇÁÇπ‰ºöËÄÉÈáèË¥üËΩΩËá™Âä®Ë∞ÉÂ∫¶ pod Âà∞Âì™‰∏™ËäÇÁÇπËøêË°å„ÄÇ</p>
<p><strong>Controller</strong></p>
<p>ÊéßÂà∂Âô®ÔºåÈÄöËøáÂÆÉÊù•ÂÆûÁé∞ÂØπpodÁöÑÁÆ°ÁêÜÔºåÊØîÂ¶ÇÂêØÂä®pod„ÄÅÂÅúÊ≠¢pod„ÄÅ‰º∏Áº©podÁöÑÊï∞ÊòØÁ≠âÁ≠â</p>
<p><strong>Service</strong></p>
<p>podÂØπÂ§ñÊúçÂä°ÁöÑÁªü‰∏ÄÂÖ•Âè£Ôºå‰∏ãÈù¢ÂèØ‰ª•Áª¥Êä§ËÄÖÂêå‰∏ÄÁ±ªÁöÑÂ§ö‰∏™pod</p>
<p><strong>Label</strong></p>
<p>Ê†áÁ≠æÔºåÁî®‰∫éÂØπpodËøõË°åÂàÜÁ±ªÔºåÂêå‰∏ÄÁ±ªpod‰ºöÊã•ÊúâÁõ∏ÂêåÁöÑÊ†áÁ≠æ</p>
<p><strong>NameSpace</strong></p>
<p>ÂëΩÂêçÁ©∫Èó¥ÔºåÁî®Êù•ÈöîÁ¶ªpodÁöÑËøêË°åÁéØÂ¢É</p>
<p><img src="/D:/Learning\PersonalBlog\CodeChenBlog\source_posts\k8s-base\kwoccq7d.jpg"></p>
<p><strong>k8sÊû∂ÊûÑ</strong></p>
<p><img src="/D:/Learning\PersonalBlog\CodeChenBlog\source_posts\k8s-base\Snipaste_2022-04-11_15-51-49.jpg"></p>
<p>APISERVERÔºöÊâÄÊúâÊúçÂä°ËÆøÈóÆÁªü‰∏ÄÂÖ•Âè£</p>
<p>CrontrollerManagerÔºöÁª¥ÊåÅÂâØÊú¨ÊúüÊúõÊï∞ÁõÆ</p>
<p>SchedulerÔºöË¥üË¥£‰ªãÁªç‰ªªÂä°‚Ä¶ÈÄâÊã©ÂêàÈÄÇÁöÑËäÇÁÇπËøõË°åÂàÜÈÖç‰ªªÂä°.</p>
<p>ETCDÔºöÈîÆÂÄºÂØπÊï∞ÊçÆÂ∫ìÂÇ®Â≠òK8sÈõÜÁæ§ÊâÄÊúâÈáçË¶Å‰ø°ÊÅØÔºàÊåÅ‰πÖÂåñÔºâ</p>
<p>KubeletÔºöÁúüÊé•Ë∑üÂÆπÂô®ÂºòË≠¶‰∫§‰∫íÂÆûÁé∞ÂÆπÂô®ÁöÑÁîüÂëΩÂë®ÊúüÁÆ°ÁêÜ</p>
<p>Kube-poxyÔºöË¥üË¥£ÂÜôÂÖ•ËßÑÂàôËá≥IPTABLES„ÄÅIPVSÂÆûÁé∞ÊúçÂä°Êò†Â∞ÑËÆøÈóÆÁöÑ</p>
<p>COREDNSÔºöÂèØ‰ª•‰∏∫ÈõÜÁæ§‰∏≠ÁöÑSVCÂàõÂª∫‰∏Ä‰∏™ÂüüÂêçIPÁöÑÂØπÂ∫îÂÖ≥Á≥ªËß£Êûê</p>
<p>DASHBOARDÔºöÁªôK8S ÈõÜÁæ§Êèê‰æõ‰∏Ä‰∏™B/SÁªìÊûÑËÆøÁÇπ‰ΩìÁ≥ª</p>
<p>INGRESS CONTROLLERÔºöÂÆòÊñπÂè™ËÉΩÂÆûÁé∞ÂõõÂ±Ç‰ª£ÁêÜÔºåINGRESS ÂèØ‰ª•ÂÆûÁé∞‰∏ÉÂ±Ç‰ª£ÁêÜ</p>
<p>FEDERATIONÔºöÊèê‰æõ‰∏Ä‰∏™ÂèØ‰ª•Ë∑®ÈõÜÁæ§‰∏≠ÂøÉÂ§öK8SÁªü‰∏ÄÁÆ°ÂÆòÁêÜÂäüËÉΩ</p>
<p>PROMETHEUSÔºöÊèê‰æõK8SÈõÜÁæ§ÁöÑÁõëÊéßËÉΩÂäõ</p>
<p>ELKÔºöÊèê‰æõK8sÈõÜÁæ§Â∑≥ÂøóÁªü‰∏ÄÂàÜÊûê‰ªãÂÖ•Âπ≥Âè∞</p>
<h2 id="pod"><a href="#pod" class="headerlink" title="pod"></a>pod</h2><p><strong>podÁ±ªÂûãÔºö</strong></p>
<ul>
<li>Ëá™Âä©Âºèpod</li>
<li>ÊéßÂà∂Âô®ÁÆ°ÁêÜÁöÑpod</li>
</ul>
<p><strong>podÊéßÂà∂Âô®Á±ªÂûã</strong></p>
<ul>
<li><p>ReplicationController &amp; ReplicaSet &amp; Deployment</p>
<ul>
<li>HPA (HorizontalPodAutoScale)</li>
</ul>
</li>
<li><p>StatefullSet</p>
</li>
<li><p>DaemonSet</p>
</li>
<li><p>JobÔºåCronjob</p>
</li>
</ul>
<blockquote>
<p>ReplicationControllerÁî®Êù•Á°Æ‰øùÂÆπÂô®Â∫îÁî®ÁöÑÂâØÊú¨Êï∞ÂßãÁªà‰øùÊåÅÂú®Áî®Êà∑ÂÆö‰πâÁöÑÂâØÊú¨Êï∞ÔºåÂç≥Â¶ÇÊûúÊúâÂÆπÂô®ÂºÇÂ∏∏ÈÄÄÂá∫Ôºå‰ºöËá™Âä®ÂàõÂª∫Êñ∞ÁöÑ Pod Êù•Êõø‰ª£;ËÄåÂ¶ÇÊûúÂºÇÂ∏∏Â§öÂá∫Êù•ÁöÑÂÆπÂô®‰πü‰ºöËá™Âä®ÂõûÊî∂„ÄÇÂú®Êñ∞ÁâàÊú¨ÁöÑKubernetes‰∏≠Âª∫ËÆÆ‰ΩøÁî®ReplicaSetÊù•Âèñ‰ª£ ReplicationControlle</p>
<p>ReplicaSet Ë∑üReplicationControllerÊ≤°ÊúâÊú¨Ë¥®ÁöÑ‰∏çÂêåÔºåÂè™ÊòØÂêçÂ≠ó‰∏ç‰∏ÄÊ†∑ÔºåÂπ∂‰∏îReplicaSetÊîØÊåÅÈõÜÂêàÂºèÁöÑ selector</p>
<p>ËôΩÁÑ∂ReplicaSetÂèØ‰ª•Áã¨Á´ã‰ΩøÁî®Ôºå‰ΩÜ‰∏ÄËà¨ËøòÊòØÂª∫ËÆÆ‰ΩøÁî®DeploymentÊù•Ëá™Âä®ÁÆ°ÁêÜReplicaSet ÔºåËøôÊ†∑Â∞±Êó†ÈúÄÊãÖÂøÉË∑üÂÖ∂‰ªñÊú∫Âà∂ÁöÑ‰∏çÂÖºÂÆπÈóÆÈ¢òÔºàÊØîÂ¶Ç ReplicaSet ‰∏çÊîØÊåÅrolling-update‰ΩÜ DeploymentÊîØÊåÅ)</p>
</blockquote>
<blockquote>
<p><strong>StatefulSet</strong> ÊòØ‰∏∫‰∫ÜËß£ÂÜ≥ÊúâÁä∂ÊÄÅÊúçÂä°ÁöÑÈóÆÈ¢ò(ÂØπÂ∫îDeploymentsÂíåReplicaSetsÊòØ‰∏∫Êó†Áä∂ÊÄÅÊúçÂä°ËÄåËÆæËÆ°ÔºâÔºåÂÖ∂Â∫îÁî®Âú∫ÊôØÂåÖÊã¨:</p>
<ul>
<li>Á®≥ÂÆöÁöÑÊåÅ‰πÖÂåñÂ≠òÂÇ®ÔºåÂç≥ PodÈáçÊñ∞Ë∞ÉÂ∫¶ÂêéËøòÊòØËÉΩËÆøÈóÆÂà∞Áõ∏ÂêåÁöÑÊåÅ‰πÖÂåñÊï∞ÊçÆÔºåÂü∫‰∫éPVCÊù•ÂÆûÁé∞</li>
<li>Á®≥ÂÆöÁöÑÁΩëÁªúÊ†áÂøóÔºåÂç≥ PodÈáçÊñ∞Ë∞ÉÂ∫¶ÂêéÂÖ∂ PodNameÂíå HostName‰∏çÂèòÔºåÂü∫‰∫éHeadless Service(Âç≥Ê≤°ÊúâCluster IPÁöÑ Service )Êù•ÂÆûÁé∞</li>
</ul>
<ul>
<li>ÊúâÂ∫èÈÉ®ÁΩ≤ÔºåÊúâÂ∫èÊâ©Â±ïÔºåÂç≥ Pod ÊòØÊúâÈ°∫Â∫èÁöÑÔºåÂú®ÈÉ®ÁΩ≤ÊàñËÄÖÊâ©Â±ïÁöÑÊó∂ÂÄôË¶Å‰æùÊçÆÂÆö‰πâÁöÑÈ°∫Â∫è‰æùÊ¨°‰æùÊ¨°ËøõË°å(Âç≥‰ªé–ûÂà∞N-1ÔºåÂú®‰∏ã‰∏Ä‰∏™PodËøêË°å‰πãÂâçÊâÄÊúâ‰πãÂâçÁöÑ PodÂøÖÈ°ªÈÉΩÊòØRunning Âíå ReadyÁä∂ÊÄÅÔºâÔºåÂü∫‰∫éinit containers Êù•ÂÆûÁé∞</li>
<li>ÊúâÂ∫èÊî∂Áº©ÔºåÊúâÂ∫èÂà†Èô§ÔºàÂç≥‰ªé N-1Âà∞0)</li>
</ul>
</blockquote>
<blockquote>
<p><strong>DaemonSet</strong>Á°Æ‰øùÂÖ®ÈÉ®(ÊàñËÄÖ‰∏Ä‰∫õ)Node ‰∏äËøêË°å‰∏Ä‰∏™Pod ÁöÑÂâØÊú¨„ÄÇÂΩìÊúâ Node Âä†ÂÖ•ÈõÜÁæ§Êó∂Ôºå‰πü‰ºö‰∏∫‰ªñ‰ª¨Êñ∞Â¢û‰∏Ä‰∏™Pod „ÄÇÂΩìÊúâ Node ‰ªéÈõÜÁæ§ÁßªÈô§Êó∂ÔºåËøô‰∫õ Pod ‰πü‰ºöË¢´ÂõûÊî∂„ÄÇÂà†Èô§DaemonSet Â∞Ü‰ºöÂà†Èô§ÂÆÉÂàõÂª∫ÁöÑÊâÄÊúâPod</p>
<p>‰ΩøÁî®DaemonSet ÁöÑ‰∏Ä‰∫õÂÖ∏ÂûãÁî®Ê≥ï:</p>
<ul>
<li><p>ËøêË°åÈõÜÁæ§Â≠òÂÇ®daemonÔºå‰æãÂ¶ÇÂú®ÊØè‰∏™Node‰∏äËøêË°åglusterd„ÄÅcepho</p>
</li>
<li><p>Âú®ÊØè‰∏™Node ‰∏äËøêË°åÊó•ÂøóÊî∂ÈõÜdaemonÔºå‰æãÂ¶Çfluentd„ÄÅlogstash</p>
</li>
<li><p>Âú®ÊØè‰∏™Node ‰∏äËøêË°åÁõëÊéßdaemonÔºå‰æãÂ¶ÇPrometheus Node Exporter</p>
</li>
</ul>
</blockquote>
<h2 id="ÁΩëÁªúÈÄöËÆØÊñπÂºè"><a href="#ÁΩëÁªúÈÄöËÆØÊñπÂºè" class="headerlink" title="ÁΩëÁªúÈÄöËÆØÊñπÂºè"></a>ÁΩëÁªúÈÄöËÆØÊñπÂºè</h2><p>Kubernetes ÁöÑÁΩëÁªúÊ®°ÂûãÂÅáÂÆö‰∫ÜÊâÄÊúâPodÈÉΩÂú®‰∏Ä‰∏™ÂèØ‰ª•Áõ¥Êé•ËøûÈÄöÁöÑÊâÅÂπ≥ÁöÑÁΩëÁªúÁ©∫Èó¥‰∏≠ÔºåËøôÂú®GCE (Google Compute EngineÔºâÈáåÈù¢ÊòØÁé∞ÊàêÁöÑÁΩëÁªúÊ®°ÂûãÔºåKubernetesÂÅáÂÆöËøô‰∏™ÁΩëÁªúÂ∑≤ÁªèÂ≠òÂú®„ÄÇËÄåÂú®ÁßÅÊúâ‰∫ëÈáåÊê≠Âª∫KubernetesÈõÜÁæ§ÔºåÂ∞±‰∏çËÉΩÂÅáÂÆöËøô‰∏™ÁΩëÁªúÂ∑≤ÁªèÂ≠òÂú®‰∫Ü„ÄÇÊàë‰ª¨ÈúÄË¶ÅËá™Â∑±ÂÆûÁé∞Ëøô‰∏™ÁΩëÁªúÂÅáËÆæÔºåÂ∞Ü‰∏çÂêåËäÇÁÇπ‰∏äÁöÑ DockerÂÆπÂô®‰πãÈó¥ÁöÑ‰∫íÁõ∏ËÆøÈóÆÂÖàÊâìÈÄöÔºåÁÑ∂ÂêéËøêË°åKubernetes</p>
<p>Âêå‰∏Ä‰∏™PodÂÜÖÁöÑÂ§ö‰∏™ÂÆπÂô®‰πãÈó¥:lo</p>
<p>Pod ‰πãÈó¥ÁöÑÈÄöËÆØÔºöOverlay Network</p>
<p>Pod ‰∏é Service‰πãÈó¥ÁöÑÈÄöËÆØÔºöÂêÑËäÇÁÇπÁöÑ IptablesËßÑÂàô</p>
<p>FlannelÊòØCoreOSÂõ¢ÈòüÈíàÂØπKubernetes ËÆæËÆ°ÁöÑ‰∏Ä‰∏™ÁΩëÁªúËßÑÂàíÊúçÂä°ÔºåÁÆÄÂçïÊù•ËØ¥ÔºåÂÆÉÁöÑÂäüËÉΩÊòØËÆ©ÈõÜÁæ§‰∏≠ÁöÑ‰∏çÂêåËäÇÁÇπ‰∏ªÊú∫ÂàõÂª∫ÁöÑDockerÂÆπÂô®ÈÉΩÂÖ∑ÊúâÂÖ®ÈõÜÁæ§ÂîØ‰∏ÄÁöÑËôöÊãüIPÂú∞ÂùÄ„ÄÇËÄå‰∏îÂÆÉËøòËÉΩÂú®Ëøô‰∫õIPÂú∞ÂùÄ‰πãÈó¥Âª∫Á´ã‰∏Ä‰∏™Ë¶ÜÁõñÁΩëÁªúÔºàOverlay Network)ÔºåÈÄöËøáËøô‰∏™Ë¶ÜÁõñÁΩëÁªúÔºåÂ∞ÜÊï∞ÊçÆÂåÖÂéüÂ∞Å<br>‰∏çÂä®Âú∞‰º†ÈÄíÂà∞ÁõÆÊ†áÂÆπÂô®ÂÜÖ</p>
<p><img src="/D:/Learning\PersonalBlog\CodeChenBlog\source_posts\k8s-base\Snipaste_2022-04-11_16-28-30.jpg"></p>
<p>ETCD‰πãFlannel Êèê‰æõËØ¥ÊòéÔºö</p>
<ul>
<li><p>Â≠òÂÇ®ÁÆ°ÁêÜFlannel ÂèØÂàÜÈÖçÁöÑIPÂú∞ÂùÄÊÆµËµÑÊ∫ê</p>
</li>
<li><p>ÁõëÊéßETCD‰∏≠ÊØè‰∏™Pod ÁöÑÂÆûÈôÖÂú∞ÂùÄÔºåÂπ∂Âú®ÂÜÖÂ≠ò‰∏≠Âª∫Á´ãÁª¥Êä§PodËäÇÁÇπË∑ØÁî±Ë°®</p>
</li>
</ul>
<p>Âêå‰∏Ä‰∏™Pod ÂÜÖÈÉ®ÈÄöËÆØÔºöÂêå‰∏Ä‰∏™PodÂÖ±‰∫´Âêå‰∏Ä‰∏™ÁΩëÁªúÂëΩÂêçÁ©∫Èó¥ÔºåÂÖ±‰∫´Âêå‰∏Ä‰∏™Linux ÂçèËÆÆÊ†à</p>
<p>Pod1Ëá≥Pod2</p>
<ul>
<li><p>Pod1‰∏é Pod2‰∏çÂú®Âêå‰∏ÄÂè∞‰∏ªÊú∫ÔºåPodÁöÑÂú∞ÂùÄÊòØ‰∏édocker0Âú®Âêå‰∏Ä‰∏™ÁΩëÊÆµÁöÑÔºå‰ΩÜdockerOÁΩëÊÆµ‰∏éÂÆø‰∏ªÊú∫ÁΩëÂç°ÊòØ‰∏§‰∏™ÂÆåÂÖ®‰∏çÂêåÁöÑIPÁΩëÊÆµÔºåÂπ∂‰∏î‰∏çÂêåNode‰πãÈó¥ÁöÑÈÄö‰ø°Âè™ËÉΩÈÄöËøáÂÆø‰∏ªÊú∫ÁöÑÁâ©ÁêÜÁΩëÂç°ËøõË°å„ÄÇÂ∞ÜPodÁöÑIPÂíåÊâÄÂú®NodeÁöÑIPÂÖ≥ËÅîËµ∑Êù•ÔºåÈÄöËøáËøô‰∏™ÂÖ≥ËÅîËÆ©PodÂèØ‰ª•‰∫íÁõ∏ËÆøÈóÆ</p>
</li>
<li><p>Pod1 ‰∏é Pod2Âú®Âêå‰∏ÄÂè∞Êú∫Âô®ÔºåÁî±Docker0ÁΩëÊ°•Áõ¥Êé•ËΩ¨ÂèëËØ∑Ê±ÇËá≥ Pod2Ôºå‰∏çÈúÄË¶ÅÁªèËøá Flannel ÊºîÁ§∫</p>
</li>
</ul>
<p>Pod Ëá≥Service ÁöÑÁΩëÁªú:ÁõÆÂâçÂü∫‰∫éÊÄßËÉΩËÄÉËôëÔºåÂÖ®ÈÉ®‰∏∫iptablesÔºàËøô‰∏™ÊØîËæÉËÄÅ‰∫ÜÔºåÁé∞Âú®Áî®LVSÔºâÁª¥Êä§ÂíåËΩ¨Âèë</p>
<p>PodÂà∞Â§ñÁΩë: PodÂêëÂ§ñÁΩëÂèëÈÄÅËØ∑Ê±ÇÔºåÊü•ÊâæË∑ØÁî±Ë°®ÔºåËΩ¨ÂèëÊï∞ÊçÆÂåÖÂà∞ÂÆø‰∏ªÊú∫ÁöÑÁΩëÂç°ÔºåÂÆø‰∏ªÁΩëÂç°ÂÆåÊàêË∑ØÁî±ÈÄâÊã©ÂêéÔºåiptablesÊâßË°åMasqueradeÔºåÊääÊ∫êIPÊõ¥Êîπ‰∏∫ÂÆø‰∏ªÁΩëÂç°ÁöÑIPÔºåÁÑ∂ÂêéÂêëÂ§ñÁΩëÊúçÂä°Âô®ÂèëÈÄÅËØ∑Ê±Ç</p>
<p>Â§ñÁΩëËÆøÈóÆPodÔºöService</p>
<p><img src="/D:/Learning\PersonalBlog\CodeChenBlog\source_posts\k8s-base\Snipaste_2022-04-11_16-36-24.jpg"></p>
<h1 id="ÈõÜÁæ§ÁéØÂ¢ÉÊê≠Âª∫"><a href="#ÈõÜÁæ§ÁéØÂ¢ÉÊê≠Âª∫" class="headerlink" title="ÈõÜÁæ§ÁéØÂ¢ÉÊê≠Âª∫"></a>ÈõÜÁæ§ÁéØÂ¢ÉÊê≠Âª∫</h1><h2 id="ÁéØÂ¢ÉËßÑÂàí"><a href="#ÁéØÂ¢ÉËßÑÂàí" class="headerlink" title="ÁéØÂ¢ÉËßÑÂàí"></a>ÁéØÂ¢ÉËßÑÂàí</h2><h3 id="ÈõÜÁæ§Á±ªÂûã"><a href="#ÈõÜÁæ§Á±ªÂûã" class="headerlink" title="ÈõÜÁæ§Á±ªÂûã"></a>ÈõÜÁæ§Á±ªÂûã</h3><p>kubernetesÈõÜÁæ§Â§ß‰Ωì‰∏äÂàÜ‰∏∫‰∏§Á±ªÔºö<strong>‰∏Ä‰∏ªÂ§ö‰ªé</strong>Âíå<strong>Â§ö‰∏ªÂ§ö‰ªé</strong></p>
<ul>
<li>‰∏Ä‰∏ªÂ§ö‰ªéÔºö‰∏ÄÂè∞MasterËäÇÁÇπÂíåÂ§öÂè∞NodeËäÇÁÇπÔºåÊê≠Âª∫ÁÆÄÂçïÔºå‰ΩÜÊòØÂçïÊú∫ÊïÖÈöúÈ£éÈô©ÔºåÈÄÇÂêàÁî®‰∫éÊµãËØïÁéØÂ¢É</li>
<li>Â§ö‰∏ªÂ§ö‰ªéÔºöÂ§öÂè∞MasterËäÇÁÇπÂíåÂ§öÂè∞NodeËäÇÁÇπÔºåÊê≠Âª∫È∫ªÁÉ¶ÔºåÂÆâÂÖ®ÊÄßÈ´òÔºåÈÄÇÂêàÁî®‰∫éÁîü‰∫ßÁéØÂ¢É</li>
</ul>
<p><img src="/D:/Learning\PersonalBlog\CodeChenBlog\source_posts\k8s-base\Snipaste_2022-04-11_21-25-31.jpg"></p>
<h3 id="ÂÆâË£ÖÊñπÂºè"><a href="#ÂÆâË£ÖÊñπÂºè" class="headerlink" title="ÂÆâË£ÖÊñπÂºè"></a>ÂÆâË£ÖÊñπÂºè</h3><p>kubernetesÊúâÂ§öÁßçÈÉ®ÁΩ≤ÊñπÂºèÔºåÁõÆÂâç‰∏ªÊµÅÁöÑÊñπÂºèÊúâkubeadm„ÄÅminikube„ÄÅ‰∫åËøõÂà∂ÂåÖ</p>
<ul>
<li>minikubeÔºö‰∏Ä‰∏™Áî®‰∫éÂø´ÈÄüÊê≠Âª∫ÂçïËäÇÁÇπkubernetesÁöÑÂ∑•ÂÖ∑</li>
<li>kubeadmÔºö‰∏Ä‰∏™Áî®‰∫éÂø´ÈÄüÊê≠Âª∫kubernetesÈõÜÁæ§ÁöÑÂ∑•ÂÖ∑</li>
<li>‰∫åËøõÂà∂ÂåÖÔºö‰ªéÂÆòÁΩë‰∏ãËΩΩÊØè‰∏™ÁªÑ‰ª∂ÁöÑ‰∫åËøõÂà∂ÂåÖÔºå‰æùÊ¨°ÂéªÂÆâË£ÖÔºåÊ≠§ÊñπÂºèÂØπ‰∫éÁêÜËß£kubernetesÁªÑ‰ª∂Êõ¥Âä†ÊúâÊïà</li>
</ul>
<h3 id="‰∏ªÊú∫ËßÑÂàí"><a href="#‰∏ªÊú∫ËßÑÂàí" class="headerlink" title="‰∏ªÊú∫ËßÑÂàí"></a>‰∏ªÊú∫ËßÑÂàí</h3><table>
<thead>
<tr>
<th>‰ΩúÁî®</th>
<th>IPÂú∞ÂùÄ</th>
<th>Êìç‰ΩúÁ≥ªÁªü</th>
<th>ÈÖçÁΩÆ</th>
</tr>
</thead>
<tbody><tr>
<td>Master</td>
<td>192.168.31.100</td>
<td>centos7  Âü∫Á°ÄËÆæÊñΩÊúçÂä°Âô®</td>
<td>2È¢óCPU  2GÂÜÖÂ≠ò  50GÁ°¨Áõò</td>
</tr>
<tr>
<td>Node1</td>
<td>192.168.31.101</td>
<td>centos7  Âü∫Á°ÄËÆæÊñΩÊúçÂä°Âô®</td>
<td>2È¢óCPU  2GÂÜÖÂ≠ò  50GÁ°¨Áõò</td>
</tr>
<tr>
<td>Node2</td>
<td>192.168.31.102</td>
<td>centos7  Âü∫Á°ÄËÆæÊñΩÊúçÂä°Âô®</td>
<td>2È¢óCPU  2GÂÜÖÂ≠ò  50GÁ°¨Áõò</td>
</tr>
</tbody></table>
<h2 id="ÁéØÂ¢ÉÊê≠Âª∫"><a href="#ÁéØÂ¢ÉÊê≠Âª∫" class="headerlink" title="ÁéØÂ¢ÉÊê≠Âª∫"></a>ÁéØÂ¢ÉÊê≠Âª∫</h2><p>Êú¨Ê¨°ÁéØÂ¢ÉÊê≠Âª∫ÈúÄË¶ÅÂÆâË£Ö‰∏âÂè∞CentosÊúçÂä°Âô®(‰∏Ä‰∏ª‰∫å‰ªé)ÔºåÁÑ∂ÂêéÂú®ÊØèÂè∞ÊúçÂä°Âô®‰∏≠ÂàÜÂà´ÂÆâË£Ödocker (18.06.3)Ôºåkubeadm (1.17.4) , kubelet (1.17.4) , kubectl (1.17.4ÔºâÁ®ãÂ∫è„ÄÇ</p>
<h3 id="‰∏ªÊú∫ÂÆâË£Ö"><a href="#‰∏ªÊú∫ÂÆâË£Ö" class="headerlink" title="‰∏ªÊú∫ÂÆâË£Ö"></a>‰∏ªÊú∫ÂÆâË£Ö</h3><p>Êú¨Ê¨°ÁéØÂ¢ÉÊê≠Âª∫ÈúÄË¶ÅÂÆâË£Ö‰∏âÂè∞CentosÊúçÂä°Âô®Ôºà‰∏Ä‰∏ª‰∫å‰ªé)ÔºåÁÑ∂ÂêéÂú®ÊØèÂè∞ÊúçÂä°Âô®‰∏≠ÂàÜÂà´ÂÆâË£Ödocker (18.06.3)Ôºåkubeadm (1.17.4) . kubelet (1.17.4) , kubectl (1.17.4ÔºâÁ®ãÂ∫è„ÄÇ</p>
<h3 id="ÁéØÂ¢ÉÂàùÂßãÂåñ"><a href="#ÁéØÂ¢ÉÂàùÂßãÂåñ" class="headerlink" title="ÁéØÂ¢ÉÂàùÂßãÂåñ"></a>ÁéØÂ¢ÉÂàùÂßãÂåñ</h3><p>1„ÄÅÊ£ÄÊü•Êìç‰ΩúÁ≥ªÁªüÁöÑÁâàÊú¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Ê≠§ÊñπÂºèÂÆâË£ÖkubernetesÈõÜÁæ§Ë¶ÅÊ±ÇcentosÁâàÊú¨Ë¶ÅÂú®7.5Êàñ‰πã‰∏ä</span></span><br><span class="line">[root@master ~]# cat /etc/redhat-release</span><br><span class="line">CentOS Linux release 7.5.1804 (Core)</span><br></pre></td></tr></table></figure>



<p>2„ÄÅ‰∏ªÊú∫ÂêçËß£Êûê</p>
<p>‰∏∫‰∫ÜÊñπ‰æøÂêéÈù¢ÈõÜÁæ§ËäÇÁÇπÈó¥ÁöÑÁõ¥Êé•Ë∞ÉÁî®ÔºåÂú®ËøôÈÖçÁΩÆ‰∏Ä‰∏ã‰∏ªÊú∫ÂêçËß£ÊûêÔºå‰ºÅ‰∏ö‰∏≠Êé®Ëçê‰ΩøÁî®ÂÜÖÈÉ®DNSÊúçÂä°Âô®</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ‰∏ªÊú∫ÂêçËß£Êûê ÁºñËæë‰∏âÂè∞ÊúçÂä°Âô®ÁöÑ/etc/hostsÊñá‰ª∂ÔºåÊ∑ªÂä†‰∏ãÈù¢ÂÜÖÂÆπ</span></span><br><span class="line">192.168.59.100 master</span><br><span class="line">192.168.59.101 node1</span><br><span class="line">192.168.59.102 node2</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> È™åËØÅÔºåÂèØ‰ª•‰∫íÁõ∏ping</span></span><br><span class="line">[root@master ~]# ping node1</span><br><span class="line">PING node1 (192.168.59.101) 56(84) bytes of data.</span><br><span class="line">64 bytes from node1 (192.168.59.101): icmp_seq=1 ttl=64 time=11.1 ms</span><br><span class="line">64 bytes from node1 (192.168.59.101): icmp_seq=2 ttl=64 time=0.282 ms</span><br><span class="line">64 bytes from node1 (192.168.59.101): icmp_seq=3 ttl=64 time=0.308 ms</span><br></pre></td></tr></table></figure>



<p>3„ÄÅÊó∂Èó¥ÂêåÊ≠•</p>
<p>kubernetesË¶ÅÊ±ÇÈõÜÁæ§‰∏≠ÁöÑËäÇÁÇπÊó∂Èó¥ÂøÖÈ°ªÁ≤æÁ°Æ‰∏ÄËá¥ÔºåËøôÈáåÁõ¥Êé•‰ΩøÁî®chronydÊúçÂä°‰ªéÁΩëÁªúÂêåÊ≠•Êó∂Èó¥</p>
<p>‰ºÅ‰∏ö‰∏≠Âª∫ËÆÆÈÖçÁΩÆÂÜÖÈÉ®ÁöÑÊó∂Èó¥ÂêåÊ≠•ÊúçÂä°Âô®</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ÂêØÂä®chronydÊúçÂä°</span></span><br><span class="line">[root@master ~]# systemctl start chronyd</span><br><span class="line"><span class="meta">#</span><span class="bash"> ËÆæÁΩÆchronydÊúçÂä°ÂºÄÂêØËá™ÂêØ</span></span><br><span class="line">[root@master ~]# systemctl enable chronyd</span><br><span class="line"><span class="meta">#</span><span class="bash"> chronydÊúçÂä°ÂêØÂä®Á®çÁ≠âÂá†ÁßíÈíüÔºåÂ∞±ÂèØ‰ª•‰ΩøÁî®dateÂëΩ‰ª§È™åËØÅÊó∂Èó¥‰∫Ü</span></span><br><span class="line">[root@master ~]# date</span><br></pre></td></tr></table></figure>



<p>4„ÄÅÁ¶ÅÁî®iptablesÂíåfirewalldÊúçÂä°</p>
<p>kubernetesÂíådockerÂú®ËøêË°å‰∏≠‰ºö‰∫ßÁîüÂ§ßÈáèÁöÑiptablesËßÑÂàôÔºå‰∏∫‰∫Ü‰∏çËÆ©Á≥ªÁªüËßÑÂàôË∑üÂÆÉ‰ª¨Ê∑∑Ê∑ÜÔºåÁõ¥Êé•ÂÖ≥Èó≠Á≥ªÁªüÁöÑËßÑÂàô</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ÂÖ≥Èó≠firewalldÊúçÂä°</span></span><br><span class="line">[root@master ~]# systemctl stop firewalld</span><br><span class="line">[root@master ~]# systemctl disable firewalld</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">ÂÖ≥Èó≠iptablesÊúçÂä°</span></span><br><span class="line">[root@master ~]# systemctl stop iptables</span><br><span class="line">[root@master ~]# systemctl disable iptables</span><br></pre></td></tr></table></figure>



<p>5„ÄÅÁ¶ÅÁî®selinux</p>
<p>selinuxÊòØLinuxÁ≥ªÁªü‰∏ãÁöÑ‰∏Ä‰∏™ÂÆâÂÖ®ÊúçÂä°ÔºåÂ¶ÇÊûú‰∏çÂÖ≥Èó≠ÂÆÉÔºåÂú®ÂÆâË£ÖÈõÜÁæ§‰∏≠‰ºö‰∫ßÁîüÂêÑÁßçÂêÑÊ†∑ÁöÑÂ•áËë©ÈóÆÈ¢ò</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ÁºñËæë/etc/selinux/config Êñá‰ª∂Ôºå‰øÆÊîπSELINUXÁöÑÂÄº‰∏∫disabled</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Ê≥®ÊÑè‰øÆÊîπÂÆåÊØï‰πãÂêéÈúÄË¶ÅÈáçÂêØLinuxÊúçÂä°</span></span><br><span class="line">SELINUX=disabled</span><br></pre></td></tr></table></figure>



<p>6„ÄÅÁ¶ÅÁî®swapÂàÜÂå∫</p>
<p>swapÂàÜÂå∫ÊåáÁöÑÊòØËôöÊãüÂÜÖÂ≠òÂàÜÂå∫ÔºåÂÆÉÁöÑ‰ΩúÁî®ÊòØÂú®Áâ©ÁêÜÂÜÖÂ≠ò‰ΩøÁî®ÂÆå‰πãÂêéÔºåÂ∞ÜÁ£ÅÁõòÁ©∫Èó¥ËôöÊãüÊàêÂÜÖÂ≠òÊù•‰ΩøÁî®</p>
<p>ÂêØÁî®swapËÆæÂ§á‰ºöÂØπÁ≥ªÁªüÁöÑÊÄßËÉΩ‰∫ßÁîüÈùûÂ∏∏Ë¥üÈù¢ÁöÑÂΩ±ÂìçÔºåÂõ†Ê≠§kubernetesË¶ÅÊ±ÇÊØè‰∏™ËäÇÁÇπÈÉΩË¶ÅÁ¶ÅÁî®swapËÆæÂ§á</p>
<p>‰ΩÜÊòØÂ¶ÇÊûúÂõ†‰∏∫Êüê‰∫õÂéüÂõ†Á°ÆÂÆû‰∏çËÉΩÂÖ≥Èó≠swapÂàÜÂå∫ÔºåÂ∞±ÈúÄË¶ÅÂú®ÈõÜÁæ§ÂÆâË£ÖËøáÁ®ã‰∏≠ÈÄöËøáÊòéÁ°ÆÁöÑÂèÇÊï∞ËøõË°åÈÖçÁΩÆËØ¥Êòé</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ÁºñËæëÂàÜÂå∫ÈÖçÁΩÆÊñá‰ª∂/etc/fstabÔºåÊ≥®ÈáäswapÂàÜÂå∫‰∏ÄË°å</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Ê≥®ÊÑè‰øÆÊîπÂÆåÊØï‰πãÂêéÈúÄË¶ÅÈáçÂêØLinuxÊúçÂä°</span></span><br><span class="line">UUID=455c753-7a60-4c17-a424-7741728c44a1 /boot   xfs   defaults   0 0</span><br><span class="line">/dev/mappar/centos-home /home                    xfs   defaults   0 0</span><br><span class="line"><span class="meta">#</span><span class="bash"> /dev/mapper/centos-swap swap                   swap  defaults   0 0</span></span><br></pre></td></tr></table></figure>



<p>7„ÄÅ‰øÆÊîπLinuxÁöÑÂÜÖÊ†∏ÂèÇÊï∞</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ‰øÆÊîπLinuxÁöÑÂÜÖÊ†∏ÂèÇÊï∞ÔºåÊ∑ªÂä†ÁΩëÊ°•ËøáÊª§ÂíåÂú∞ÂùÄËΩ¨ÂèëÂäüËÉΩ</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÁºñËæë/etc/sysctl.d/kubernetes.confÔºåÊ∑ªÂä†Â¶Ç‰∏ãÈÖçÁΩÆÔºö</span></span><br><span class="line">net.bridge.bridge-nf-call-ip6tables = 1</span><br><span class="line">net.bridge.bridge-nf-call-iptables = 1</span><br><span class="line">net.ipv4.ip_forward = 1</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÈáçÊñ∞Âä†ËΩΩÈÖçÁΩÆ</span></span><br><span class="line">[root@master ~]# sysctl -p</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Âä†ËΩΩÁΩëÊ°•ËøáÊª§Ê®°Âùó</span></span><br><span class="line">[root@master ~]# modprobe br_netfilter</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãÁΩëÊ°•ËøáÊª§Ê®°ÂùóÊòØÂê¶Âä†ËΩΩÊàêÂäü</span></span><br><span class="line">[root@master ~]# lsmod | grep br_netfilter</span><br></pre></td></tr></table></figure>

<p><img src="/D:/Learning\PersonalBlog\CodeChenBlog\source_posts\k8s-base\Snipaste_2022-04-12_16-00-29.jpg"></p>
<p>8„ÄÅÈÖçÁΩÆipvsÂäüËÉΩ</p>
<p>Âú®kubernetes‰∏≠serviceÊúâ‰∏§Áßç‰ª£ÁêÜÊ®°ÂºèÔºå‰∏ÄÁßçÊòØÂü∫‰∫éiptablesÁöÑÔºå‰∏ÄÁßçÊòØÂü∫‰∫éipvsÁöÑ</p>
<p>‰∏§ËÄÖÊØîËæÉÁöÑËØùÔºåipvsÁöÑÊÄßËÉΩÊòéÊòæË¶ÅÈ´ò‰∏Ä‰∫õÔºå‰ΩÜÊòØÂ¶ÇÊûúË¶Å‰ΩøÁî®ÂÆÉÔºåÈúÄË¶ÅÊâãÂä®Âä†ËΩΩipvsÊ®°Âùó</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1 ÂÆâË£ÖipsetÂíåipvsadm</span></span><br><span class="line">[root@master ~]# yum install ipset ipvsadmin -y</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2 Ê∑ªÂä†ÈúÄË¶ÅÂä†ËΩΩÁöÑÊ®°ÂùóÂÜôÂÖ•ËÑöÊú¨Êñá‰ª∂</span></span><br><span class="line">[root@master ~]# cat &lt;&lt;EOF &gt; /etc/sysconfig/modules/ipvs.modules</span><br><span class="line"><span class="meta">#</span><span class="bash">!bin/bash</span></span><br><span class="line">modprobe -- ip_vs</span><br><span class="line">modprobe -- ip_vs_rr</span><br><span class="line">modprobe -- ip_vs_wrr</span><br><span class="line">modprobe -- ip_vs_sh</span><br><span class="line">modprobe -- nf_conntrack_ipv4</span><br><span class="line">EOF</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3 ‰∏∫ËÑöÊú¨Êñá‰ª∂Ê∑ªÂä†ÊâßË°åÊùÉÈôê</span></span><br><span class="line">[root@master ~]# chmod +x /etc/sysconfig/modules/ipvs.modules</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4 ÊâßË°åËÑöÊú¨Êñá‰ª∂</span></span><br><span class="line">[root@master ~]# /bin/bash /etc/sysconfig/modules/ipvs.modules</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 5 Êü•ÁúãÂØπÂ∫îÁöÑÊ®°ÂùóÊòØÂê¶Âä†ËΩΩÊàêÂäü</span></span><br><span class="line">[root@master ~]# lsmod | grep -e ip_vs -e nf_conntrack_ipv4</span><br></pre></td></tr></table></figure>

<p><img src="/D:/Learning\PersonalBlog\CodeChenBlog\source_posts\k8s-base\Snipaste_2022-04-12_16-41-43.jpg"></p>
<p>9„ÄÅÈáçÂêØÊúçÂä°Âô®</p>
<p>‰∏äÈù¢Ê≠•È™§ÂÆåÊàê‰πãÂêéÔºåÈúÄË¶ÅÈáçÊñ∞ÂêØÂä®LinuxÁ≥ªÁªü</p>
<h3 id="ÂÆâË£Ödocker"><a href="#ÂÆâË£Ödocker" class="headerlink" title="ÂÆâË£Ödocker"></a>ÂÆâË£Ödocker</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1 ÂàáÊç¢ÈïúÂÉèÊ∫ê</span></span><br><span class="line">[root@master ~]# wget https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo -O /etc/yum.repos.d/docker-ce.repo</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2 Êü•ÁúãÂΩìÂâçÈïúÂÉèÊ∫ê‰∏≠ÊîØÊåÅÁöÑdockerÁâàÊú¨</span></span><br><span class="line">[root@master ~]# yum list docker-ce --showduplicates</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3 ÂÆâË£ÖÁâπÂÆöÁâàÊú¨ÁöÑdocker-ce</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÂøÖÈ°ªÊåáÂÆö--<span class="built_in">setopt</span>=obsoletes=0ÔºåÂê¶Âàôyum‰ºöËá™Âä®ÂÆâË£ÖÊõ¥È´òÁâàÊú¨</span></span><br><span class="line">[root@master ~]# yum install --setopt=obsoletes=0 docker-ce-18.06.3.ce-3.el7 -y</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4 Ê∑ªÂä†‰∏Ä‰∏™ÈÖçÁΩÆÊñá‰ª∂</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> DockerÂú®ÈªòËÆ§ÊÉÖÂÜµ‰∏ã‰ΩøÁî®ÁöÑCgroup Driver‰∏∫cgroupfsÔºåËÄåkubernetesÊé®Ëçê‰ΩøÁî®systemdÊù•‰ª£Êõøcgroupfs</span></span><br><span class="line">[root@master ~]# mkdir /etc/docker</span><br><span class="line">[root@master ~]# cat &lt;&lt;EOF &gt; /etc/docker/daemon.json</span><br><span class="line">&#123;</span><br><span class="line">	&quot;exec-opts&quot;: [&quot;native.cgroupdriver=systemd&quot;],</span><br><span class="line">	&quot;registry-mirrors&quot;: [&quot;https://kn0t2bca.mirror.aliyuncs.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 5 ÂêØÂä®docker</span></span><br><span class="line">[root@master ~]# systemctl restart docker</span><br><span class="line">[root@master ~]# systemctl enable docker</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 6 Ê£ÄÊü•dockerÁä∂ÊÄÅÂíåÁâàÊú¨</span></span><br><span class="line">[root@master ~]# docker version</span><br></pre></td></tr></table></figure>



<h3 id="ÂÆâË£ÖkubernetesÁªÑ‰ª∂"><a href="#ÂÆâË£ÖkubernetesÁªÑ‰ª∂" class="headerlink" title="ÂÆâË£ÖkubernetesÁªÑ‰ª∂"></a>ÂÆâË£ÖkubernetesÁªÑ‰ª∂</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Áî±‰∫ékubernetesÁöÑÈïúÂÉèÊ∫êÂú®ÂõΩÂ§ñÔºåÈÄüÂ∫¶ÊØîËæÉÊÖ¢ÔºåËøôÈáåÂàáÊç¢ÊàêÂõΩÂÜÖÁöÑÈïúÂÉèÊ∫ê</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÁºñËæë/etc/yum.repos.d/kubernetes.repoÔºåÊ∑ªÂä†‰∏ãÈù¢ÁöÑÈÖçÁΩÆ</span></span><br><span class="line">[kubernetes]</span><br><span class="line">name=Kubernetes</span><br><span class="line">baseurl=http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">repo_gpgcheck=0</span><br><span class="line">gpgkey=http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg</span><br><span class="line">	   http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span><br><span class="line">	   </span><br><span class="line"><span class="meta">#</span><span class="bash">ÂÆâË£Ökubeadm„ÄÅkubeletÂíåkubectl</span></span><br><span class="line">[root@master ~]# yum install --setopt=obsoletes=0 kubeadm-1.17.4-0 kubelet-1.17.4-0 kubectl-1.17.4-0 -y</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">ÈÖçÁΩÆkubeletÁöÑcgroup</span></span><br><span class="line"><span class="meta">#</span><span class="bash">ÁºñËæë/etc/sysconfig/kubeletÔºåÊ∑ªÂä†‰∏ãÈù¢ÁöÑÈÖçÁΩÆ</span></span><br><span class="line">KUBELET_CGROUP_ARGS=&quot;--cgroup-driver=systemd&quot;</span><br><span class="line">KUBE_PROXY_MODE=&quot;ipvs&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">4ËÆæÁΩÆkubeletÂºÄÊú∫Ëá™ÂêØ</span></span><br><span class="line">[root@master ~]# systemctl enable kubelet</span><br></pre></td></tr></table></figure>



<h3 id="ÂáÜÂ§áÈõÜÁæ§ÈïúÂÉè"><a href="#ÂáÜÂ§áÈõÜÁæ§ÈïúÂÉè" class="headerlink" title="ÂáÜÂ§áÈõÜÁæ§ÈïúÂÉè"></a>ÂáÜÂ§áÈõÜÁæ§ÈïúÂÉè</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Âú®ÂÆâË£ÖkubernetesÈõÜÁæ§‰πãÂâçÔºåÂøÖÈ°ªË¶ÅÊèêÂâçÂáÜÂ§áÂ•ΩÈõÜÁæ§ÈúÄË¶ÅÁöÑÈïúÂÉèÔºåÊâÄÈúÄÈïúÂÉèÂèØ‰ª•ÈÄöËøá‰∏ãÈù¢ÂëΩ‰ª§Êü•Áúã</span></span><br><span class="line">[root@master ~]# kubeadm config images list</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÂÆö‰πâÈïúÂÉèÔºåÁõ¥Êé•ÂëΩ‰ª§Ë°åÊâßË°å</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Ê≠§ÈïúÂÉèÂú®kubernetesÁöÑ‰ªìÂ∫ì‰∏≠,Áî±‰∫éÁΩëÁªúÂéüÂõ†,Êó†Ê≥ïËøûÊé•Ôºå‰∏ãÈù¢Êèê‰æõ‰∫Ü‰∏ÄÁßçÊõø‰ª£ÊñπÊ°à</span></span><br><span class="line">images=(</span><br><span class="line">	kube-apiserver:v1.17.4</span><br><span class="line">	kube-controller-manager:v1.17.4</span><br><span class="line">	kube-scheduler:v1.17.4</span><br><span class="line">	kube-proxy:v1.17.4</span><br><span class="line">	pause:3.1</span><br><span class="line">	etcd:3.4.3-0</span><br><span class="line">	coredns:1.6.5</span><br><span class="line">)</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ‰∏ãËΩΩÈïúÂÉèÔºåÁõ¥Êé•ÂëΩ‰ª§Ë°åÊâßË°å</span></span><br><span class="line">for imageName in $&#123;images[@]&#125; ; do</span><br><span class="line">	docker pull registry.cn-hangzhou.aliyuncs.com/google_containers/$imageName</span><br><span class="line">	docker tag registry.cn-hangzhou.aliyuncs.com/google_containers/$imageName</span><br><span class="line">k8s.gcr.io/$imageName</span><br><span class="line">	docker rmi registry.cn-hangzhou.aliyuncs.com/google_containers/$imageName</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>‰ª•‰∏äÊñπÊ≥ïÊàëÂÆâË£ÖÊúâÈóÆÈ¢òÔºåÊàë‰ΩøÁî®‰ª•‰∏ãËÑöÊú¨ÊñπÊ≥ïÊ≠£Á°Æ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">vim get_images.sh</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">set -e</span><br><span class="line">KUBE_VERSION=v1.17.4</span><br><span class="line">KUBE_PAUSE_VERSION=3.1</span><br><span class="line">ETCD_VERSION=3.4.3-0</span><br><span class="line">CORE_DNS_VERSION=1.6.5</span><br><span class="line"></span><br><span class="line">GCR_URL=k8s.gcr.io</span><br><span class="line">ALIYUN_URL=registry.cn-hangzhou.aliyuncs.com/google_containers</span><br><span class="line"></span><br><span class="line">images=(kube-proxy:$&#123;KUBE_VERSION&#125;</span><br><span class="line">kube-scheduler:$&#123;KUBE_VERSION&#125;</span><br><span class="line">kube-controller-manager:$&#123;KUBE_VERSION&#125;</span><br><span class="line">kube-apiserver:$&#123;KUBE_VERSION&#125;</span><br><span class="line">pause:$&#123;KUBE_PAUSE_VERSION&#125;</span><br><span class="line">etcd:$&#123;ETCD_VERSION&#125;</span><br><span class="line">coredns:$&#123;CORE_DNS_VERSION&#125;)</span><br><span class="line"></span><br><span class="line">for imageName in $&#123;images[@]&#125; ; do</span><br><span class="line">  docker pull $ALIYUN_URL/$imageName</span><br><span class="line">  docker tag  $ALIYUN_URL/$imageName $GCR_URL/$imageName</span><br><span class="line">  docker rmi $ALIYUN_URL/$imageName</span><br><span class="line">done</span><br></pre></td></tr></table></figure>



<h3 id="ÈõÜÁæ§ÂàùÂßãÂåñ"><a href="#ÈõÜÁæ§ÂàùÂßãÂåñ" class="headerlink" title="ÈõÜÁæ§ÂàùÂßãÂåñ"></a>ÈõÜÁæ§ÂàùÂßãÂåñ</h3><p>‰∏ãÈù¢ÂºÄÂßãÂØπÈõÜÁæ§ËøõË°åÂàùÂßãÂåñÔºåÂπ∂Â∞ÜnodeËäÇÁÇπÂä†ÂÖ•Âà∞ÈõÜÁæ§‰∏≠</p>
<blockquote>
<p>‰∏ãÈù¢Êìç‰ΩúÂè™ÈúÄË¶ÅÂú®masterËäÇÁÇπ‰∏äÊâßË°åÂç≥ÂèØ</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ÂàõÂª∫ÈõÜÁæ§</span></span><br><span class="line">[root@master ~]# kubeadm init \</span><br><span class="line">	--kubernetes-version=v1.17.4 \</span><br><span class="line">	--pod-network-cidr=10.244.0.0/16 \</span><br><span class="line">	--service-cidr=10.96.0.0/12 \</span><br><span class="line">	--apiserver-advertise-address=192.168.59.100</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÂàõÂª∫ÂøÖË¶ÅÊñá‰ª∂</span></span><br><span class="line">[root@master ~]# mkdir -p $HOME/ .kube</span><br><span class="line">[root@master ~]# sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span><br><span class="line">[root@master ~]# sudo chown $(id -u):$(id -g) $HOME/.kube/config</span><br></pre></td></tr></table></figure>

<p><img src="/D:/Learning\PersonalBlog\CodeChenBlog\source_posts\k8s-base\Snipaste_2022-04-13_17-05-09.jpg"></p>
<p>ÊåâÁÖßÊèêÁ§∫ÊâßË°å</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p $HOME/.kube</span><br><span class="line">sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span><br><span class="line">sudo chown $(id -u):$(id -g) $HOME/.kube/config</span><br></pre></td></tr></table></figure>



<p>Ë¶ÅÊÉ≥nodeÂä†ÂÖ•Âà∞master‰∏≠ÔºåÂè™ÈúÄÂú®node1Âíånode2‰∏≠ÊâßË°å‰∏Ä‰∏ãÂëΩ‰ª§</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubeadm join 192.168.59.100:6443 --token x7x7ro.kqkvdzicqx8ddc33 \</span><br><span class="line">    --discovery-token-ca-cert-hash sha256:ce7fece5010f0bd0e11cf163caaeae1ede57daff9486db7f3a16bf3bafe6e52d</span><br></pre></td></tr></table></figure>



<p>ËøôÊó∂ÔºåÂú®master‰∏≠Â∞±ÂèØ‰ª•ÁúãÂà∞ËäÇÁÇπ‰ø°ÊÅØ‰∫Ü</p>
<figure class="highlight plaintext"><figcaption><span>~]# kubectl get nodes</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl get nodes</span><br><span class="line">NAME     STATUS     ROLES    AGE     VERSION</span><br><span class="line">master   NotReady   master   9m11s   v1.17.4</span><br><span class="line">node1    NotReady   &lt;none&gt;   20s     v1.17.4</span><br><span class="line">node2    NotReady   &lt;none&gt;   17s     v1.17.4</span><br></pre></td></tr></table></figure>

<p>‰ΩÜÊòØÊ≠§Â§ÑÁöÑSTATUSÊòØNotReadyÔºåÂõ†‰∏∫ÁΩëÁªúËøòÊ≤°ÊúâÊê≠Âª∫</p>
<h3 id="ÂÆâË£ÖÁΩëÁªúÊèí‰ª∂"><a href="#ÂÆâË£ÖÁΩëÁªúÊèí‰ª∂" class="headerlink" title="ÂÆâË£ÖÁΩëÁªúÊèí‰ª∂"></a>ÂÆâË£ÖÁΩëÁªúÊèí‰ª∂</h3><p>kubernetesÊîØÊåÅÂ§öÁßçÁΩëÁªúÊèí‰ª∂ÔºåÊØîÂ¶Çflannel„ÄÅcalico„ÄÅcanalÁ≠âÁ≠âÔºå‰ªªÈÄâ‰∏ÄÁßç‰ΩøÁî®Âç≥ÂèØÔºåÊú¨Ê¨°ÈÄâÊã©flannel</p>
<blockquote>
<p>‰∏ãÈù¢Êìç‰Ωú‰æùÊóßÂè™Âú®masterËäÇÁÇπÊâßË°åÂç≥ÂèØÔºåÊèí‰ª∂‰ΩøÁî®ÁöÑÊòØDaemonSetÁöÑÊéßÂà∂Âô®ÔºåÂÆÉ‰ºöÂú®ÊØè‰∏™ËäÇÁÇπ‰∏äÈÉΩËøêË°å</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">Ëé∑ÂèñfannelÁöÑÈÖçÁΩÆÊñá‰ª∂</span></span><br><span class="line">[root@master ~] # wget https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">‰øÆÊîπÊñá‰ª∂‰∏≠quay.io‰ªìÂ∫ì‰∏∫quay-mirror.qiniu.com</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">‰ΩøÁî®ÈÖçÁΩÆÊñá‰ª∂ÂêØÂä®fannel</span></span><br><span class="line">[root@master ~]# kubectl apply -f kube-flannel.yml</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">Á®çÁ≠âÁâáÂàª,ÂÜçÊ¨°Êü•ÁúãÈõÜÁæ§ËäÇÁÇπÁöÑÁä∂ÊÄÅ</span></span><br><span class="line">[root@master ~]# kubectl get nodes</span><br><span class="line">NAME     STATUS   ROLES    AGE    VERSION</span><br><span class="line">master   Ready    master   128m   v1.17.4</span><br><span class="line">node1    Ready    &lt;none&gt;   119m   v1.17.4</span><br><span class="line">node2    Ready    &lt;none&gt;   119m   v1.17.4</span><br></pre></td></tr></table></figure>

<p>Ëá≥Ê≠§kubernetesÁöÑÈõÜÁæ§ÁéØÂ¢ÉÊê≠Âª∫ÂÆåÊàê</p>
<h2 id="ÊúçÂä°ÈÉ®ÁΩ≤"><a href="#ÊúçÂä°ÈÉ®ÁΩ≤" class="headerlink" title="ÊúçÂä°ÈÉ®ÁΩ≤"></a>ÊúçÂä°ÈÉ®ÁΩ≤</h2><p>Êé•‰∏ãÊù•Âú®kubernetesÈõÜÁæ§‰∏≠ÈÉ®ÁΩ≤‰∏Ä‰∏™NginxÁ®ãÂ∫èÔºåÊµãËØï‰∏ãÈõÜÁæ§ÊòØÂê¶Âú®Ê≠£Â∏∏Â∑•‰Ωú„ÄÇ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">ÈÉ®ÁΩ≤nginx</span></span><br><span class="line">[root@master ~]# kubectl create deployment nginx --image=nginx:1.14-alpine</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">Êö¥Èú≤Á´ØÂè£</span></span><br><span class="line">[root@master ~]# kubectl expose deployment nginx --port=80 --type=NodePort</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">Êü•ÁúãÊúçÂä°Áä∂ÊÄÅ</span></span><br><span class="line">[root@master ~]# kubectl get pods,svc</span><br><span class="line">NAME                         READY   STATUS    RESTARTS   AGE</span><br><span class="line">pod/nginx-6867cdf567-x5wjz   1/1     Running   0          57s</span><br><span class="line"></span><br><span class="line">NAME                 TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)        AGE</span><br><span class="line">service/kubernetes   ClusterIP   10.96.0.1        &lt;none&gt;        443/TCP        175m</span><br><span class="line">service/nginx        NodePort    10.107.119.189   &lt;none&gt;        80:32160/TCP   19s</span><br></pre></td></tr></table></figure>

<p>Ê≠§Êó∂ËÆøÈóÆ192.168.59.100:32160Â∞±ÂèØ‰ª•ËÆøÈóÆNginx‰∫Ü</p>
<h1 id="ËµÑÊ∫êÁÆ°ÁêÜ"><a href="#ËµÑÊ∫êÁÆ°ÁêÜ" class="headerlink" title="ËµÑÊ∫êÁÆ°ÁêÜ"></a>ËµÑÊ∫êÁÆ°ÁêÜ</h1><p>Êú¨Á´†ËäÇ‰∏ªË¶Å‰ªãÁªçYAMLËØ≠Ê≥ïÂíåkubernetesÁöÑËµÑÊ∫êÁÆ°ÁêÜÊñπÂºè</p>
<h2 id="ËµÑÊ∫êÁÆ°ÁêÜ‰ªãÁªç"><a href="#ËµÑÊ∫êÁÆ°ÁêÜ‰ªãÁªç" class="headerlink" title="ËµÑÊ∫êÁÆ°ÁêÜ‰ªãÁªç"></a>ËµÑÊ∫êÁÆ°ÁêÜ‰ªãÁªç</h2><p>Âú®kubernetes‰∏≠ÔºåÊâÄÊúâÁöÑÂÜÖÂÆπÈÉΩÊäΩË±°‰∏∫ËµÑÊ∫êÔºåÁî®Êà∑ÈúÄË¶ÅÈÄöËøáÊìç‰ΩúËµÑÊ∫êÊù•ÁÆ°ÁêÜkubernetes</p>
<blockquote>
<p>kubernetesÁöÑÊú¨Ë¥®‰∏äÂ∞±ÊòØ‰∏Ä‰∏™ÈõÜÁæ§Á≥ªÁªüÔºåÁî®Êà∑ÂèØ‰ª•Âú®ÈõÜÁæ§‰∏≠ÈÉ®ÁΩ≤ÂêÑÁßçÊúçÂä°ÔºåÊâÄË∞ìÁöÑÈÉ®ÁΩ≤ÊúçÂä°ÔºåÂÖ∂ÂÆûÂ∞±ÊòØÂú®kubernetesÈõÜÁæ§‰∏≠ËøêË°å‰∏Ä‰∏™‰∏™ÁöÑÂÆπÂô®ÔºåÂπ∂Â∞ÜÊåáÂÆöÁöÑÁ®ãÂ∫èË∑ëÂú®ÂÆπÂô®‰∏≠„ÄÇ</p>
<p>kubernetesÁöÑÊúÄÂ∞èÁÆ°ÁêÜÂçïÂÖÉÊòØpodËÄå‰∏çÊòØÂÆπÂô®ÔºåÊâÄ‰ª•Âè™ËÉΩÂ∞ÜÂÆπÂô®ÊîæÂú®<code>pod</code>‰∏≠ÔºåËÄåkubernetes‰∏ÄËà¨‰πü‰∏ç‰ºöÁõ¥Êé•ÁÆ°ÁêÜpodÔºåËÄåÊòØÈÄöËøá<code>podÁÆ°ÁêÜÂô®</code>Êù•ÁÆ°ÁêÜpodÁöÑ„ÄÇ</p>
<p>podÂèØ‰ª•Êèê‰æõÊúçÂä°‰πãÂêéÔºåÂ∞±Ë¶ÅËÄÉËôëÂ¶Ç‰ΩïËÆøÈóÆpod‰∏≠ÊúçÂä°ÔºåkubernetesÊèê‰æõ‰∫ÜserviceËµÑÊ∫êÂÆûÁé∞Ëøô‰∏™ÂäüËÉΩ„ÄÇ</p>
<p>ÂΩìÁÑ∂ÔºåÂ¶ÇÊûúpod‰∏≠Á®ãÂ∫èÁöÑÊï∞ÊçÆÈúÄË¶ÅÊåÅ‰πÖÂåñÔºåkubernetesËøòÊèê‰æõÂêÑÁßçÂ≠òÂÇ®</p>
</blockquote>
<p><img src="/D:/Learning\PersonalBlog\CodeChenBlog\source_posts\k8s-base\Snipaste_2022-04-13_20-14-41.jpg"></p>
<blockquote>
<p>Â≠¶‰π†kubernetesÁöÑÊ†∏ÂøÉÔºåÂ∞±ÊòØÂ≠¶‰π†Â¶Ç‰ΩïÂØπÈõÜÁæ§‰∏äÁöÑPod„ÄÅPodÊéßÂà∂Âô®„ÄÅService„ÄÅÂ≠òÂÇ®Á≠âÂêÑÁßçËµÑÊ∫êËøõË°åÊìç‰Ωú</p>
</blockquote>
<h2 id="YAMLËØ≠Ë®Ä‰ªãÁªç"><a href="#YAMLËØ≠Ë®Ä‰ªãÁªç" class="headerlink" title="YAMLËØ≠Ë®Ä‰ªãÁªç"></a>YAMLËØ≠Ë®Ä‰ªãÁªç</h2><p>YAMLÊòØ‰∏Ä‰∏™Á±ª‰ººXML„ÄÅJSONÁöÑÊ†áËÆ∞ÊÄßËØ≠Ë®Ä„ÄÇÂÆÉÂº∫Ë∞É‰ª•Êï∞ÊçÆ‰∏∫‰∏≠ÂøÉÔºåÂπ∂‰∏çÊòØ‰ª•Ê†áËØÜËØ≠Ë®Ä‰∏∫ÈáçÁÇπ„ÄÇÂõ†ËÄåYAMLÊú¨Ë∫´ÁöÑÂÆö‰πâÊØîËæÉÁÆÄÂçïÔºåÂè∑Áß∞‚Äú‰∏ÄÁßç‰∫∫ÊÄßÂåñÁöÑÊï∞ÊçÆÊ†ºÂºèËØ≠Ë®Ä‚Äù„ÄÇ</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">person</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">age</span>&gt;</span>15<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">address</span>&gt;</span>Chengdu<span class="tag">&lt;/<span class="name">address</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">person</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">person:</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">15</span></span><br><span class="line">  <span class="attr">address:</span> <span class="string">Chengdu</span></span><br></pre></td></tr></table></figure>



<p>YAMLÁöÑËØ≠Ë®ÄÊØîËæÉÁÆÄÂçïÔºå‰∏ªË¶ÅÁî±‰∏ãÈù¢Âá†‰∏™Ôºö</p>
<ul>
<li>Â§ßÂ∞èÂÜôÊïèÊÑü</li>
<li>‰ΩøÁî®Áº©ËøõË°®Á§∫Â±ÇÁ∫ßÂÖ≥Á≥ª</li>
<li>Áº©Ëøõ‰∏çÂÖÅËÆ∏‰ΩøÁî®tabÔºåÂè™ÂÖÅËÆ∏Á©∫Ê†ºÔºà‰ΩéÁâàÊú¨ÈôêÂà∂Ôºâ</li>
<li>Áº©ËøõÁöÑÁ©∫Ê†ºÊï∞‰∏çÈáçË¶ÅÔºåÂè™Ë¶ÅÁõ∏ÂêåÂ±ÇÁ∫ßÁöÑÂÖÉÁ¥†Â∑¶ÂØπÈΩêÂç≥ÂèØ</li>
<li>‚Äò#‚ÄôË°®Á§∫Ê≥®Èáä</li>
</ul>
<p>YAMLÊîØÊåÅ‰ª•‰∏ãÂá†ÁßçÊï∞ÊçÆÁ±ªÂûãÔºö</p>
<ul>
<li>Á∫ØÈáèÔºöÂçï‰∏™ÁöÑ„ÄÅ‰∏çÂèØÂÜçÂàÜÁöÑÂÄº</li>
<li>ÂØπË±°ÔºöÈîÆÂÄºÂØπÁöÑÈõÜÂêàÔºåÂèàÁß∞‰∏∫Êò†Â∞ÑÔºàmappingÔºâ/ ÂìàÂ∏åÔºàhashÔºâ / Â≠óÂÖ∏ÔºàdictionaryÔºâ</li>
<li>Êï∞ÁªÑÔºö‰∏ÄÁªÑÊåâÊ¨°Â∫èÊéíÂàóÁöÑÂÄºÔºåÂèàÁß∞‰∏∫Â∫èÂàóÔºàsequenceÔºâ/ ÂàóË°®ÔºàlistÔºâ</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Á∫ØÈáèÔºåÂ∞±ÊòØÊåáÁöÑ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂÄºÔºåÂ≠óÁ¨¶‰∏≤„ÄÅÂ∏ÉÂ∞îÂÄº„ÄÅÊï¥Êï∞„ÄÅÊµÆÁÇπÊï∞„ÄÅNull„ÄÅÊó∂Èó¥„ÄÅÊó•Êúü</span></span><br><span class="line"><span class="comment"># 1 Â∏ÉÂ∞îÁ±ªÂûã</span></span><br><span class="line"><span class="attr">c1:</span> <span class="literal">true</span> <span class="string">(ÊàñËÄÖTrue)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2 Êï¥Âûã</span></span><br><span class="line"><span class="attr">c2:</span> <span class="number">123</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3 ÊµÆÁÇπÂûã</span></span><br><span class="line"><span class="attr">c3:</span> <span class="number">3.14</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4 nullÁ±ªÂûã</span></span><br><span class="line"><span class="attr">c4:</span> <span class="string">~</span>  <span class="comment"># ‰ΩøÁî®~Ë°®Á§∫null</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5 Êó•ÊúüÁ±ªÂûã</span></span><br><span class="line"><span class="attr">c5:</span> <span class="number">2022-01-01</span>  <span class="comment"># Êó•ÊúüÂøÖÈ°ª‰ΩøÁî®ISO 8601Ê†ºÂºèÔºåÂç≥yyyy-MM-dd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 6 Êó∂Èó¥Á±ªÂûã</span></span><br><span class="line"><span class="attr">c6:</span> <span class="number">2022-01-01T00:00:00+08:00</span>  <span class="comment"># Êó∂Èó¥‰ΩøÁî®ISO 8601Ê†ºÂºèÔºåÊó∂Èó¥ÂíåÊó•Êúü‰πãÈó¥‰ΩøÁî®TËøûÊé•ÔºåÊúÄÂêé‰ΩøÁî®+‰ª£Ë°®Êó∂Âå∫</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 7 Â≠óÁ¨¶‰∏≤Á±ªÂûã</span></span><br><span class="line"><span class="attr">c7:</span> <span class="string">codeChen</span>  <span class="comment"># ÁÆÄÂçïÂÜôÊ≥ïÔºåÁõ¥Êé•ÂÜôÔºåÂ¶ÇÊûúÂ≠óÁ¨¶‰∏≤‰∏≠Èó¥ÊúâÁâπÊÆäÂ≠óÁ¨¶ÔºåÂøÖÈ°ª‰ΩøÁî®ÂèåÂºïÂè∑ÊàñËÄÖÂçïÂºïÂè∑ÂåÖË£π</span></span><br><span class="line"><span class="attr">c8:</span> <span class="string">line1</span></span><br><span class="line">	<span class="string">line2</span>  <span class="comment"># Â¶ÇÊûúÂ≠óÁ¨¶‰∏≤ËøáÂ§öÁöÑÊÉÖÂÜµÂèØ‰ª•ÊãÜÊàêÂ§öË°åÔºåÊØè‰∏ÄË°å‰ºöËΩ¨ÂåñÊàê‰∏Ä‰∏™Á©∫Ê†º</span></span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ÂØπË±°</span></span><br><span class="line"><span class="comment"># ÂΩ¢Âºè‰∏ÄÔºàÊé®ËçêÔºâ</span></span><br><span class="line"><span class="attr">person:</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">15</span></span><br><span class="line">  <span class="attr">address:</span> <span class="string">Chengdu</span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># ÂΩ¢Âºè‰∫åÔºà‰∫ÜËß£Ôºâ</span></span><br><span class="line"><span class="attr">person:</span> &#123;<span class="attr">age:</span> <span class="number">15</span>, <span class="attr">address:</span> <span class="string">Chengdu</span>&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Êï∞ÁªÑ</span></span><br><span class="line"><span class="comment"># ÂΩ¢Âºè‰∏ÄÔºàÊé®ËçêÔºâÔºö</span></span><br><span class="line"><span class="attr">address:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ÊàêÈÉΩ</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ÈïøÊ≤ô</span></span><br><span class="line"><span class="comment"># ÂΩ¢Âºè‰∫åÔºà‰∫ÜËß£Ôºâ</span></span><br><span class="line"><span class="attr">address:</span> [<span class="string">È°∫‰πâÔºåÊòåÂπ≥</span>]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Ê≥®ÊÑèÔºö</p>
<p>1 ‰π¶ÂÜôYAMLÂàáËÆ∞: ÂêéÈù¢Ë¶ÅÂä†‰∏Ä‰∏™Á©∫Ê†º</p>
<p>2 Â¶ÇÊûúÈúÄË¶ÅÂ∞ÜÂ§öÊÆµYAMLÈÖçÁΩÆÊîæÂú®‰∏Ä‰∏™Êñá‰ª∂‰∏≠Ôºå‰∏≠Èó¥Ë¶Å‰ΩøÁî®‚ÄîÂàÜÂâ≤</p>
</blockquote>
<h2 id="ËµÑÊ∫êÁÆ°ÁêÜÊñπÂºè"><a href="#ËµÑÊ∫êÁÆ°ÁêÜÊñπÂºè" class="headerlink" title="ËµÑÊ∫êÁÆ°ÁêÜÊñπÂºè"></a>ËµÑÊ∫êÁÆ°ÁêÜÊñπÂºè</h2><ul>
<li>ÂëΩ‰ª§ÂºèÂØπË±°ÁÆ°ÁêÜÔºöÁõ¥Êé•‰ΩøÁî®ÂëΩ‰ª§ÂéªÊìç‰ΩúkubernetesËµÑÊ∫ê</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl run nginx-pod --image=nginx:1.17.1 --port=80</span><br></pre></td></tr></table></figure>

<ul>
<li>ÂëΩ‰ª§ÂºèÂØπË±°ÈÖçÁΩÆÔºöÈÄöËøáÂëΩ‰ª§ÈÖçÁΩÆÂíåÈÖçÁΩÆÊñá‰ª∂ÂéªÊìç‰ΩúkubernetesËµÑÊ∫ê</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl create/patch -f nginx-pod.yaml</span><br></pre></td></tr></table></figure>

<ul>
<li>Â£∞ÊòéÂºèÂØπË±°ÈÖçÁΩÆÔºöÈÄöËøáapplyÂëΩ‰ª§ÂíåÈÖçÁΩÆÊñá‰ª∂ÂéªÊìç‰ΩúkubernetesËµÑÊ∫ê</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f nginx-pod.yaml</span><br></pre></td></tr></table></figure>



<table>
<thead>
<tr>
<th>Á±ªÂûã</th>
<th>Êìç‰ΩúÂØπË±°</th>
<th>ÈÄÇÁî®ÁéØÂ¢É</th>
<th>‰ºòÁÇπ</th>
<th>Áº∫ÁÇπ</th>
</tr>
</thead>
<tbody><tr>
<td>ÂëΩ‰ª§ÂºèÂØπË±°ÁÆ°ÁêÜ</td>
<td>ÂØπË±°</td>
<td>ÊµãËØï</td>
<td>ÁÆÄÂçï</td>
<td>Âè™ËÉΩÊìç‰ΩúÊ¥ªÂä®ÂØπË±°ÔºåÊó†Ê≥ïÂÆ°ËÆ°„ÄÅË∑üË∏™</td>
</tr>
<tr>
<td>ÂëΩ‰ª§ÂºèÂØπË±°ÈÖçÁΩÆ</td>
<td>Êñá‰ª∂</td>
<td>ÂºÄÂèë</td>
<td>ÂèØ‰ª•ÂÆ°ËÆ°„ÄÅË∑üË∏™</td>
<td>È°πÁõÆÂ§ßÊó∂ÔºåÈÖçÁΩÆÊñá‰ª∂Â§öÔºåÊìç‰ΩúÈ∫ªÁÉ¶</td>
</tr>
<tr>
<td>Â£∞ÊòéÂºèÂØπË±°ÈÖçÁΩÆ</td>
<td>ÁõÆÂΩï</td>
<td>ÂºÄÂèë</td>
<td>ÊîØÊåÅÁõÆÂΩïÊìç‰Ωú</td>
<td>ÊÑèÂ§ñÊÉÖÂÜµ‰∏ãÈöæ‰ª•Ë∞ÉËØï</td>
</tr>
</tbody></table>
<h3 id="ÂëΩ‰ª§ÂºèÂØπË±°ÁÆ°ÁêÜ"><a href="#ÂëΩ‰ª§ÂºèÂØπË±°ÁÆ°ÁêÜ" class="headerlink" title="ÂëΩ‰ª§ÂºèÂØπË±°ÁÆ°ÁêÜ"></a>ÂëΩ‰ª§ÂºèÂØπË±°ÁÆ°ÁêÜ</h3><p><strong>kubectlÂëΩ‰ª§</strong></p>
<p>kubectlÊòØkubernetesÈõÜÁæ§ÁöÑÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑ÔºåÈÄöËøáÂÆ¶ËÉΩÂ§üÂØπÈõÜÁæ§Êú¨Ë∫´ËøõË°åÁÆ°ÁêÜÔºåÂπ∂ËÉΩÂ§üÂú®ÈõÜÁæ§‰∏äËøõË°åÂÆπÂô®ÂåñÂ∫îÁî®ÁöÑÂÆâË£ÖÈÉ®ÁΩ≤„ÄÇkubectlÂëΩ‰ª§ÁöÑËØ≠Ê≥ïÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl [command] [type] [name] [flags]</span><br></pre></td></tr></table></figure>

<p>commandÔºöÊåáÂÆöË¶ÅÂØπËµÑÊ∫êÊâßË°åÁöÑÊìç‰ΩúÔºå‰æãÂ¶Çcreate„ÄÅget„ÄÅdelete</p>
<p>typeÔºöÊåáÂÆöËµÑÊ∫êÁ±ªÂûãÔºåÊØîÂ¶Çdeployment„ÄÅpod„ÄÅservice</p>
<p>nameÔºöÊåáÂÆöËµÑÊ∫êÁöÑÂêçÁß∞ÔºåÂêçÁß∞Â§ßÂ∞èÂÜôÊïèÊÑü</p>
<p>flagsÔºöÊåáÂÆöÈ¢ùÂ§ñÁöÑÂèØÈÄâÂèÇÊï∞</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãÊâÄÊúâpod</span></span><br><span class="line">kubectl get pod</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãÊüê‰∏™pod</span></span><br><span class="line">kubectl get pod pod_name </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãÊüê‰∏™podÔºå‰ª•yamlÊ†ºÂºèÂ±ïÁ§∫ÁªìÊûú</span></span><br><span class="line">kubectl get pod pod_name -o yaml</span><br></pre></td></tr></table></figure>



<p><strong>ËµÑÊ∫êÁ±ªÂûã</strong></p>
<p>kubernetes‰∏≠ÊâÄÊúâÁöÑÂÜÖÂÆπÈÉΩÊäΩË±°‰∏∫ËµÑÊ∫êÔºåÂèØ‰ª•ÈÄöËøá‰∏ãÈù¢ÁöÑÂëΩ‰ª§ËøõË°åÊü•ÁúãÔºö</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl api-resources</span><br></pre></td></tr></table></figure>

<p>ÁªèÂ∏∏‰ΩøÁî®ÁöÑËµÑÊ∫êÊúâÔºö</p>
<table>
<thead>
<tr>
<th>ËµÑÊ∫êÂàÜÁ±ª</th>
<th>ËµÑÊ∫êÂêçÁß∞</th>
<th>Áº©ÂÜô</th>
<th>ËµÑÊ∫ê‰ΩúÁî®</th>
</tr>
</thead>
<tbody><tr>
<td>ÈõÜÁæ§Á∫ßÂà´ËµÑÊ∫ê</td>
<td>nodes</td>
<td>no</td>
<td>ÈõÜÁæ§ÁªÑÊàêÈÉ®ÂàÜ</td>
</tr>
<tr>
<td></td>
<td>namespaces</td>
<td>ns</td>
<td>ÈöîÁ¶ªPod</td>
</tr>
<tr>
<td>podËµÑÊ∫ê</td>
<td>pods</td>
<td>po</td>
<td>Ë£ÖËΩΩÂÆπÂô®</td>
</tr>
<tr>
<td>podËµÑÊ∫êÊéßÂà∂Âô®</td>
<td>replicationcontrollers</td>
<td>rc</td>
<td>ÊéßÂà∂podËµÑÊ∫ê</td>
</tr>
<tr>
<td></td>
<td>replicasets</td>
<td>rs</td>
<td>ÊéßÂà∂podËµÑÊ∫ê</td>
</tr>
<tr>
<td></td>
<td>deployments</td>
<td>deploy</td>
<td>ÊéßÂà∂podËµÑÊ∫ê</td>
</tr>
<tr>
<td></td>
<td>daemonsets</td>
<td>ds</td>
<td>ÊéßÂà∂podËµÑÊ∫ê</td>
</tr>
<tr>
<td></td>
<td>jobs</td>
<td></td>
<td>ÊéßÂà∂podËµÑÊ∫ê</td>
</tr>
<tr>
<td></td>
<td>cronjobs</td>
<td>cj</td>
<td>ÊéßÂà∂podËµÑÊ∫ê</td>
</tr>
<tr>
<td></td>
<td>horizontalpodautoscalers</td>
<td>hpa</td>
<td>ÊéßÂà∂podËµÑÊ∫ê</td>
</tr>
<tr>
<td></td>
<td>statefulsets</td>
<td>sts</td>
<td>ÊéßÂà∂podËµÑÊ∫ê</td>
</tr>
<tr>
<td>ÊúçÂä°ÂèëÁé∞ËµÑÊ∫ê</td>
<td>services</td>
<td>svc</td>
<td>Áªü‰∏ÄpodÂØπÂ§ñÊé•Âè£</td>
</tr>
<tr>
<td></td>
<td>ingress</td>
<td>ing</td>
<td>Áªü‰∏ÄpodÂØπÂ§ñÊé•Âè£</td>
</tr>
<tr>
<td>Â≠òÂÇ®ËµÑÊ∫ê</td>
<td>volumeattachments</td>
<td></td>
<td>Â≠òÂÇ®</td>
</tr>
<tr>
<td></td>
<td>persistentvolumes</td>
<td>pv</td>
<td>Â≠òÂÇ®</td>
</tr>
<tr>
<td></td>
<td>persistentvolumeclaims</td>
<td>pvc</td>
<td>Â≠òÂÇ®</td>
</tr>
<tr>
<td>ÈÖçÁΩÆËµÑÊ∫ê</td>
<td>configmaps</td>
<td>cm</td>
<td>ÈÖçÁΩÆ</td>
</tr>
<tr>
<td></td>
<td>secrets</td>
<td></td>
<td>ÈÖçÁΩÆ</td>
</tr>
</tbody></table>
<p><strong>Êìç‰Ωú</strong></p>
<p>kubernetesÂÖÅËÆ∏ÂØπËµÑÊ∫êËøõË°åÂ§öÁßçÊìç‰ΩúÔºåÂèØ‰ª•ÈÄöËøá‚ÄìhelpÊü•ÁúãËØ¶ÁªÜÁöÑÊìç‰ΩúÂëΩ‰ª§</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl --help</span><br></pre></td></tr></table></figure>

<p>ÁªèÂ∏∏‰ΩøÁî®ÁöÑÊìç‰ΩúÊúâ‰∏ãÈù¢Ëøô‰∫õÔºö</p>
<table>
<thead>
<tr>
<th>ÂëΩ‰ª§ÂàÜÁ±ª</th>
<th>ÂëΩ‰ª§</th>
<th>ÁøªËØë</th>
<th>ÂëΩ‰ª§‰ΩúÁî®</th>
</tr>
</thead>
<tbody><tr>
<td>Âü∫Êú¨ÂëΩ‰ª§</td>
<td>create</td>
<td>ÂàõÂª∫</td>
<td>ÂàõÂª∫‰∏Ä‰∏™ËµÑÊ∫ê</td>
</tr>
<tr>
<td></td>
<td>edit</td>
<td>ÁºñËæë</td>
<td>ÁºñËæë‰∏Ä‰∏™ËµÑÊ∫ê</td>
</tr>
<tr>
<td></td>
<td>get</td>
<td>Ëé∑Âèñ</td>
<td>Ëé∑Âèñ‰∏Ä‰∏™ËµÑÊ∫ê</td>
</tr>
<tr>
<td></td>
<td>patch</td>
<td>Êõ¥Êñ∞</td>
<td>Êõ¥Êñ∞‰∏Ä‰∏™ËµÑÊ∫ê</td>
</tr>
<tr>
<td></td>
<td>delete</td>
<td>Âà†Èô§</td>
<td>Âà†Èô§‰∏Ä‰∏™ËµÑÊ∫ê</td>
</tr>
<tr>
<td></td>
<td>explain</td>
<td>Ëß£Èáä</td>
<td>Â±ïÁ§∫ËµÑÊ∫êÊñáÊ°£</td>
</tr>
<tr>
<td>ËøêË°åÂíåË∞ÉËØï</td>
<td>run</td>
<td>ËøêË°å</td>
<td>Âú®ÈõÜÁæ§‰∏≠ËøêË°å‰∏Ä‰∏™ÊåáÂÆöÁöÑÈïúÂÉè</td>
</tr>
<tr>
<td></td>
<td>expose</td>
<td>Êö¥Èú≤</td>
<td>Êö¥Èú≤ËµÑÊ∫ê‰∏∫Service</td>
</tr>
<tr>
<td></td>
<td>describe</td>
<td>ÊèèËø∞</td>
<td>ÊòæÁ§∫ËµÑÊ∫êÂÜÖÈÉ®‰ø°ÊÅØ</td>
</tr>
<tr>
<td></td>
<td>logs</td>
<td>Êó•ÂøóËæìÂá∫ÂÆπÂô®Âú® pod ‰∏≠ÁöÑÊó•Âøó</td>
<td>ËæìÂá∫ÂÆπÂô®Âú® pod ‰∏≠ÁöÑÊó•Âøó</td>
</tr>
<tr>
<td></td>
<td>attach</td>
<td>Áº†ÁªïËøõÂÖ•ËøêË°å‰∏≠ÁöÑÂÆπÂô®</td>
<td>ËøõÂÖ•ËøêË°å‰∏≠ÁöÑÂÆπÂô®</td>
</tr>
<tr>
<td></td>
<td>exec</td>
<td>ÊâßË°åÂÆπÂô®‰∏≠ÁöÑ‰∏Ä‰∏™ÂëΩ‰ª§</td>
<td>ÊâßË°åÂÆπÂô®‰∏≠ÁöÑ‰∏Ä‰∏™ÂëΩ‰ª§</td>
</tr>
<tr>
<td></td>
<td>cp</td>
<td>Â§çÂà∂</td>
<td>Âú®PodÂÜÖÂ§ñÂ§çÂà∂Êñá‰ª∂</td>
</tr>
<tr>
<td></td>
<td>rollout</td>
<td>È¶ñÊ¨°Â±ïÁ§∫</td>
<td>ÁÆ°ÁêÜËµÑÊ∫êÁöÑÂèëÂ∏É</td>
</tr>
<tr>
<td></td>
<td>scale</td>
<td>ËßÑÊ®°</td>
<td>Êâ©(Áº©)ÂÆπPodÁöÑÊï∞Èáè</td>
</tr>
<tr>
<td></td>
<td>autoscale</td>
<td>Ëá™Âä®Ë∞ÉÊï¥</td>
<td>Ëá™Âä®Ë∞ÉÊï¥PodÁöÑÊï∞Èáè</td>
</tr>
<tr>
<td>È´òÁ∫ßÂëΩ‰ª§</td>
<td>apply</td>
<td>rc</td>
<td>ÈÄöËøáÊñá‰ª∂ÂØπËµÑÊ∫êËøõË°åÈÖçÁΩÆ</td>
</tr>
<tr>
<td></td>
<td>label</td>
<td>Ê†áÁ≠æ</td>
<td>Êõ¥Êñ∞ËµÑÊ∫ê‰∏äÁöÑÊ†áÁ≠æ</td>
</tr>
<tr>
<td>ÂÖ∂‰ªñÂëΩ‰ª§</td>
<td>cluster-info</td>
<td>ÈõÜÁæ§‰ø°ÊÅØ</td>
<td>ÊòæÁ§∫ÈõÜÁæ§‰ø°ÊÅØ</td>
</tr>
<tr>
<td></td>
<td>version</td>
<td>ÁâàÊú¨</td>
<td>ÊòæÁ§∫ÂΩìÂâçServerÂíåClientÁöÑÁâàÊú¨</td>
</tr>
</tbody></table>
<p>‰∏ãÈù¢‰ª•‰∏Ä‰∏™namespaceÁöÑÂàõÂª∫ÂíåÂà†Èô§ÁÆÄÂçïÊºîÁ§∫Ôºö</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ÂàõÂª∫‰∏Ä‰∏™namespace</span></span><br><span class="line">[root@master ~]# kubectl create namespace dev</span><br><span class="line">namespace/dev created</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Ëé∑Âèñnamespace</span></span><br><span class="line">[root@master ~]# kubectl get ns</span><br><span class="line">NAME              STATUS   AGE</span><br><span class="line">default           Active   4h43m</span><br><span class="line">dev               Active   20s</span><br><span class="line">kube-node-lease   Active   4h43m</span><br><span class="line">kube-public       Active   4h43m</span><br><span class="line">kube-system       Active   4h43m</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Âú®Ê≠§namespace‰∏ãÂàõÂª∫Âπ∂ËøêË°å‰∏Ä‰∏™NginxÁöÑPod</span></span><br><span class="line">[root@master ~]# kubectl run pod --image=nginx -n dev</span><br><span class="line">kubectl run --generator=deployment/apps.v1 is DEPRECATED and will be removed in a future version. Use kubectl run --generator=run-pod/v1 or kubectl create instead.</span><br><span class="line">deployment.apps/pod created</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãÊñ∞ÂàõÂª∫ÁöÑpod</span></span><br><span class="line">[root@master ~]# kubectl get pod -n dev</span><br><span class="line">NAME                   READY   STATUS    RESTARTS   AGE</span><br><span class="line">pod-864f9875b9-gglz8   1/1     Running   0          49s</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Âà†Èô§ÊåáÂÆöÁöÑpod</span></span><br><span class="line">[root@master ~]# kubectl delete pod pod-864f9875b9-gglz8 -n dev</span><br><span class="line">pod &quot;pod-864f9875b9-gglz8&quot; deleted</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Âà†Èô§namespaceÔºåÈáåÈù¢ÁöÑ‰∏úË•øÂÖ®ÈÉ®ÈÉΩ‰ºöÂà†Èô§</span></span><br><span class="line">[root@master ~]# kubectl delete ns dev</span><br><span class="line">namespace &quot;dev&quot; deleted</span><br><span class="line">---------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãÁâàÊú¨</span></span><br><span class="line">[root@master ~]# kubectl version</span><br><span class="line">Client Version: version.Info&#123;Major:&quot;1&quot;, Minor:&quot;17&quot;, GitVersion:&quot;v1.17.4&quot;, GitCommit:&quot;8d8aa39598534325ad77120c120a22b3a990b5ea&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2020-03-12T21:03:42Z&quot;, GoVersion:&quot;go1.13.8&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;&#125;</span><br><span class="line">Server Version: version.Info&#123;Major:&quot;1&quot;, Minor:&quot;17&quot;, GitVersion:&quot;v1.17.4&quot;, GitCommit:&quot;8d8aa39598534325ad77120c120a22b3a990b5ea&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2020-03-12T20:55:23Z&quot;, GoVersion:&quot;go1.13.8&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãÈõÜÁæ§‰ø°ÊÅØ</span></span><br><span class="line">[root@master ~]# kubectl cluster-info</span><br><span class="line">Kubernetes master is running at https://192.168.59.100:6443</span><br><span class="line">KubeDNS is running at https://192.168.59.100:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy</span><br><span class="line"></span><br><span class="line">To further debug and diagnose cluster problems, use &#x27;kubectl cluster-info dump&#x27;.</span><br></pre></td></tr></table></figure>



<h3 id="ÂëΩ‰ª§ÂºèÂØπË±°ÈÖçÁΩÆ"><a href="#ÂëΩ‰ª§ÂºèÂØπË±°ÈÖçÁΩÆ" class="headerlink" title="ÂëΩ‰ª§ÂºèÂØπË±°ÈÖçÁΩÆ"></a>ÂëΩ‰ª§ÂºèÂØπË±°ÈÖçÁΩÆ</h3><p>ÂëΩ‰ª§ÂºèÂØπË±°ÈÖçÁΩÆÂ∞±ÊòØ‰ΩøÁî®ÂëΩ‰ª§ÈÖçÂêàÈÖçÁΩÆÊñá‰ª∂‰∏ÄËµ∑Êù•Êìç‰ΩúkubernetesËµÑÊ∫ê„ÄÇ</p>
<p>1ÔºâÂàõÂª∫‰∏Ä‰∏™nginxpod.yamlÔºåÂÜÖÂÆπÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Namespace</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name :</span> <span class="string">dev</span></span><br><span class="line">  </span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind :</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginxpod</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx-containers</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br></pre></td></tr></table></figure>

<p>2ÔºâÊâßË°åcreateÂëΩ‰ª§ÔºåÂàõÂª∫ËµÑÊ∫êÔºö</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl create -f nginxpod.yaml</span><br><span class="line">namespace/dev created</span><br><span class="line">pod/nginxpod created</span><br></pre></td></tr></table></figure>

<p>Ê≠§Êó∂ÂèëÁé∞ÂàõÂª∫‰∫Ü‰∏§‰∏™ËµÑÊ∫êÂØπË±°ÔºåÂàÜÂà´ÊòØnamespaceÂíåpod</p>
<p>3ÔºâÊâßË°ågetÂëΩ‰ª§ÔºåÊü•ÁúãËµÑÊ∫êÔºö</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl get -f nginxpod.yaml</span><br><span class="line">NAME            STATUS   AGE</span><br><span class="line">namespace/dev   Active   2m3s</span><br><span class="line"></span><br><span class="line">NAME           READY   STATUS    RESTARTS   AGE</span><br><span class="line">pod/nginxpod   1/1     Running   0          2m2s</span><br></pre></td></tr></table></figure>



<p>4ÔºâÊâßË°ådeleteÂëΩ‰ª§ÔºåÂà†Èô§ËµÑÊ∫êÔºö</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl delete -f nginxpod.yaml</span><br><span class="line">namespace &quot;dev&quot; deleted</span><br><span class="line">pod &quot;nginxpod&quot; deleted</span><br></pre></td></tr></table></figure>

<p>Ê≠§Êó∂ÂèëÁé∞‰∏§‰∏™ËµÑÊ∫êÂØπË±°ÂëóÂà†Èô§‰∫Ü</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Â∞èÁªìÔºö</span><br><span class="line">	ÂëΩ‰ª§ÂºèÂØπË±°ÈÖçÁΩÆÁöÑÊñπÂºèÊìç‰ΩúËµÑÊ∫êÔºåÂèØ‰ª•ÁÆÄÂçïÁöÑËÆ§‰∏∫ÔºöÂëΩ‰ª§ + yamlÈÖçÁΩÆÊñá‰ª∂ÔºàÈáåÈù¢ÊòØÂëΩ‰ª§ÈúÄË¶ÅÁöÑÂêÑÁßçÂèÇÊï∞Ôºâ</span><br></pre></td></tr></table></figure>



<h3 id="Â£∞ÊòéÂºèÂØπË±°ÈÖçÁΩÆ"><a href="#Â£∞ÊòéÂºèÂØπË±°ÈÖçÁΩÆ" class="headerlink" title="Â£∞ÊòéÂºèÂØπË±°ÈÖçÁΩÆ"></a>Â£∞ÊòéÂºèÂØπË±°ÈÖçÁΩÆ</h3><p>Â£∞ÊòéÂºèÂØπË±°ÈÖçÁΩÆË∑üÂëΩ‰ª§ÂºèÂØπË±°ÈÖçÁΩÆÂæàÁõ∏‰ººÔºå‰ΩÜÊòØÂÆÉÂè™Êúâ‰∏Ä‰∏™ÂëΩ‰ª§apply„ÄÇ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">È¶ñÂÖàÊâßË°å‰∏ÄÊ¨°kubectl apply -f yamlÊñá‰ª∂,ÂèëÁé∞ÂàõÂª∫‰∫ÜËµÑÊ∫ê</span></span><br><span class="line">[root@master ~]# kubectl apply -f nginxpod.yaml</span><br><span class="line">namespace/dev created</span><br><span class="line">pod/nginxpod created</span><br><span class="line"></span><br><span class="line">[root@master ~]# kubectl get ns dev</span><br><span class="line">NAME   STATUS   AGE</span><br><span class="line">dev    Active   31s</span><br><span class="line">[root@master ~]# kubectl get pods -n dev</span><br><span class="line">NAME       READY   STATUS    RESTARTS   AGE</span><br><span class="line">nginxpod   1/1     Running   0          41s</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÂÜçÊ¨°ÊâßË°å‰∏ÄÊ¨°ÔºåÂèëÁé∞ËØ¥ËµÑÊ∫êÊ≤°ÊúâÂèòÂä®</span></span><br><span class="line">[root@master ~]# kubectl apply -f nginxpod.yaml</span><br><span class="line">namespace/dev unchanged</span><br><span class="line">pod/nginxpod unchanged</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ÊÄªÁªìÔºö</span><br><span class="line">	ÂÖ∂ÂÆûÂ£∞ÊòéÂºèÂØπË±°ÈÖçÁΩÆÂ∞±ÊòØ‰ΩøÁî®applyÊèèËø∞‰∏Ä‰∏™ËµÑÊ∫êÊúÄÁªàÁöÑÁä∂ÊÄÅÔºàÂú®yaml‰∏≠ÂÆö‰πâÁä∂ÊÄÅ)</span><br><span class="line">	‰ΩøÁî®applyÊìç‰ΩúËµÑÊ∫ê:</span><br><span class="line">		Â¶ÇÊûúËµÑÊ∫ê‰∏çÂ≠òÂú®ÔºåÂ∞±ÂàõÂª∫ÔºåÁõ∏ÂΩì‰∫ékubectl create</span><br><span class="line">		Â¶ÇÊûúËµÑÊ∫êÂ∑≤Â≠òÂú®ÔºåÂ∞±Êõ¥Êñ∞ÔºåÁõ∏ÂΩì‰∫ékubectl patch</span><br></pre></td></tr></table></figure>



<blockquote>
<p>Êâ©Â±ïÔºökubectlÂèØ‰ª•Âú®nodeËäÇÁÇπ‰∏äËøêË°åÂêóÔºü</p>
</blockquote>
<p>kubectlÁöÑËøêË°åÊòØÈúÄË¶ÅËøõË°åÈÖçÁΩÆÁöÑÔºåÂÆÉÁöÑÈÖçÁΩÆÊñá‰ª∂ÊòØ$HOME/.kubeÔºåÂ¶ÇÊûúÊÉ≥Ë¶ÅÂú®nodeËäÇÁÇπËøêË°åÊ≠§ÂëΩ‰ª§ÔºåÈúÄË¶ÅÂ∞Ümaster‰∏äÁöÑ.kubeÊñá‰ª∂Â§çÂà∂Âà∞nodeËäÇÁÇπ‰∏äÔºåÂç≥Âú®masterËäÇÁÇπ‰∏äÊâßË°å‰∏ãÈù¢Êìç‰Ωú:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -r HOME/.kube node1: HOME/</span><br></pre></td></tr></table></figure>



<blockquote>
<p>‰ΩøÁî®Êé®ËçêÔºö‰∏âÁßçÊñπÂºèÂ¶Ç‰ΩïÈÄâÊã©Ôºü</p>
</blockquote>
<p>ÂàõÂª∫/Êõ¥Êñ∞ËµÑÊ∫ê          ‰ΩøÁî®Â£∞ÊòéÂºèÂØπË±°ÈÖçÁΩÆkubectl apply -f XXX.yaml</p>
<p>Âà†Èô§ËµÑÊ∫ê                   ‰ΩøÁî®ÂëΩ‰ª§ÂºèÂØπË±°ÈÖçÁΩÆkubectl delete -f XXX.yaml</p>
<p>Êü•ËØ¢ËµÑÊ∫ê                   ‰ΩøÁî®ÂëΩ‰ª§ÂºèÂØπË±°ÁÆ°ÁêÜkubectl get(describe)ËµÑÊ∫êÂêçÁß∞</p>
<h1 id="ÂÆûÊàòÂÖ•Èó®"><a href="#ÂÆûÊàòÂÖ•Èó®" class="headerlink" title="ÂÆûÊàòÂÖ•Èó®"></a>ÂÆûÊàòÂÖ•Èó®</h1><p>Êú¨Á´†ËäÇÂ∞Ü‰ªãÁªçÂ¶Ç‰ΩïÂú®kubernetesÈõÜÁæ§‰∏≠ÈÉ®ÁΩ≤‰∏Ä‰∏™NginxÊúçÂä°ÔºåÂπ∂‰∏îËÉΩÂ§üÂØπÂÖ∂ËøõË°åËÆøÈóÆ„ÄÇ</p>
<h2 id="Namespace"><a href="#Namespace" class="headerlink" title="Namespace"></a>Namespace</h2><p>NamespaceÊòØkubernetesÁ≥ªÁªü‰∏≠ÁöÑ‰∏ÄÁßçÈùûÂ∏∏ÈáçË¶ÅËµÑÊ∫êÔºåÂÆÉÁöÑ‰∏ªË¶Å‰ΩúÁî®ÊòØÁî®Êù•ÂÆûÁé∞<strong>Â§öÂ•óÁéØÂ¢ÉÁöÑËµÑÊ∫êÈöîÁ¶ª</strong>ÊàñËÄÖ<strong>Â§öÁßüÊà∑ÁöÑËµÑÊ∫êÈöîÁ¶ª</strong>„ÄÇ</p>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåkubernetesÈõÜÁæ§‰∏≠ÁöÑÊâÄÊúâÁöÑPodÈÉΩÊòØÂèØ‰ª•Áõ∏‰∫íËÆøÈóÆÁöÑ„ÄÇ‰ΩÜÊòØÂú®ÂÆûÈôÖ‰∏≠ÔºåÂèØËÉΩ‰∏çÊÉ≥ËÆ©‰∏§‰∏™Pod‰πãÈó¥ËøõË°å‰∫íÁõ∏ÁöÑËÆøÈóÆÔºåÈÇ£Ê≠§Êó∂Â∞±ÂèØ‰ª•Â∞Ü‰∏§‰∏™PodÂàíÂàÜÂà∞‰∏çÂêåÁöÑnamespace‰∏ã„ÄÇkubernetesÈÄöËøáÂ∞ÜÈõÜÁæ§ÂÜÖÈÉ®ÁöÑËµÑÊ∫êÂàÜÈÖçÂà∞‰∏çÂêåÁöÑNamespace‰∏≠ÔºåÂèØ‰ª•ÂΩ¢ÊàêÈÄªËæë‰∏äÁöÑ‚ÄùÁªÑ‚ÄùÔºå‰ª•Êñπ‰æø‰∏çÂêåÁöÑÁªÑÁöÑËµÑÊ∫êËøõË°åÈöîÁ¶ª‰ΩøÁî®ÂíåÁÆ°ÁêÜ„ÄÇ</p>
<p>ÂèØ‰ª•ÈÄöËøákubernetesÁöÑÊéàÊùÉÊú∫Âà∂ÔºåÂ∞Ü‰∏çÂêåÁöÑnamespace‰∫§Áªô‰∏çÂêåÁßüÊà∑ËøõË°åÁÆ°ÁêÜÔºåËøôÊ†∑Â∞±ÂÆûÁé∞‰∫ÜÂ§öÁßüÊà∑ÁöÑËµÑÊ∫êÈöîÁ¶ª„ÄÇÊ≠§Êó∂ËøòËÉΩÁªìÂêàkubernetesÁöÑËµÑÊ∫êÈÖçÈ¢ùÊú∫Âà∂ÔºåÈôêÂÆö‰∏çÂêåÁßüÊà∑ËÉΩÂç†Áî®ÁöÑËµÑÊ∫êÔºå‰æãÂ¶ÇCPU‰ΩøÁî®Èáè„ÄÅÂÜÖÂ≠ò‰ΩøÁî®ÈáèÁ≠âÁ≠âÔºåÊù•ÂÆûÁé∞ÁßüÊà∑ÂèØÁî®ËµÑÊ∫êÁöÑÁÆ°ÁêÜ„ÄÇ</p>
<p><img src="/D:/Learning\PersonalBlog\CodeChenBlog\source_posts\k8s-base\Snipaste_2022-04-14_14-33-22.jpg"></p>
<p>kubernetesÂú®ÈõÜÁæ§ÂêØÂä®‰πãÂêéÔºå‰ºöÈªòËÆ§ÂàõÂª∫Âá†‰∏™namespace</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl get namespace</span><br><span class="line">NAME              STATUS   AGE</span><br><span class="line">default           Active   21h  # ÊâÄÊúâÊú™ÊåáÂÆöNamespaceÁöÑÂØπË±°ÈÉΩ‰ºöË¢´ÂàÜÈÖçÂú®defaultÂëΩÂêçÁ©∫Èó¥</span><br><span class="line">kube-node-lease   Active   21h  # ÈõÜÁæ§ËäÇÁÇπ‰πãÈó¥ÁöÑÂøÉË∑≥Áª¥Êä§Ôºåv1.13ÂºÄÂßãÂºïÂÖ•</span><br><span class="line">kube-public       Active   21h  # Ê≠§ÂëΩÂêçÁ©∫Èó¥‰∏ãÁöÑËµÑÊ∫êÂèØ‰ª•Ë¢´ÊâÄÊúâ‰∫∫ËÆøÈóÆÔºàÂåÖÊã¨Êú™ËÆ§ËØÅÁî®Êà∑Ôºâ</span><br><span class="line">kube-system       Active   21h  # ÊâÄÊúâÁî±kubernetesÁ≥ªÁªüÂàõÂª∫ÁöÑËµÑÊ∫êÈÉΩÂ§Ñ‰∫éËøô‰∏™ÂëΩÂêçÁ©∫Èó¥</span><br></pre></td></tr></table></figure>

<p>‰∏ãÈù¢Êù•ÁúãnamespaceËµÑÊ∫êÁöÑÂÖ∑‰ΩìÊìç‰ΩúÔºö</p>
<p><strong>Êü•Áúã</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1 Êü•ÁúãÊâÄÊúâns</span></span><br><span class="line">[root@master ~]# kubectl get ns</span><br><span class="line">NAME              STATUS   AGE</span><br><span class="line">default           Active   21h</span><br><span class="line">kube-node-lease   Active   21h</span><br><span class="line">kube-public       Active   21h</span><br><span class="line">kube-system       Active   21h</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2 Êü•ÁúãÊåáÂÆöÁöÑns</span></span><br><span class="line">[root@master ~]# kubectl get ns default</span><br><span class="line">NAME      STATUS   AGE</span><br><span class="line">default   Active   21h</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3 ÊåáÂÆöËæìÂá∫Ê†ºÂºè ÂëΩ‰ª§Ôºökubectl get ns nsÂêçÁß∞ -o Ê†ºÂºèÂèÇÊï∞</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> kubernetesÊîØÊåÅÁöÑÊ†ºÂºèÊúâÂæàÂ§öÔºåÊØîËæÉÂ∏∏ËßÅÁöÑÊòØwide„ÄÅjson„ÄÅyaml</span></span><br><span class="line">[root@master ~]# kubectl get ns default -o yaml</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Namespace</span><br><span class="line">metadata:</span><br><span class="line">  creationTimestamp: &quot;2022-04-13T09:01:38Z&quot;</span><br><span class="line">  name: default</span><br><span class="line">  resourceVersion: &quot;145&quot;</span><br><span class="line">  selfLink: /api/v1/namespaces/default</span><br><span class="line">  uid: 9c0022a8-ef64-4459-bcb2-2d0aba7c5655</span><br><span class="line">spec:</span><br><span class="line">  finalizers:</span><br><span class="line">  - kubernetes</span><br><span class="line">status:</span><br><span class="line">  phase: Active</span><br><span class="line"><span class="meta">  </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4 Êü•ÁúãnsËØ¶ÊÉÖ</span></span><br><span class="line">[root@master ~]# kubectl describe ns default</span><br><span class="line">Name:         default</span><br><span class="line">Labels:       &lt;none&gt;</span><br><span class="line">Annotations:  &lt;none&gt;</span><br><span class="line">Status:       Active  # Active ÂëΩÂêçÁ©∫Èó¥Ê≠£Âú®‰ΩøÁî® TerminatingÊ≠£Âú®Âà†Èô§ÂëΩÂêçÁ©∫Èó¥</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ResourceQuota ÈíàÂØπnamespaceÂÅöÁöÑËµÑÊ∫êÈôêÂà∂</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> LimitRangeÈíàÂØπnamespace‰∏≠ÁöÑÊØè‰∏™ÁªÑ‰ª∂ÂÅöÁöÑËµÑÊ∫êÈôêÂà∂</span></span><br><span class="line">No resource quota.</span><br><span class="line">No LimitRange resource.</span><br></pre></td></tr></table></figure>



<p><strong>ÂàõÂª∫</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ÂàõÂª∫namespace</span></span><br><span class="line">[root@master ~]# kubectl create ns dev</span><br><span class="line">namspace/dev created</span><br></pre></td></tr></table></figure>



<p><strong>Âà†Èô§</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Âà†Èô§namespace</span></span><br><span class="line">[root@master ~]# kubectl delete ns dev</span><br><span class="line">namespace &quot;dev&quot; deleted</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>ÈÖçÁΩÆÊñπÂºè</strong></p>
<p>È¶ñÂÖàÂáÜÂ§á‰∏Ä‰∏™yamlÊñá‰ª∂Ôºöns-dev.yaml</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Namespace</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">	<span class="attr">name:</span> <span class="string">dev</span></span><br></pre></td></tr></table></figure>

<p>ÁÑ∂ÂêéÂ∞±ÂèØ‰ª•ÊâßË°åÂØπÂ∫îÁöÑÂàõÂª∫ÂíåÂà†Èô§ÂëΩ‰ª§‰∫ÜÔºö</p>
<p>‚Äã    ÂàõÂª∫: kubectl create -f ns-dev.yaml</p>
<p>‚Äã    Âà†Èô§: kubectl delete -f ns-dev.yaml</p>
<h2 id="Pod"><a href="#Pod" class="headerlink" title="Pod"></a>Pod</h2><p>ÁªèËøáÂâçÈù¢ÁöÑÂ≠¶‰π†Â∑≤ÁªèÁü•ÈÅìÔºåÁ®ãÂ∫èË¶ÅËøêË°åÔºåÂøÖÈ°ªÈÉ®ÁΩ≤Âú®ÂÆπÂô®‰∏≠ÔºåËÄåÂÆπÂô®ÂøÖÈ°ªÂ≠òÂú®‰∫éPod‰∏≠„ÄÇ</p>
<p>PodÊòØkubernetesÈõÜÁæ§ËøõË°åÁÆ°ÁêÜÁöÑÊúÄÂ∞èÂçïÂÖÉÔºå‰πüÊòØkubernetes‰∏≠ÊúÄ‰∏∫ÈáçË¶ÅÂíåÂü∫Êú¨ÁöÑÊ¶ÇÂøµ„ÄÇ</p>
<p>PodÂèØ‰ª•ËÆ§‰∏∫ÊòØÂÆπÂô®ÁöÑÂ∞ÅË£ÖÔºå‰∏Ä‰∏™Pod‰∏≠ÂèØ‰ª•Â≠òÂú®‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™ÂÆπÂô®„ÄÇ</p>
<p><img src="/D:/Learning\PersonalBlog\CodeChenBlog\source_posts\k8s-base\Snipaste_2022-04-14_14-54-11.jpg"></p>
<p>kubernetesÂú®ÈõÜÁæ§ÂêØÂä®‰πãÂêéÔºåÈõÜÁæ§‰∏≠ÁöÑÂêÑ‰∏™ÁªÑ‰ª∂‰πüÈÉΩÊòØ‰ª•PodÊñπÂºèËøêË°åÁöÑ„ÄÇÂèØ‰ª•ÈÄöËøá‰ª•‰∏ãÂëΩ‰ª§Êü•ÁúãÔºö</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl get pod -n kube-system</span><br><span class="line">NAME                             READY   STATUS    RESTARTS   AGE</span><br><span class="line">coredns-6955765f44-77cj2         1/1     Running   1          21h</span><br><span class="line">coredns-6955765f44-bzwfm         1/1     Running   1          21h</span><br><span class="line">etcd-master                      1/1     Running   2          21h</span><br><span class="line">kube-apiserver-master            1/1     Running   2          21h</span><br><span class="line">kube-controller-manager-master   1/1     Running   3          21h</span><br><span class="line">kube-flannel-ds-dmshk            1/1     Running   1          19h</span><br><span class="line">kube-flannel-ds-dv5p6            1/1     Running   1          19h</span><br><span class="line">kube-flannel-ds-sf9tt            1/1     Running   1          19h</span><br><span class="line">kube-proxy-6lqmk                 1/1     Running   2          21h</span><br><span class="line">kube-proxy-z7z5c                 1/1     Running   2          21h</span><br><span class="line">kube-proxy-zq6zk                 1/1     Running   2          21h</span><br><span class="line">kube-scheduler-master            1/1     Running   3          21h</span><br></pre></td></tr></table></figure>



<p><strong>ÂàõÂª∫Âπ∂ËøêË°å</strong></p>
<p>kubernetesÊ≤°ÊúâÊèê‰æõÂçïÁã¨ËøêË°åPodÁöÑÂëΩ‰ª§ÔºåÈÉΩÊòØÈÄöËøáPodÊéßÂà∂Âô®Êù•ÂÆûÁé∞ÁöÑ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">ÂëΩ‰ª§Ê†ºÂºè:kubectl run (podÊéßÂà∂Âô®ÂêçÁß∞)[ÂèÇÊï∞]</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --image ÊåáÂÆöPodÁöÑÈïúÂÉè</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ‚Äî-port ÊåáÂÆöÁ´ØÂè£</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --namespace ÊåáÂÆönamespace</span></span><br><span class="line">[root@master ~]# kubectl run nginx --image=nginx:1.17.1 --port=80 --namespace dev</span><br><span class="line">kubectl run --generator=deployment/apps.v1 is DEPRECATED and will be removed in a future version. Use kubectl run --generator=run-pod/v1 or kubectl create instead.</span><br><span class="line">deployment.apps/nginx created</span><br></pre></td></tr></table></figure>



<p><strong>Êü•Áúãpod‰ø°ÊÅØ</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãpodÂü∫Êú¨‰ø°ÊÅØ</span></span><br><span class="line">[root@master ~]# kubectl get pods -n dev</span><br><span class="line">NAME                     READY   STATUS    RESTARTS   AGE</span><br><span class="line">nginx-64777cd554-wl475   1/1     Running   0          79s</span><br><span class="line"></span><br><span class="line">[root@master ~]# kubectl get pods -n dev -o wide</span><br><span class="line">NAME                     READY   STATUS    RESTARTS   AGE     IP            NODE    NOMINATED NODE   READINESS GATES</span><br><span class="line">nginx-64777cd554-wl475   1/1     Running   0          5m59s   10.244.2.10   node2   &lt;none&gt;           &lt;none&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãpodÁöÑËØ¶ÁªÜ‰ø°ÊÅØ</span></span><br><span class="line">[root@master ~]# kubectl describe pod nginx-64777cd554-wl475 -n dev</span><br><span class="line">Name:         nginx-64777cd554-wl475</span><br><span class="line">Namespace:    dev</span><br><span class="line">Priority:     0</span><br><span class="line">Node:         node2/192.168.59.102</span><br><span class="line">Start Time:   Thu, 14 Apr 2022 15:00:41 +0800</span><br><span class="line">Labels:       pod-template-hash=64777cd554</span><br><span class="line">              run=nginx</span><br><span class="line">Annotations:  &lt;none&gt;</span><br><span class="line">Status:       Running</span><br><span class="line">IP:           10.244.2.10</span><br><span class="line">IPs:</span><br><span class="line">  IP:           10.244.2.10</span><br><span class="line">Controlled By:  ReplicaSet/nginx-64777cd554</span><br><span class="line">Containers:</span><br><span class="line">  nginx:</span><br><span class="line">    Container ID:   docker://31c07492577ad1c02e1301e8cda04163310f1a9280ee7bb20034f4fd91a9b195</span><br><span class="line">    Image:          nginx:1.17.1</span><br><span class="line">    Image ID:       docker-pullable://nginx@sha256:b4b9b3eee194703fc2fa8afa5b7510c77ae70cfba567af1376a573a967c03dbb</span><br><span class="line">    Port:           80/TCP</span><br><span class="line">    Host Port:      0/TCP</span><br><span class="line">    State:          Running</span><br><span class="line">      Started:      Thu, 14 Apr 2022 15:00:42 +0800</span><br><span class="line">    Ready:          True</span><br><span class="line">    Restart Count:  0</span><br><span class="line">    Environment:    &lt;none&gt;</span><br><span class="line">    Mounts:</span><br><span class="line">      /var/run/secrets/kubernetes.io/serviceaccount from default-token-hs4rl (ro)</span><br><span class="line">Conditions:</span><br><span class="line">  Type              Status</span><br><span class="line">  Initialized       True </span><br><span class="line">  Ready             True </span><br><span class="line">  ContainersReady   True </span><br><span class="line">  PodScheduled      True </span><br><span class="line">Volumes:</span><br><span class="line">  default-token-hs4rl:</span><br><span class="line">    Type:        Secret (a volume populated by a Secret)</span><br><span class="line">    SecretName:  default-token-hs4rl</span><br><span class="line">    Optional:    false</span><br><span class="line">QoS Class:       BestEffort</span><br><span class="line">Node-Selectors:  &lt;none&gt;</span><br><span class="line">Tolerations:     node.kubernetes.io/not-ready:NoExecute for 300s</span><br><span class="line">                 node.kubernetes.io/unreachable:NoExecute for 300s</span><br><span class="line">Events:</span><br><span class="line">  Type    Reason     Age   From               Message</span><br><span class="line">  ----    ------     ----  ----               -------</span><br><span class="line">  Normal  Scheduled  3m6s  default-scheduler  Successfully assigned dev/nginx-64777cd554-wl475 to node2</span><br><span class="line">  Normal  Pulled     3m5s  kubelet, node2     Container image &quot;nginx:1.17.1&quot; already present on machine</span><br><span class="line">  Normal  Created    3m5s  kubelet, node2     Created container nginx</span><br><span class="line">  Normal  Started    3m5s  kubelet, node2     Started container nginx</span><br></pre></td></tr></table></figure>



<p><strong>ËÆøÈóÆPod</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ËÆøÈóÆpodIP</span></span><br><span class="line">[root@master ~]# kubectl get pods -n dev -o wide</span><br><span class="line">NAME                     READY   STATUS    RESTARTS   AGE   IP            NODE    NOMINATED NODE   READINESS GATES</span><br><span class="line">nginx-64777cd554-wl475   1/1     Running   0          10m   10.244.2.10   node2   &lt;none&gt;           &lt;none&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ËÆøÈóÆPOD</span></span><br><span class="line">[root@master ~]# curl http://10.244.2.10:80</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Welcome to nginx!&lt;/title&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">    body &#123;</span><br><span class="line">        width: 35em;</span><br><span class="line">        margin: 0 auto;</span><br><span class="line">        font-family: Tahoma, Verdana, Arial, sans-serif;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;If you see this page, the nginx web server is successfully installed and</span><br><span class="line">working. Further configuration is required.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;For online documentation and support please refer to</span><br><span class="line">&lt;a href=&quot;http://nginx.org/&quot;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;</span><br><span class="line">Commercial support is available at</span><br><span class="line">&lt;a href=&quot;http://nginx.com/&quot;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<p><strong>Âà†Èô§ÊåáÂÆöPod</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl get pods -n dev</span><br><span class="line">NAME                     READY   STATUS    RESTARTS   AGE</span><br><span class="line">nginx-64777cd554-wl475   1/1     Running   0          14m</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Âà†Èô§ÊåáÂÆöPod</span></span><br><span class="line">[root@master ~]# kubectl delete pod nginx-64777cd554-wl475 -n dev</span><br><span class="line">pod &quot;nginx-64777cd554-wl475&quot; deleted</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Ê≠§Êó∂ÔºåÊòæÁ§∫Âà†Èô§podÊàêÂäüÔºå‰ΩÜÊòØÂÜçÊü•ËØ¢ÔºåÂèëÁé∞ÂèàÊñ∞‰∫ßÁîü‰∫Ü‰∏Ä‰∏™</span></span><br><span class="line">[root@master ~]# kubectl get pods -n dev</span><br><span class="line">NAME                     READY   STATUS              RESTARTS   AGE</span><br><span class="line">nginx-64777cd554-8gq9h   0/1     ContainerCreating   0          4s</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ËøôÊòØÂõ†‰∏∫ÂΩìÂâçpodÊòØÁî±podÊéßÂà∂Âô®ÂàõÂª∫ÁöÑÔºåÊéßÂà∂Âô®‰ºöÁõëÊéßpodÁä∂ÂÜµÔºå‰∏ÄÊó¶ÂèëÁé∞podÊ≠ª‰∫°Ôºå‰ºöÁ´ãÂç≥ÈáçÂª∫</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Ê≠§Êó∂Ë¶ÅÊÉ≥Âà†Èô§podÔºåÂøÖÈ°ªÂà†Èô§podÊéßÂà∂Âô®</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÂÖàÊù•Êü•ËØ¢‰∏Ä‰∏ãÂΩìÂâçnamespace‰∏ãÁöÑpodÊéßÂà∂Âô®</span></span><br><span class="line">[root@master ~]# kubectl get deploy -n dev</span><br><span class="line">NAME    READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">nginx   1/1     1            1           41m</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êé•‰∏ãÊù•ÔºåÂà†Èô§Ê≠§podÊéßÂà∂Âô®</span></span><br><span class="line">[root@master ~]# kubectl delete deploy nginx -n dev</span><br><span class="line">deployment.apps &quot;nginx&quot; deleted</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Á®çÁ≠âÁâáÂàªÔºåÂÜçÊü•ËØ¢podÔºåÂèëÁé∞podË¢´Âà†Èô§‰∫Ü</span></span><br><span class="line">[root@master ~]# kubectl get pods -n dev</span><br><span class="line">No resources found in dev namespace.</span><br></pre></td></tr></table></figure>

<p><strong>ÈÖçÁΩÆÊìç‰Ωú</strong></p>
<p>ÂàõÂª∫‰∏Ä‰∏™pod-nginx.yamlÔºåÂÜÖÂÆπÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion :</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind :</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">namespace :</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec :</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">    <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">pod</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx-port</span></span><br><span class="line">      <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">TCP</span></span><br></pre></td></tr></table></figure>

<p>ÁÑ∂ÂêéÂ∞±ÂèØ‰ª•ÊâßË°åÁõ∏Â∫îÁöÑÂàõÂª∫ÂíåÂà†Èô§ÂëΩ‰ª§‰∫ÜÔºö</p>
<p>‚Äã    ÂàõÂª∫Ôºökubectl create -f pod-nginx.yaml</p>
<p>‚Äã    Âà†Èô§Ôºökubectl delete -f pod-nginx.yaml</p>
<h2 id="Label"><a href="#Label" class="headerlink" title="Label"></a>Label</h2><p>LabelÊòØkubernetesÁ≥ªÁªü‰∏≠ÁöÑ‰∏Ä‰∏™ÈáçË¶ÅÊ¶ÇÂøµ„ÄÇÂÆÉÁöÑ‰ΩúÁî®Â∞±ÊòØÂú®ËµÑÊ∫ê‰∏äÊ∑ªÂä†Ê†áËØÜÔºåÁî®Êù•ÂØπÂÆÉ‰ª¨ËøõË°åÂå∫ÂàÜÂíåÈÄâÊã©„ÄÇ</p>
<p>LabelÁöÑÁâπÁÇπ:</p>
<ul>
<li><p>‰∏Ä‰∏™Label‰ºö‰ª•key/valueÈîÆÂÄºÂØπÁöÑÂΩ¢ÂºèÈôÑÂä†Âà∞ÂêÑÁßçÂØπË±°‰∏äÔºåÂ¶ÇNode„ÄÅPod„ÄÅServiceÁ≠âÁ≠â</p>
</li>
<li><p>‰∏Ä‰∏™ËµÑÊ∫êÂØπË±°ÂèØ‰ª•ÂÆö‰πâ‰ªªÊÑèÊï∞ÊòüÁöÑLabelÔºåÂêå‰∏Ä‰∏™Label‰πüÂèØ‰ª•Ë¢´Ê∑ªÂä†Âà∞‰ªªÊÑèÊï∞ÈáèÁöÑËµÑÊ∫êÂØπË±°‰∏äÂéª</p>
</li>
<li><p>LabelÈÄöÂ∏∏Âú®ËµÑÊ∫êÂØπË±°ÂÆö‰πâÊó∂Á°ÆÂÆöÔºåÂΩìÁÑ∂‰πüÂèØ‰ª•Âú®ÂØπË±°ÂàõÂª∫ÂêéÂä®ÊÄÅÊ∑ªÂä†ÊàñËÄÖÂà†Èô§</p>
</li>
</ul>
<p>ÂèØ‰ª•ÈÄöËøáLabelÂÆûÁé∞ËµÑÊ∫êÁöÑÂ§öÁª¥Â∫¶ÂàÜÁªÑÔºå‰ª•‰æøÁÅµÊ¥ª„ÄÅÊñπ‰æøÂú∞ËøõË°åËµÑÊ∫êÂàÜÈÖç„ÄÅË∞ÉÂ∫¶„ÄÅÈÖçÁΩÆ„ÄÅÈÉ®ÁΩ≤Á≠âÁÆ°ÁêÜÂ∑•‰Ωú„ÄÇ</p>
<blockquote>
<p>‚Äî‰∫õÂ∏∏Áî®ÁöÑLabelÁ§∫‰æãÂ¶Ç‰∏ã:</p>
<ul>
<li><p>ÁâàÊú¨Ê†áÁ≠æÔºö‚Äùversion‚Äù:‚Äùrelease‚Äù, ‚Äúversion‚Äù:‚Äùstable‚Äù‚Ä¶</p>
</li>
<li><p>ÁéØÂ¢ÉÊ†áÁ≠æÔºö‚Äùenvironment‚Äù:‚Äùdev‚Äù, ‚Äúenvironment‚Äù:‚Äùtest‚Äù,‚Äùenvironment‚Äù:‚Äùpro‚Äù</p>
</li>
<li><p>Êû∂ÊûÑÊ†áÁ≠æÔºö‚Äùtier‚Äù:‚Äùfrontend‚Äù, ‚Äútier‚Äù:‚Äùbackend‚Äù</p>
</li>
</ul>
</blockquote>
<p>Ê†áÁ≠æÂÆö‰πâÂÆåÊØï‰πãÂêéÔºåËøòË¶ÅËÄÉËôëÂà∞Ê†áÁ≠æÁöÑÈÄâÊã©ÔºåËøôÂ∞±Ë¶Å‰ΩøÁî®Âà∞Label SelectorÔºåÂç≥Ôºö</p>
<p>LabelÁî®‰∫éÁªôÊüê‰∏™ËµÑÊ∫êÂØπË±°ÂÆö‰πâÊ†áËØÜ</p>
<p>Label SelectorÁî®‰∫éÊü•ËØ¢ÂíåÁ≠õÈÄâÊã•ÊúâÊüê‰∫õÊ†áÁ≠æÁöÑËµÑÊ∫êÂØπË±°</p>
<p>ÂΩìÂâçÊúâ‰∏§ÁßçLabel SelectorÔºö</p>
<ul>
<li><p>Âü∫‰∫éÁ≠âÂºèÁöÑLabel Selector</p>
<p>name = slaveÔºöÈÄâÊã©ÊâÄÊúâÂåÖÂê´Label‰∏≠key=‚Äùname‚Äù‰∏îvalue=‚Äùslave‚ÄùÁöÑÂØπË±°</p>
<p>env != productionÔºöÈÄâÊã©ÊâÄÊúâÂåÖÊã¨Label‰∏≠ÁöÑkey=‚Äùenv‚Äù‰∏îvalue‰∏çÁ≠â‰∫é‚Äùproduction‚ÄùÁöÑÂØπË±°</p>
</li>
<li><p>Âü∫‰∫éÈõÜÂêàÁöÑLabel Selector</p>
<p>name in (master, slave)ÔºöÈÄâÊã©ÊâÄÊúâÂåÖÂê´Label‰∏≠ÁöÑkey=‚Äùname‚Äù‰∏îvalue=‚Äùmaster‚ÄùÊàñ‚Äùslave‚ÄùÁöÑÂØπË±°</p>
<p>name not in (frontend)ÔºöÈÄâÊã©ÊâÄÊúâÂåÖÂê´Label‰∏≠ÁöÑkey=‚Äùname‚Äù‰∏îvalue‰∏çÁ≠â‰∫é‚Äùfrontend‚ÄùÁöÑÂØπË±°</p>
</li>
</ul>
<p>Ê†áÁ≠æÁöÑÈÄâÊã©Êù°‰ª∂ÂèØ‰ª•‰ΩøÁî®Â§ö‰∏™ÔºåÊ≠§Êó∂Â∞ÜÂ§ö‰∏™Label SelectorËøõË°åÁªÑÂêàÔºå‰ΩøÁî®ÈÄóÂè∑‚Äù,‚ÄùËøõË°åÂàÜÈöîÂç≥ÂèØ„ÄÇ‰æãÂ¶Ç:</p>
<p>‚Äã    name=slave, env!=production</p>
<p>‚Äã    name not in (frontend), env!=production</p>
<p><strong>ÂëΩ‰ª§ÊñπÂºè</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ‰∏∫podËµÑÊ∫êÊâìÊ†áÁ≠æ</span></span><br><span class="line">[root@master ~]# kubectl label pod nginx version=1.0 -n dev</span><br><span class="line">pod/nginx labeled</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ‰∏∫podËµÑÊ∫êÊõ¥Êñ∞Ê†áÁ≠æ</span></span><br><span class="line">[root@master ~]# kubectl label pod nginx version=2.0 -n dev --overwrite</span><br><span class="line">pod/nginx labeled</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãÊ†áÁ≠æ</span></span><br><span class="line">[root@master ~]# kubectl get pod nginx -n dev --show-labels</span><br><span class="line">NAME    READY   STATUS    RESTARTS   AGE    LABELS</span><br><span class="line">nginx   1/1     Running   0          5m3s   version=2.0</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Á≠õÈÄâÊ†áÁ≠æ</span></span><br><span class="line">[root@master ~]# kubectl get pod -n dev -l version=2.0 --show-labels</span><br><span class="line">NAME    READY   STATUS    RESTARTS   AGE     LABELS</span><br><span class="line">nginx   1/1     Running   0          5m55s   version=2.0</span><br><span class="line">[root@master ~]# kubectl get pod -n dev -l version!=2.0 --show-labels</span><br><span class="line">No resources found in dev namespace.</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Âà†Èô§Ê†áÁ≠æ</span></span><br><span class="line">[root@master ~]# kubectl label pod nginx version- -n dev</span><br><span class="line">pod/nginx labeled</span><br></pre></td></tr></table></figure>



<p><strong>ÈÖçÁΩÆÊñπÂºè</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind :</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name :</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">namespace :</span> <span class="string">dev</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">	<span class="attr">version:</span> <span class="string">&quot;3.0&quot;</span></span><br><span class="line">	<span class="attr">env :</span> <span class="string">&quot;test&quot;</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">pod</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx-port</span></span><br><span class="line">      <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">TCP</span></span><br></pre></td></tr></table></figure>

<p>ÁÑ∂ÂêéÊâßË°åÂØπÂ∫îÁöÑÊõ¥Êñ∞ÂëΩ‰ª§Ôºökubectl apply -f pod-nginx.yaml</p>
<h2 id="Deployment"><a href="#Deployment" class="headerlink" title="Deployment"></a>Deployment</h2><p>Âú®kubernetes‰∏≠ÔºåPodÊòØÊúÄÂ∞èÁöÑÊéßÂà∂ÂçïÂÖÉÔºå‰ΩÜÊòØkubernetesÂæàÂ∞ëÁõ¥Êé•ÊéßÂà∂PodÔºå‰∏ÄËà¨ÈÉΩÊòØÈÄöËøáPodÊéßÂà∂Âô®Êù•ÂÆåÊàêÁöÑ„ÄÇPodÊéßÂà∂Âô®Áî®‰∫épodÁöÑÁÆ°ÁêÜÔºåÁ°Æ‰øùpodËµÑÊ∫êÁ¨¶ÂêàÈ¢ÑÊúüÁöÑÁä∂ÊÄÅÔºåÂΩìpodÁöÑËµÑÊ∫êÂá∫Áé∞ÊïÖÈöúÊó∂Ôºå‰ºöÂ∞ùËØïËøõË°åÈáçÂêØÊàñÈáçÂª∫pod„ÄÇ</p>
<p>Âú®kubernetes‰∏≠PodÊéßÂà∂Âô®ÁöÑÁßçÁ±ªÊúâÂæàÂ§öÔºåÊú¨Á´†ËäÇÂè™‰ªãÁªç‰∏ÄÁßç:Deployment„ÄÇ</p>
<p><img src="/D:/Learning\PersonalBlog\CodeChenBlog\source_posts\k8s-base\Snipaste_2022-04-14_16-17-10.jpg"></p>
<p><strong>ÂëΩ‰ª§Êìç‰Ωú</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ÂëΩ‰ª§Ê†ºÂºè: kubectl run deploymentÂêçÁß∞ [ÂèÇÊï∞]</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --image ÊåáÂÆöpodÁöÑÈïúÂÉè</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --port ÊåáÂÆöÁ´ØÂè£</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --replicas ÊåáÂÆöÂàõÂª∫podÊï∞Èáè</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --namespace ÊåáÂÆönamespace</span></span><br><span class="line">[root@master ~]# kubectl run nginx --image=nginx:1.17.1 --port=80 --replicas=3 -n dev</span><br><span class="line">kubectl run --generator=deployment/apps.v1 is DEPRECATED and will be removed in a future version. Use kubectl run --generator=run-pod/v1 or kubectl create instead.</span><br><span class="line">deployment.apps/nginx created</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãÂàõÂª∫ÁöÑpod</span></span><br><span class="line">[root@master ~]# kubectl get pods -n dev</span><br><span class="line">NAME                     READY   STATUS    RESTARTS   AGE</span><br><span class="line">nginx                    1/1     Running   0          15m</span><br><span class="line">nginx-64777cd554-5mljk   1/1     Running   0          38s</span><br><span class="line">nginx-64777cd554-fmv9w   1/1     Running   0          38s</span><br><span class="line">nginx-64777cd554-p7cxh   1/1     Running   0          38s</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãdeploymentÁöÑ‰ø°ÊÅØ</span></span><br><span class="line">[root@master ~]# kubectl get deploy -n dev</span><br><span class="line">NAME    READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">nginx   3/3     3            3           93s</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> UP-TO-DATEÔºöÊàêÂäüÂçáÁ∫ßÁöÑÂâØÊú¨Êï∞Èáè</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ANAILABLEÔºöÂèØÁî®ÂâØÊú¨ÁöÑÊï∞Èáè</span></span><br><span class="line">[root@master ~]# kubectl get deploy -n dev -o wide</span><br><span class="line">NAME    READY   UP-TO-DATE   AVAILABLE   AGE     CONTAINERS   IMAGES         SELECTOR</span><br><span class="line">nginx   3/3     3            3           8m43s   nginx        nginx:1.17.1   run=nginx</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãdeploymentÁöÑËØ¶ÁªÜ‰ø°ÊÅØ</span></span><br><span class="line">[root@master ~]# kubectl describe deploy nginx -n dev</span><br><span class="line">Name:                   nginx</span><br><span class="line">Namespace:              dev</span><br><span class="line">CreationTimestamp:      Thu, 14 Apr 2022 16:20:20 +0800</span><br><span class="line">Labels:                 run=nginx</span><br><span class="line">Annotations:            deployment.kubernetes.io/revision: 1</span><br><span class="line">Selector:               run=nginx</span><br><span class="line">Replicas:               3 desired | 3 updated | 3 total | 3 available | 0 unavailable</span><br><span class="line">StrategyType:           RollingUpdate</span><br><span class="line">MinReadySeconds:        0</span><br><span class="line">RollingUpdateStrategy:  25% max unavailable, 25% max surge</span><br><span class="line">Pod Template:</span><br><span class="line">  Labels:  run=nginx</span><br><span class="line">  Containers:</span><br><span class="line">   nginx:</span><br><span class="line">    Image:        nginx:1.17.1</span><br><span class="line">    Port:         80/TCP</span><br><span class="line">    Host Port:    0/TCP</span><br><span class="line">    Environment:  &lt;none&gt;</span><br><span class="line">    Mounts:       &lt;none&gt;</span><br><span class="line">  Volumes:        &lt;none&gt;</span><br><span class="line">Conditions:</span><br><span class="line">  Type           Status  Reason</span><br><span class="line">  ----           ------  ------</span><br><span class="line">  Available      True    MinimumReplicasAvailable</span><br><span class="line">  Progressing    True    NewReplicaSetAvailable</span><br><span class="line">OldReplicaSets:  &lt;none&gt;</span><br><span class="line">NewReplicaSet:   nginx-64777cd554 (3/3 replicas created)</span><br><span class="line">Events:</span><br><span class="line">  Type    Reason             Age    From                   Message</span><br><span class="line">  ----    ------             ----   ----                   -------</span><br><span class="line">  Normal  ScalingReplicaSet  9m31s  deployment-controller  Scaled up replica set nginx-64777cd554 to 3</span><br><span class="line"><span class="meta">  </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Âà†Èô§</span></span><br><span class="line">[root@master ~]# kubectl delete deploy nginx -n dev</span><br><span class="line">deployment.apps &quot;nginx&quot; deleted</span><br></pre></td></tr></table></figure>



<p><strong>ÈÖçÁΩÆÊìç‰Ωú</strong></p>
<p>ÂàõÂª∫‰∏Ä‰∏™deploy-nginx.yamlÔºåÂÜÖÂÆπÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">          <span class="attr">protocol:</span> <span class="string">TCP</span></span><br></pre></td></tr></table></figure>

<p>ÊâßË°åÂëΩ‰ª§Ôºökubectl  create -f deploy-nginx.yaml </p>
<h2 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h2><p>ÈÄöËøá‰∏äËäÇËØæÁöÑÂ≠¶‰π†ÔºåÂ∑≤ÁªèËÉΩÂ§üÂà©Áî®DeploymentÊù•ÂàõÂª∫‰∏ÄÁªÑPodÊù•Êèê‰æõÂÖ∑ÊúâÈ´òÂèØÁî®ÊÄßÁöÑÊúçÂä°„ÄÇ</p>
<p>ËôΩÁÑ∂ÊØè‰∏™PodÈÉΩ‰ºöÂàÜÈÖç‰∏Ä‰∏™ÂçïÁã¨ÁöÑPod lPÔºåÁÑ∂ËÄåÂç¥Â≠òÂú®Â¶Ç‰∏ã‰∏§ÈóÆÈ¢ò:</p>
<ul>
<li><p>Pod IP‰ºöÈöèÁùÄPodÁöÑÈáçÂª∫‰∫ßÁîüÂèòÂåñ</p>
</li>
<li><p>Pod IP‰ªÖ‰ªÖÊòØÈõÜÁæ§ÂÜÖÂèØËßÅÁöÑËôöÊãüIPÔºåÂ§ñÈÉ®Êó†Ê≥ïËÆøÈóÆ</p>
</li>
</ul>
<p>ËøôÊ†∑ÂØπ‰∫éËÆøÈóÆËøô‰∏™ÊúçÂä°Â∏¶Êù•‰∫ÜÈöæÂ∫¶„ÄÇÂõ†Ê≠§ÔºåkubernetesËÆæËÆ°‰∫ÜServiceÊù•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ</p>
<p>ServiceÂèØ‰ª•Áúã‰ΩúÊòØ‰∏ÄÁªÑÂêåÁ±ªPod<strong>ÂØπÂ§ñÁöÑËÆøÈóÆÊé•Âè£</strong>„ÄÇÂÄüÂä©ServiceÔºåÂ∫îÁî®ÂèØ‰ª•Êñπ‰æøÂú∞ÂÆûÁé∞ÊúçÂä°ÂèëÁé∞ÂíåË¥üËΩΩÂùáË°°„ÄÇ</p>
<p><img src="/D:/Learning\PersonalBlog\CodeChenBlog\source_posts\k8s-base\Snipaste_2022-04-14_16-45-06.jpg"></p>
<p><strong>Êìç‰Ωú‰∏ÄÔºöÂàõÂª∫ÈõÜÁæ§ÂÜÖÈÉ®ÂèØËÆøÈóÆÁöÑService</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Êö¥Èú≤Service</span></span><br><span class="line">[root@master ~]# kubectl expose deployment nginx --name=svc-nginx1 --type=ClusterIP --port=80 --target-port=80 -n dev</span><br><span class="line">service/svc-nginx1 exposed</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãService</span></span><br><span class="line">[root@master ~]# kubectl get service -n dev</span><br><span class="line">NAME         TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)   AGE</span><br><span class="line">svc-nginx1   ClusterIP   10.109.108.87   &lt;none&gt;        80/TCP    36s</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ËøôÈáå‰∫ßÁîü‰∫Ü‰∏Ä‰∏™CLUSTER-IPÔºåËøôÂ∞±ÊòØserviceÁöÑIPÔºåÂú®ServiceÁöÑÁîüÂëΩÂë®Êúü‰∏≠ÔºåËøô‰∏™Âú∞ÂùÄÊòØ‰∏ç‰ºöÂèòÂä®ÁöÑ</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÂèØ‰ª•ÈÄöËøáËøô‰∏™IPËÆøÈóÆÂΩìÂâçserviceÂØπÂ∫îÁöÑPOD</span></span><br><span class="line">[root@master ~]# curl 10.105.233.217:80</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Welcome to nginx!&lt;/title&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">    body &#123;</span><br><span class="line">        width: 35em;</span><br><span class="line">        margin: 0 auto;</span><br><span class="line">        font-family: Tahoma, Verdana, Arial, sans-serif;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;If you see this page, the nginx web server is successfully installed and</span><br><span class="line">working. Further configuration is required.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;For online documentation and support please refer to</span><br><span class="line">&lt;a href=&quot;http://nginx.org/&quot;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;</span><br><span class="line">Commercial support is available at</span><br><span class="line">&lt;a href=&quot;http://nginx.com/&quot;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<p><strong>Êìç‰Ωú‰∫åÔºöÂàõÂª∫ÈõÜÁæ§Â§ñÈÉ®‰πüÂèØËÆøÈóÆÁöÑService</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ‰∏äÈù¢ÂàõÂª∫ÁöÑServiceÁöÑ<span class="built_in">type</span>Á±ªÂûã‰∏∫ClusterIPÔºåËøô‰∏™ipÂú∞ÂùÄÂè™ÊúâÈõÜÁæ§ÂÜÖÈÉ®ÂèØËÆøÈóÆ</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Â¶ÇÊûúÈúÄË¶ÅÂàõÂª∫Â§ñÈÉ®‰πüÂèØ‰ª•ËÆøÈóÆÁöÑServiceÔºåÈúÄË¶Å‰øÆÊîπ<span class="built_in">type</span>‰∏∫NodePort</span></span><br><span class="line">[root@master ~]# kubectl expose deploy nginx --name=svc-nginx2 --type=NodePort --port=80 --target-port=80 -n dev</span><br><span class="line">service/svc-nginx2 exposed</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Ê≠§Êó∂Êü•ÁúãÔºå‰ºöÂèëÁé∞Âá∫Áé∞NodePortÁ±ªÂûãÁöÑServiceÔºåËÄå‰∏îÊúâ‰∏ÄÂØπPortÔºà80:31874/TCPÔºâ</span></span><br><span class="line">[root@master ~]# kubectl get svc -n dev -o wide</span><br><span class="line">NAME         TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)        AGE   SELECTOR</span><br><span class="line">svc-nginx1   ClusterIP   10.105.233.217   &lt;none&gt;        80/TCP         25m   run=nginx</span><br><span class="line">svc-nginx2   NodePort    10.106.143.53    &lt;none&gt;        80:31874/TCP   51s   run=nginx</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êé•‰∏ãÊù•Â∞±ÂèØ‰ª•ÈÄöËøáÈõÜÁæ§Â§ñÁöÑ‰∏ªÊú∫ËÆøÈóÆ ËäÇÁÇπIPÔºö31928ËÆøÈóÆÊúçÂä°‰∫Ü</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ‰æãÂ¶ÇÂú®ÁîµËÑë‰∏ªÊú∫‰∏äÈÄöËøáÊµèËßàÂô®ËÆøÈóÆ„ÄÅ</span></span><br><span class="line">192.168.59.100:32160</span><br></pre></td></tr></table></figure>

<p><img src="/D:/Learning\PersonalBlog\CodeChenBlog\source_posts\k8s-base\Snipaste_2022-04-14_17-30-32.jpg"></p>
<p><strong>Âà†Èô§Service</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl delete svc svc-nginx1 -n dev </span><br><span class="line">service &quot;svc-nginx1&quot; deleted</span><br></pre></td></tr></table></figure>



<p><strong>ÈÖçÁΩÆÊñπÂºè</strong></p>
<p>ÂàõÂª∫‰∏Ä‰∏™svc-nginx.yamlÔºåÂÜÖÂÆπÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">svc-nginx</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec :</span></span><br><span class="line">  <span class="attr">ClusterIP:</span> <span class="number">10.109</span><span class="number">.179</span><span class="number">.231</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">port :</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">    <span class="attr">targetPort:</span> <span class="number">80</span></span><br><span class="line">  <span class="attr">selector :</span></span><br><span class="line">    <span class="attr">run :</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">ClusterIP</span>  <span class="comment"># ËøôÈáåÊåáÂÆöClusterIPÔºå‰∏äÈù¢ClusterIPÂèØÂÜôÂèØ‰∏çÂÜôÔºåÂÜô‰∫ÜÂ∞±ÊåáÂÆöip</span></span><br></pre></td></tr></table></figure>

<p>ÁÑ∂ÂêéÂ∞±ÂèØ‰ª•ÊâßË°åÂØπÂ∫îÁöÑÂàõÂª∫ÂíåÂà†Èô§ÂëΩ‰ª§‰∫ÜÔºö</p>
<p>‚Äã    ÂàõÂª∫Ôºökubectl create -f svc-nginx.yaml</p>
<p>‚Äã    Âà†Èô§Ôºökubectl delete -f svc-nginx.yaml</p>
<h1 id="PodËØ¶Ëß£"><a href="#PodËØ¶Ëß£" class="headerlink" title="PodËØ¶Ëß£"></a>PodËØ¶Ëß£</h1><h2 id="Pod‰ªãÁªç"><a href="#Pod‰ªãÁªç" class="headerlink" title="Pod‰ªãÁªç"></a>Pod‰ªãÁªç</h2><h3 id="PodÁªìÊûÑ"><a href="#PodÁªìÊûÑ" class="headerlink" title="PodÁªìÊûÑ"></a>PodÁªìÊûÑ</h3><p><img src="/D:/Learning\PersonalBlog\CodeChenBlog\source_posts\k8s-base\Snipaste_2022-04-14_14-54-11.jpg"></p>
<p>ÊØè‰∏™Pod‰∏≠ÈÉΩÂèØ‰ª•ÂåÖÂê´‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™ÂÆπÂô®ÔºåËøô‰∫õÂÆπÊòìÂèØ‰ª•ÂàÜ‰∏∫‰∏§Á±ªÔºö</p>
<ul>
<li><p>Áî®Êà∑Á®ãÂ∫èÊâÄÂú®Á®ãÂ∫èÔºåÊï∞ÈáèÂèØÂ§öÂèØÂ∞ë</p>
</li>
<li><p>PauseÂÆπÂô®ÔºåËøôÊòØÊØè‰∏™PodÈÉΩ‰ºöÊúâÁöÑ‰∏Ä‰∏™Ê†πÂÆπÂô®ÔºåÂÆÉÁöÑ‰ΩúÁî®Êúâ‰∏§‰∏™Ôºö</p>
<ul>
<li><p>ÂèØ‰ª•‰ª•ÂÆÉ‰∏∫‰æùÊçÆÔºåËØÑ‰º∞Êï¥‰∏™podÁöÑÂÅ•Â∫∑Áä∂ÊÄÅ</p>
</li>
<li><p>ÂèØ‰ª•Âú®Ê†πÂÆπÂô®‰∏äËÆæÁΩÆipÂú∞ÂùÄÔºåÂÖ∂ÂÆÉÂÆπÂô®ÈÉΩÂÖ±‰∫´Ê≠§IPÔºàPod IPÔºâÔºå‰ª•ÂÆûÁé∞PodÂÜÖÈÉ®ÁöÑÁΩëÁªúÈÄö‰ø°</p>
<p>ËøôÈáåÊòØpodÂÜÖÈÉ®ÁöÑÈÄö‰ø°Ôºåpod‰πãÈó¥ÁöÑÈÄö‰ø°ÈááÁî®ËôöÊãü‰∫åÂ±ÇÁΩëÁªúÊäÄÊúØÊù•ÂÆûÁé∞ÔºåÊàë‰ª¨ÂΩìÂâçÁéØÂ¢ÉÁî®ÁöÑÊòØFlannel</p>
</li>
</ul>
</li>
</ul>
<h3 id="PodÂÆö‰πâ"><a href="#PodÂÆö‰πâ" class="headerlink" title="PodÂÆö‰πâ"></a>PodÂÆö‰πâ</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span>     <span class="comment">#ÂøÖÈÄâÔºåÁâàÊú¨Âè∑Ôºå‰æãÂ¶Çv1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span>       „ÄÄ <span class="comment">#ÂøÖÈÄâÔºåËµÑÊ∫êÁ±ªÂûãÔºå‰æãÂ¶Ç Pod</span></span><br><span class="line"><span class="attr">metadata:</span>       „ÄÄ <span class="comment">#ÂøÖÈÄâÔºåÂÖÉÊï∞ÊçÆ</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">string</span>     <span class="comment">#ÂøÖÈÄâÔºåPodÂêçÁß∞</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">string</span>  <span class="comment">#PodÊâÄÂ±ûÁöÑÂëΩÂêçÁ©∫Èó¥,ÈªòËÆ§‰∏∫&quot;default&quot;</span></span><br><span class="line">  <span class="attr">labels:</span>       „ÄÄ„ÄÄ  <span class="comment">#Ëá™ÂÆö‰πâÊ†áÁ≠æÂàóË°®</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">string</span>      „ÄÄ          </span><br><span class="line"><span class="attr">spec:</span>  <span class="comment">#ÂøÖÈÄâÔºåPod‰∏≠ÂÆπÂô®ÁöÑËØ¶ÁªÜÂÆö‰πâ</span></span><br><span class="line">  <span class="attr">containers:</span>  <span class="comment">#ÂøÖÈÄâÔºåPod‰∏≠ÂÆπÂô®ÂàóË°®</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">string</span>   <span class="comment">#ÂøÖÈÄâÔºåÂÆπÂô®ÂêçÁß∞</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">string</span>  <span class="comment">#ÂøÖÈÄâÔºåÂÆπÂô®ÁöÑÈïúÂÉèÂêçÁß∞</span></span><br><span class="line">    <span class="attr">imagePullPolicy:</span> [ <span class="string">Always|Never|IfNotPresent</span> ]  <span class="comment">#Ëé∑ÂèñÈïúÂÉèÁöÑÁ≠ñÁï• </span></span><br><span class="line">    <span class="attr">command:</span> [<span class="string">string</span>]   <span class="comment">#ÂÆπÂô®ÁöÑÂêØÂä®ÂëΩ‰ª§ÂàóË°®ÔºåÂ¶Ç‰∏çÊåáÂÆöÔºå‰ΩøÁî®ÊâìÂåÖÊó∂‰ΩøÁî®ÁöÑÂêØÂä®ÂëΩ‰ª§</span></span><br><span class="line">    <span class="attr">args:</span> [<span class="string">string</span>]      <span class="comment">#ÂÆπÂô®ÁöÑÂêØÂä®ÂëΩ‰ª§ÂèÇÊï∞ÂàóË°®</span></span><br><span class="line">    <span class="attr">workingDir:</span> <span class="string">string</span>  <span class="comment">#ÂÆπÂô®ÁöÑÂ∑•‰ΩúÁõÆÂΩï</span></span><br><span class="line">    <span class="attr">volumeMounts:</span>       <span class="comment">#ÊåÇËΩΩÂà∞ÂÆπÂô®ÂÜÖÈÉ®ÁöÑÂ≠òÂÇ®Âç∑ÈÖçÁΩÆ</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">string</span>      <span class="comment">#ÂºïÁî®podÂÆö‰πâÁöÑÂÖ±‰∫´Â≠òÂÇ®Âç∑ÁöÑÂêçÁß∞ÔºåÈúÄÁî®volumes[]ÈÉ®ÂàÜÂÆö‰πâÁöÑÁöÑÂç∑Âêç</span></span><br><span class="line">      <span class="attr">mountPath:</span> <span class="string">string</span> <span class="comment">#Â≠òÂÇ®Âç∑Âú®ÂÆπÂô®ÂÜÖmountÁöÑÁªùÂØπË∑ØÂæÑÔºåÂ∫îÂ∞ë‰∫é512Â≠óÁ¨¶</span></span><br><span class="line">      <span class="attr">readOnly:</span> <span class="string">boolean</span> <span class="comment">#ÊòØÂê¶‰∏∫Âè™ËØªÊ®°Âºè</span></span><br><span class="line">    <span class="attr">ports:</span> <span class="comment">#ÈúÄË¶ÅÊö¥Èú≤ÁöÑÁ´ØÂè£Â∫ìÂè∑ÂàóË°®</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">string</span>        <span class="comment">#Á´ØÂè£ÁöÑÂêçÁß∞</span></span><br><span class="line">      <span class="attr">containerPort:</span> <span class="string">int</span>  <span class="comment">#ÂÆπÂô®ÈúÄË¶ÅÁõëÂê¨ÁöÑÁ´ØÂè£Âè∑</span></span><br><span class="line">      <span class="attr">hostPort:</span> <span class="string">int</span>       <span class="comment">#ÂÆπÂô®ÊâÄÂú®‰∏ªÊú∫ÈúÄË¶ÅÁõëÂê¨ÁöÑÁ´ØÂè£Âè∑ÔºåÈªòËÆ§‰∏éContainerÁõ∏Âêå</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">string</span>    <span class="comment">#Á´ØÂè£ÂçèËÆÆÔºåÊîØÊåÅTCPÂíåUDPÔºåÈªòËÆ§TCP</span></span><br><span class="line">    <span class="attr">env:</span>   <span class="comment">#ÂÆπÂô®ËøêË°åÂâçÈúÄËÆæÁΩÆÁöÑÁéØÂ¢ÉÂèòÈáèÂàóË°®</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">string</span>  <span class="comment">#ÁéØÂ¢ÉÂèòÈáèÂêçÁß∞</span></span><br><span class="line">      <span class="attr">value:</span> <span class="string">string</span> <span class="comment">#ÁéØÂ¢ÉÂèòÈáèÁöÑÂÄº</span></span><br><span class="line">    <span class="attr">resources:</span> <span class="comment">#ËµÑÊ∫êÈôêÂà∂ÂíåËØ∑Ê±ÇÁöÑËÆæÁΩÆ</span></span><br><span class="line">      <span class="attr">limits:</span>  <span class="comment">#ËµÑÊ∫êÈôêÂà∂ÁöÑËÆæÁΩÆ</span></span><br><span class="line">        <span class="attr">cpu:</span> <span class="string">string</span>     <span class="comment">#CpuÁöÑÈôêÂà∂ÔºåÂçï‰Ωç‰∏∫coreÊï∞ÔºåÂ∞ÜÁî®‰∫édocker run --cpu-sharesÂèÇÊï∞</span></span><br><span class="line">        <span class="attr">memory:</span> <span class="string">string</span>  <span class="comment">#ÂÜÖÂ≠òÈôêÂà∂ÔºåÂçï‰ΩçÂèØ‰ª•‰∏∫Mib/GibÔºåÂ∞ÜÁî®‰∫édocker run --memoryÂèÇÊï∞</span></span><br><span class="line">      <span class="attr">requests:</span> <span class="comment">#ËµÑÊ∫êËØ∑Ê±ÇÁöÑËÆæÁΩÆ</span></span><br><span class="line">        <span class="attr">cpu:</span> <span class="string">string</span>    <span class="comment">#CpuËØ∑Ê±ÇÔºåÂÆπÂô®ÂêØÂä®ÁöÑÂàùÂßãÂèØÁî®Êï∞Èáè</span></span><br><span class="line">        <span class="attr">memory:</span> <span class="string">string</span> <span class="comment">#ÂÜÖÂ≠òËØ∑Ê±Ç,ÂÆπÂô®ÂêØÂä®ÁöÑÂàùÂßãÂèØÁî®Êï∞Èáè</span></span><br><span class="line">    <span class="attr">lifecycle:</span> <span class="comment">#ÁîüÂëΩÂë®ÊúüÈí©Â≠ê</span></span><br><span class="line">        <span class="attr">postStart:</span> <span class="comment">#ÂÆπÂô®ÂêØÂä®ÂêéÁ´ãÂç≥ÊâßË°åÊ≠§Èí©Â≠ê,Â¶ÇÊûúÊâßË°åÂ§±Ë¥•,‰ºöÊ†πÊçÆÈáçÂêØÁ≠ñÁï•ËøõË°åÈáçÂêØ</span></span><br><span class="line">        <span class="attr">preStop:</span> <span class="comment">#ÂÆπÂô®ÁªàÊ≠¢ÂâçÊâßË°åÊ≠§Èí©Â≠ê,Êó†ËÆ∫ÁªìÊûúÂ¶Ç‰Ωï,ÂÆπÂô®ÈÉΩ‰ºöÁªàÊ≠¢</span></span><br><span class="line">    <span class="attr">livenessProbe:</span>  <span class="comment">#ÂØπPodÂÜÖÂêÑÂÆπÂô®ÂÅ•Â∫∑Ê£ÄÊü•ÁöÑËÆæÁΩÆÔºåÂΩìÊé¢ÊµãÊó†ÂìçÂ∫îÂá†Ê¨°ÂêéÂ∞ÜËá™Âä®ÈáçÂêØËØ•ÂÆπÂô®</span></span><br><span class="line">      <span class="attr">exec:</span>       „ÄÄ <span class="comment">#ÂØπPodÂÆπÂô®ÂÜÖÊ£ÄÊü•ÊñπÂºèËÆæÁΩÆ‰∏∫execÊñπÂºè</span></span><br><span class="line">        <span class="attr">command:</span> [<span class="string">string</span>]  <span class="comment">#execÊñπÂºèÈúÄË¶ÅÂà∂ÂÆöÁöÑÂëΩ‰ª§ÊàñËÑöÊú¨</span></span><br><span class="line">      <span class="attr">httpGet:</span>       <span class="comment">#ÂØπPodÂÜÖ‰∏™ÂÆπÂô®ÂÅ•Â∫∑Ê£ÄÊü•ÊñπÊ≥ïËÆæÁΩÆ‰∏∫HttpGetÔºåÈúÄË¶ÅÂà∂ÂÆöPath„ÄÅport</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">string</span></span><br><span class="line">        <span class="attr">port:</span> <span class="string">number</span></span><br><span class="line">        <span class="attr">host:</span> <span class="string">string</span></span><br><span class="line">        <span class="attr">scheme:</span> <span class="string">string</span></span><br><span class="line">        <span class="attr">HttpHeaders:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">string</span></span><br><span class="line">          <span class="attr">value:</span> <span class="string">string</span></span><br><span class="line">      <span class="attr">tcpSocket:</span>     <span class="comment">#ÂØπPodÂÜÖ‰∏™ÂÆπÂô®ÂÅ•Â∫∑Ê£ÄÊü•ÊñπÂºèËÆæÁΩÆ‰∏∫tcpSocketÊñπÂºè</span></span><br><span class="line">         <span class="attr">port:</span> <span class="string">number</span></span><br><span class="line">       <span class="attr">initialDelaySeconds:</span> <span class="number">0</span>       <span class="comment">#ÂÆπÂô®ÂêØÂä®ÂÆåÊàêÂêéÈ¶ñÊ¨°Êé¢ÊµãÁöÑÊó∂Èó¥ÔºåÂçï‰Ωç‰∏∫Áßí</span></span><br><span class="line">       <span class="attr">timeoutSeconds:</span> <span class="number">0</span>    „ÄÄ„ÄÄ    <span class="comment">#ÂØπÂÆπÂô®ÂÅ•Â∫∑Ê£ÄÊü•Êé¢ÊµãÁ≠âÂæÖÂìçÂ∫îÁöÑË∂ÖÊó∂Êó∂Èó¥ÔºåÂçï‰ΩçÁßíÔºåÈªòËÆ§1Áßí</span></span><br><span class="line">       <span class="attr">periodSeconds:</span> <span class="number">0</span>     „ÄÄ„ÄÄ    <span class="comment">#ÂØπÂÆπÂô®ÁõëÊéßÊ£ÄÊü•ÁöÑÂÆöÊúüÊé¢ÊµãÊó∂Èó¥ËÆæÁΩÆÔºåÂçï‰ΩçÁßíÔºåÈªòËÆ§10Áßí‰∏ÄÊ¨°</span></span><br><span class="line">       <span class="attr">successThreshold:</span> <span class="number">0</span></span><br><span class="line">       <span class="attr">failureThreshold:</span> <span class="number">0</span></span><br><span class="line">       <span class="attr">securityContext:</span></span><br><span class="line">         <span class="attr">privileged:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">restartPolicy:</span> [<span class="string">Always</span> <span class="string">|</span> <span class="string">Never</span> <span class="string">|</span> <span class="string">OnFailure</span>]  <span class="comment">#PodÁöÑÈáçÂêØÁ≠ñÁï•</span></span><br><span class="line">  <span class="attr">nodeName:</span> <span class="string">&lt;string&gt;</span> <span class="comment">#ËÆæÁΩÆNodeNameË°®Á§∫Â∞ÜËØ•PodË∞ÉÂ∫¶Âà∞ÊåáÂÆöÂà∞ÂêçÁß∞ÁöÑnodeËäÇÁÇπ‰∏ä</span></span><br><span class="line">  <span class="attr">nodeSelector:</span> <span class="string">obeject</span> <span class="comment">#ËÆæÁΩÆNodeSelectorË°®Á§∫Â∞ÜËØ•PodË∞ÉÂ∫¶Âà∞ÂåÖÂê´Ëøô‰∏™labelÁöÑnode‰∏ä</span></span><br><span class="line">  <span class="attr">imagePullSecrets:</span> <span class="comment">#PullÈïúÂÉèÊó∂‰ΩøÁî®ÁöÑsecretÂêçÁß∞Ôºå‰ª•keyÔºösecretkeyÊ†ºÂºèÊåáÂÆö</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">string</span></span><br><span class="line">  <span class="attr">hostNetwork:</span> <span class="literal">false</span>   <span class="comment">#ÊòØÂê¶‰ΩøÁî®‰∏ªÊú∫ÁΩëÁªúÊ®°ÂºèÔºåÈªòËÆ§‰∏∫falseÔºåÂ¶ÇÊûúËÆæÁΩÆ‰∏∫trueÔºåË°®Á§∫‰ΩøÁî®ÂÆø‰∏ªÊú∫ÁΩëÁªú</span></span><br><span class="line">  <span class="attr">volumes:</span>   <span class="comment">#Âú®ËØ•pod‰∏äÂÆö‰πâÂÖ±‰∫´Â≠òÂÇ®Âç∑ÂàóË°®</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">string</span>    <span class="comment">#ÂÖ±‰∫´Â≠òÂÇ®Âç∑ÂêçÁß∞ ÔºàvolumesÁ±ªÂûãÊúâÂæàÂ§öÁßçÔºâ</span></span><br><span class="line">    <span class="attr">emptyDir:</span> &#123;&#125;       <span class="comment">#Á±ªÂûã‰∏∫emtyDirÁöÑÂ≠òÂÇ®Âç∑Ôºå‰∏éPodÂêåÁîüÂëΩÂë®ÊúüÁöÑ‰∏Ä‰∏™‰∏¥Êó∂ÁõÆÂΩï„ÄÇ‰∏∫Á©∫ÂÄº</span></span><br><span class="line">    <span class="attr">hostPath:</span> <span class="string">string</span>   <span class="comment">#Á±ªÂûã‰∏∫hostPathÁöÑÂ≠òÂÇ®Âç∑ÔºåË°®Á§∫ÊåÇËΩΩPodÊâÄÂú®ÂÆø‰∏ªÊú∫ÁöÑÁõÆÂΩï</span></span><br><span class="line">      <span class="attr">path:</span> <span class="string">string</span>      „ÄÄ„ÄÄ        <span class="comment">#PodÊâÄÂú®ÂÆø‰∏ªÊú∫ÁöÑÁõÆÂΩïÔºåÂ∞ÜË¢´Áî®‰∫éÂêåÊúü‰∏≠mountÁöÑÁõÆÂΩï</span></span><br><span class="line">    <span class="attr">secret:</span>       „ÄÄ„ÄÄ„ÄÄ<span class="comment">#Á±ªÂûã‰∏∫secretÁöÑÂ≠òÂÇ®Âç∑ÔºåÊåÇËΩΩÈõÜÁæ§‰∏éÂÆö‰πâÁöÑsecretÂØπË±°Âà∞ÂÆπÂô®ÂÜÖÈÉ®</span></span><br><span class="line">      <span class="attr">scretname:</span> <span class="string">string</span>  </span><br><span class="line">      <span class="attr">items:</span>     </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">string</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">string</span></span><br><span class="line">    <span class="attr">configMap:</span>         <span class="comment">#Á±ªÂûã‰∏∫configMapÁöÑÂ≠òÂÇ®Âç∑ÔºåÊåÇËΩΩÈ¢ÑÂÆö‰πâÁöÑconfigMapÂØπË±°Âà∞ÂÆπÂô®ÂÜÖÈÉ®</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">string</span></span><br><span class="line">      <span class="attr">items:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">string</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">string</span></span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">Â∞èÊèêÁ§∫Ôºö</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   Âú®ËøôÈáåÔºåÂèØÈÄöËøá‰∏Ä‰∏™ÂëΩ‰ª§Êù•Êü•ÁúãÊØèÁßçËµÑÊ∫êÁöÑÂèØÈÖçÁΩÆÈ°π</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   kubectl explain ËµÑÊ∫êÁ±ªÂûã         Êü•ÁúãÊüêÁßçËµÑÊ∫êÂèØ‰ª•ÈÖçÁΩÆÁöÑ‰∏ÄÁ∫ßÂ±ûÊÄß</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   kubectl explain ËµÑÊ∫êÁ±ªÂûã.Â±ûÊÄß     Êü•ÁúãÂ±ûÊÄßÁöÑÂ≠êÂ±ûÊÄß</span></span><br><span class="line">[root@master ~]# kubectl explain pod</span><br><span class="line">KIND:     Pod</span><br><span class="line">VERSION:  v1</span><br><span class="line"></span><br><span class="line">DESCRIPTION:</span><br><span class="line">     Pod is a collection of containers that can run on a host. This resource is</span><br><span class="line">     created by clients and scheduled onto hosts.</span><br><span class="line"></span><br><span class="line">FIELDS:</span><br><span class="line">   apiVersion	&lt;string&gt;</span><br><span class="line">     APIVersion defines the versioned schema of this representation of an</span><br><span class="line">     object. Servers should convert recognized schemas to the latest internal</span><br><span class="line">     value, and may reject unrecognized values. More info:</span><br><span class="line">     https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources</span><br><span class="line"></span><br><span class="line">   kind	&lt;string&gt;</span><br><span class="line">     Kind is a string value representing the REST resource this object</span><br><span class="line">     represents. Servers may infer this from the endpoint the client submits</span><br><span class="line">     requests to. Cannot be updated. In CamelCase. More info:</span><br><span class="line">     https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds</span><br><span class="line"></span><br><span class="line">   metadata	&lt;Object&gt;</span><br><span class="line">     Standard object&#x27;s metadata. More info:</span><br><span class="line">     https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata</span><br><span class="line"></span><br><span class="line">   spec	&lt;Object&gt;</span><br><span class="line">     Specification of the desired behavior of the pod. More info:</span><br><span class="line">     https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status</span><br><span class="line"></span><br><span class="line">   status	&lt;Object&gt;</span><br><span class="line">     Most recently observed status of the pod. This data may not be up to date.</span><br><span class="line">     Populated by the system. Read-only. More info:</span><br><span class="line">     https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status</span><br></pre></td></tr></table></figure>

<p>Âú®kubernetes‰∏≠Âü∫Êú¨ÊâÄÊúâËµÑÊ∫êÁöÑ‰∏ÄÁ∫ßÂ±ûÊÄßÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑÔºå‰∏ªË¶ÅÂåÖÂê´5ÈÉ®ÂàÜÔºö</p>
<ul>
<li>apiVersion ÁâàÊú¨ÔºåÁî±kubernetesÂÜÖÈÉ®ÂÆö‰πâÔºåÁâàÊú¨Âè∑ÂøÖÈ°ªÂèØ‰ª•Áî® kubectl api-versions Êü•ËØ¢Âà∞</li>
<li>kind Á±ªÂûãÔºåÁî±kubernetesÂÜÖÈÉ®ÂÆö‰πâÔºåÁâàÊú¨Âè∑ÂøÖÈ°ªÂèØ‰ª•Áî® kubectl api-resources Êü•ËØ¢Âà∞</li>
<li>metadata ÂÖÉÊï∞ÊçÆÔºå‰∏ªË¶ÅÊòØËµÑÊ∫êÊ†áËØÜÂíåËØ¥ÊòéÔºåÂ∏∏Áî®ÁöÑÊúâname„ÄÅnamespace„ÄÅlabelsÁ≠â</li>
<li>spec ÊèèËø∞ÔºåËøôÊòØÈÖçÁΩÆ‰∏≠ÊúÄÈáçË¶ÅÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÈáåÈù¢ÊòØÂØπÂêÑÁßçËµÑÊ∫êÈÖçÁΩÆÁöÑËØ¶ÁªÜÊèèËø∞</li>
<li>status Áä∂ÊÄÅ‰ø°ÊÅØÔºåÈáåÈù¢ÁöÑÂÜÖÂÆπ‰∏çÈúÄË¶ÅÂÆö‰πâÔºåÁî±kubernetesËá™Âä®ÁîüÊàê</li>
</ul>
<p>Âú®‰∏äÈù¢ÁöÑÂ±ûÊÄß‰∏≠ÔºåspecÊòØÊé•‰∏ãÊù•Á†îÁ©∂ÁöÑÈáçÁÇπÔºåÁªßÁª≠Áúã‰∏ãÂÆÉÁöÑÂ∏∏ËßÅÂ≠êÂ±ûÊÄß:</p>
<ul>
<li>containers &lt;[]Object&gt; ÂÆπÂô®ÂàóË°®ÔºåÁî®‰∫éÂÆö‰πâÂÆπÂô®ÁöÑËØ¶ÁªÜ‰ø°ÊÅØ</li>
<li>nodeName Ê†πÊçÆnodeNameÁöÑÂÄºÂ∞ÜpodË∞ÉÂ∫¶Âà∞ÊåáÂÆöÁöÑNodeËäÇÁÇπ‰∏ä</li>
<li>nodeSelector &lt;map[]&gt; Ê†πÊçÆNodeSelector‰∏≠ÂÆö‰πâÁöÑ‰ø°ÊÅØÈÄâÊã©Â∞ÜËØ•PodË∞ÉÂ∫¶Âà∞ÂåÖÂê´Ëøô‰∫õlabelÁöÑNode ‰∏ä</li>
<li>hostNetwork ÊòØÂê¶‰ΩøÁî®‰∏ªÊú∫ÁΩëÁªúÊ®°ÂºèÔºåÈªòËÆ§‰∏∫falseÔºåÂ¶ÇÊûúËÆæÁΩÆ‰∏∫trueÔºåË°®Á§∫‰ΩøÁî®ÂÆø‰∏ªÊú∫ÁΩëÁªú</li>
<li>volumes &lt;[]Object&gt; Â≠òÂÇ®Âç∑ÔºåÁî®‰∫éÂÆö‰πâPod‰∏äÈù¢ÊåÇÂú®ÁöÑÂ≠òÂÇ®‰ø°ÊÅØ</li>
<li>restartPolicy ÈáçÂêØÁ≠ñÁï•ÔºåË°®Á§∫PodÂú®ÈÅáÂà∞ÊïÖÈöúÁöÑÊó∂ÂÄôÁöÑÂ§ÑÁêÜÁ≠ñÁï•</li>
</ul>
<h2 id="PodÈÖçÁΩÆ"><a href="#PodÈÖçÁΩÆ" class="headerlink" title="PodÈÖçÁΩÆ"></a>PodÈÖçÁΩÆ</h2><p>Êú¨Â∞èËäÇ‰∏ªË¶ÅÁ†îÁ©∂pod.spec.containersÂ±ûÊÄßÔºåËøô‰πüÊòØpodÈÖçÁΩÆ‰∏≠ÊúÄ‰∏∫ÂÖ≥ÈîÆÁöÑ‰∏ÄÈ°πÈÖçÁΩÆ„ÄÇ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl explain pod.spec.containers</span><br><span class="line">KIND:     Pod</span><br><span class="line">VERSION:  v1</span><br><span class="line">RESOURCE: containers &lt;[]Object&gt;   # Êï∞ÁªÑÔºå‰ª£Ë°®ÂèØ‰ª•ÊúâÂ§ö‰∏™ÂÆπÂô®</span><br><span class="line">FIELDS:</span><br><span class="line">   name  &lt;string&gt;     # ÂÆπÂô®ÂêçÁß∞</span><br><span class="line">   image &lt;string&gt;     # ÂÆπÂô®ÈúÄË¶ÅÁöÑÈïúÂÉèÂú∞ÂùÄ</span><br><span class="line">   imagePullPolicy  &lt;string&gt; # ÈïúÂÉèÊãâÂèñÁ≠ñÁï• </span><br><span class="line">   command  &lt;[]string&gt; # ÂÆπÂô®ÁöÑÂêØÂä®ÂëΩ‰ª§ÂàóË°®ÔºåÂ¶Ç‰∏çÊåáÂÆöÔºå‰ΩøÁî®ÊâìÂåÖÊó∂‰ΩøÁî®ÁöÑÂêØÂä®ÂëΩ‰ª§</span><br><span class="line">   args     &lt;[]string&gt; # ÂÆπÂô®ÁöÑÂêØÂä®ÂëΩ‰ª§ÈúÄË¶ÅÁöÑÂèÇÊï∞ÂàóË°®</span><br><span class="line">   env      &lt;[]Object&gt; # ÂÆπÂô®ÁéØÂ¢ÉÂèòÈáèÁöÑÈÖçÁΩÆ</span><br><span class="line">   ports    &lt;[]Object&gt;     # ÂÆπÂô®ÈúÄË¶ÅÊö¥Èú≤ÁöÑÁ´ØÂè£Âè∑ÂàóË°®</span><br><span class="line">   resources &lt;Object&gt;      # ËµÑÊ∫êÈôêÂà∂ÂíåËµÑÊ∫êËØ∑Ê±ÇÁöÑËÆæÁΩÆ</span><br></pre></td></tr></table></figure>



<h3 id="Âü∫Êú¨ÈÖçÁΩÆ"><a href="#Âü∫Êú¨ÈÖçÁΩÆ" class="headerlink" title="Âü∫Êú¨ÈÖçÁΩÆ"></a>Âü∫Êú¨ÈÖçÁΩÆ</h3><p>ÂàõÂª∫pod-base.yamlÊñá‰ª∂ÔºåÂÜÖÂÆπÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-base</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">user:</span> <span class="string">codeChen</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">busybox</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">busybox:1.30</span></span><br></pre></td></tr></table></figure>

<p>‰∏äÈù¢ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÊØîËæÉÁÆÄÂçïPodÁöÑÈÖçÁΩÆÔºåÈáåÈù¢Êúâ‰∏§‰∏™ÂÆπÂô®Ôºö</p>
<ul>
<li>nginxÔºöÁî®1.17.1ÁâàÊú¨ÁöÑnginxÈïúÂÉèÂàõÂª∫ÔºåÔºànginxÊòØ‰∏Ä‰∏™ËΩªÈáèÁ∫ßwebÂÆπÂô®Ôºâ</li>
<li>busyboxÔºöÁî®1.30ÁâàÊú¨ÁöÑbusyboxÈïúÂÉèÂàõÂª∫ÔºåÔºàbusyboxÊòØ‰∏Ä‰∏™Â∞èÂ∑ßÁöÑlinuxÂëΩ‰ª§ÈõÜÂêàÔºâ</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ÂàõÂª∫Pod</span></span><br><span class="line">[root@master pod]# kubectl apply -f pod-base.yaml</span><br><span class="line">pod/pod-base created</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãPodÁä∂ÂÜµ</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> READY 1/2 : Ë°®Á§∫ÂΩìÂâçPod‰∏≠Êúâ2‰∏™ÂÆπÂô®ÔºåÂÖ∂‰∏≠1‰∏™ÂáÜÂ§áÂ∞±Áª™Ôºå1‰∏™Êú™Â∞±Áª™</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> RESTARTS  : ÈáçÂêØÊ¨°Êï∞ÔºåÂõ†‰∏∫Êúâ1‰∏™ÂÆπÂô®ÊïÖÈöú‰∫ÜÔºåPod‰∏ÄÁõ¥Âú®ÈáçÂêØËØïÂõæÊÅ¢Â§çÂÆÉ</span></span><br><span class="line">[root@master pod]# kubectl get pod -n dev</span><br><span class="line">NAME       READY   STATUS    RESTARTS   AGE</span><br><span class="line">pod-base   1/2     Running   4          95s</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÂèØ‰ª•ÈÄöËøádescribeÊü•ÁúãÂÜÖÈÉ®ÁöÑËØ¶ÊÉÖ</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Ê≠§Êó∂Â∑≤ÁªèËøêË°åËµ∑Êù•‰∫Ü‰∏Ä‰∏™Âü∫Êú¨ÁöÑPodÔºåËôΩÁÑ∂ÂÆÉÊöÇÊó∂ÊúâÈóÆÈ¢ò</span></span><br><span class="line">[root@master01 pod]# kubectl describe pod pod-base -n dev</span><br></pre></td></tr></table></figure>



<h3 id="ÈïúÂÉèÊãâÂèñ"><a href="#ÈïúÂÉèÊãâÂèñ" class="headerlink" title="ÈïúÂÉèÊãâÂèñ"></a>ÈïúÂÉèÊãâÂèñ</h3><p>ÂàõÂª∫pod.imagepullpolicy.yamlÊñá‰ª∂ÔºåÂÜÖÂÆπÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-imagepullpolicy</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">    <span class="attr">imagePullPolicy:</span> <span class="string">Always</span> <span class="comment"># Áî®‰∫éËÆæÁΩÆÈïúÂÉèÊãâÂèñÁ≠ñÁï•</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">busybox</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">busybox:1.30</span></span><br></pre></td></tr></table></figure>

<p>imagePullPolicyÔºåÁî®‰∫éËÆæÁΩÆÈïúÂÉèÊãâÂèñÁ≠ñÁï•ÔºåkubernetesÊîØÊåÅÈÖçÁΩÆ‰∏âÁßçÊãâÂèñÁ≠ñÁï•Ôºö</p>
<ul>
<li>AlwaysÔºöÊÄªÊòØ‰ªéËøúÁ®ã‰ªìÂ∫ìÊãâÂèñÈïúÂÉèÔºà‰∏ÄÁõ¥ËøúÁ®ã‰∏ãËΩΩÔºâ</li>
<li>IfNotPresentÔºöÊú¨Âú∞ÊúâÂàô‰ΩøÁî®Êú¨Âú∞ÈïúÂÉèÔºåÊú¨Âú∞Ê≤°ÊúâÂàô‰ªéËøúÁ®ã‰ªìÂ∫ìÊãâÂèñÈïúÂÉèÔºàÊú¨Âú∞ÊúâÂ∞±Êú¨Âú∞ Êú¨Âú∞Ê≤°Â∞±ËøúÁ®ã‰∏ãËΩΩÔºâ</li>
<li>NeverÔºöÂè™‰ΩøÁî®Êú¨Âú∞ÈïúÂÉèÔºå‰ªé‰∏çÂéªËøúÁ®ã‰ªìÂ∫ìÊãâÂèñÔºåÊú¨Âú∞Ê≤°ÊúâÂ∞±Êä•Èîô Ôºà‰∏ÄÁõ¥‰ΩøÁî®Êú¨Âú∞Ôºâ</li>
</ul>
<blockquote>
<p> ÈªòËÆ§ÂÄºËØ¥ÊòéÔºö</p>
<p>‚Äã    Â¶ÇÊûúÈïúÂÉètag‰∏∫ÂÖ∑‰ΩìÁâàÊú¨Âè∑Ôºå ÈªòËÆ§Á≠ñÁï•ÊòØÔºöIfNotPresent</p>
<p>‚Äã    Â¶ÇÊûúÈïúÂÉètag‰∏∫ÔºölatestÔºàÊúÄÁªàÁâàÊú¨Ôºâ ÔºåÈªòËÆ§Á≠ñÁï•ÊòØalways</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># ÂàõÂª∫Pod</span><br><span class="line">[root@master pod]# kubectl create -f pod-imagepullpolicy.yaml</span><br><span class="line">pod/pod-imagepullpolicy created</span><br><span class="line"></span><br><span class="line"># Êü•ÁúãPodËØ¶ÊÉÖ</span><br><span class="line"># Ê≠§Êó∂ÊòéÊòæÂèØ‰ª•ÁúãÂà∞nginxÈïúÂÉèÊúâ‰∏ÄÊ≠•Pulling image &quot;nginx:1.17.1&quot;ÁöÑËøáÁ®ã</span><br><span class="line">[root@master01 pod]# kubectl describe pod pod-imagepullpolicy -n dev</span><br><span class="line">......</span><br><span class="line">Events:</span><br><span class="line">  Type     Reason     Age               From               Message</span><br><span class="line">  ----     ------     ----              ----               -------</span><br><span class="line">  Normal   Scheduled  &lt;unknown&gt;         default-scheduler  Successfully assigned dev/pod-imagePullPolicy to node1</span><br><span class="line">  Normal   Pulling    32s               kubelet, node1     Pulling image &quot;nginx:1.17.1&quot;</span><br><span class="line">  Normal   Pulled     26s               kubelet, node1     Successfully pulled image &quot;nginx:1.17.1&quot;</span><br><span class="line">  Normal   Created    26s               kubelet, node1     Created container nginx</span><br><span class="line">  Normal   Started    25s               kubelet, node1     Started container nginx</span><br><span class="line">  Normal   Pulled     7s (x3 over 25s)  kubelet, node1     Container image &quot;busybox:1.30&quot; already present on machine</span><br><span class="line">  Normal   Created    7s (x3 over 25s)  kubelet, node1     Created container busybox</span><br><span class="line">  Normal   Started    7s (x3 over 25s)  kubelet, node1     Started container busybox</span><br></pre></td></tr></table></figure>

<h3 id="ÂêØÂä®ÂëΩ‰ª§"><a href="#ÂêØÂä®ÂëΩ‰ª§" class="headerlink" title="ÂêØÂä®ÂëΩ‰ª§"></a>ÂêØÂä®ÂëΩ‰ª§</h3><p>Âú®ÂâçÈù¢ÁöÑÊ°à‰æã‰∏≠Ôºå‰∏ÄÁõ¥Êúâ‰∏Ä‰∏™ÈóÆÈ¢òÊ≤°ÊúâËß£ÂÜ≥ÔºåÂ∞±ÊòØÁöÑbusyboxÂÆπÂô®‰∏ÄÁõ¥Ê≤°ÊúâÊàêÂäüËøêË°åÔºåÈÇ£‰πàÂà∞Â∫ïÊòØ‰ªÄ‰πàÂéüÂõ†ÂØºËá¥Ëøô‰∏™ÂÆπÂô®ÁöÑÊïÖÈöúÂë¢Ôºü</p>
<p>ÂéüÊù•busyboxÂπ∂‰∏çÊòØ‰∏Ä‰∏™Á®ãÂ∫èÔºåËÄåÊòØÁ±ª‰ºº‰∫é‰∏Ä‰∏™Â∑•ÂÖ∑Á±ªÁöÑÈõÜÂêàÔºåkubernetesÈõÜÁæ§ÂêØÂä®ÁÆ°ÁêÜÂêéÔºåÂÆÉ‰ºöËá™Âä®ÂÖ≥Èó≠„ÄÇËß£ÂÜ≥ÊñπÊ≥ïÂ∞±ÊòØËÆ©ÂÖ∂‰∏ÄÁõ¥Âú®ËøêË°åÔºåËøôÂ∞±Áî®Âà∞‰∫ÜcommandÈÖçÁΩÆ„ÄÇ</p>
<p>ÂàõÂª∫pod-command.yamlÊñá‰ª∂ÔºåÂÜÖÂÆπÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-command</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">busybox</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">busybox:1.30</span></span><br><span class="line">    <span class="attr">command:</span> [<span class="string">&quot;/bin/sh&quot;</span>,<span class="string">&quot;-c&quot;</span>,<span class="string">&quot;touch /tmp/hello.txt;while true;do /bin/echo $(date +%T) &gt;&gt; /tmp/hello.txt; sleep 3; done;&quot;</span>]</span><br></pre></td></tr></table></figure>

<p>commandÔºåÁî®‰∫éÂú®pod‰∏≠ÁöÑÂÆπÂô®ÂàùÂßãÂåñÂÆåÊØï‰πãÂêéËøêË°å‰∏Ä‰∏™ÂëΩ‰ª§„ÄÇ</p>
<blockquote>
<p>Á®çÂæÆËß£Èáä‰∏ã‰∏äÈù¢ÂëΩ‰ª§ÁöÑÊÑèÊÄùÔºö</p>
<p>‚Äú/bin/sh‚Äù,‚Äù-c‚Äù, ‰ΩøÁî®shÊâßË°åÂëΩ‰ª§</p>
<p>touch /tmp/hello.txt; ÂàõÂª∫‰∏Ä‰∏™/tmp/hello.txt Êñá‰ª∂</p>
<p>while true;do /bin/echo $(date +%T) &gt;&gt; /tmp/hello.txt; sleep 3; done; ÊØèÈöî3ÁßíÂêëÊñá‰ª∂‰∏≠ÂÜôÂÖ•ÂΩìÂâçÊó∂Èó¥</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl create -f pod-command.yaml </span><br><span class="line">pod/pod-command created</span><br><span class="line">[root@master ~]# kubectl get pods -n dev</span><br><span class="line">NAME                  READY   STATUS             RESTARTS   AGE</span><br><span class="line">pod-base              1/2     CrashLoopBackOff   8          19m</span><br><span class="line">pod-command           2/2     Running            0          18s</span><br><span class="line">pod-imagepullpolicy   1/2     CrashLoopBackOff   6          6m10s</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ËøõÂÖ•pod‰∏≠ÁöÑbusyboxÂÆπÂô®ÔºåÊü•ÁúãÊñá‰ª∂ÂÜÖÂÆπ</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Ë°•ÂÖÖ‰∏Ä‰∏™ÂëΩ‰ª§: kubectl <span class="built_in">exec</span>  podÂêçÁß∞ -n ÂëΩÂêçÁ©∫Èó¥ -it -c ÂÆπÂô®ÂêçÁß∞ /bin/sh  Âú®ÂÆπÂô®ÂÜÖÈÉ®ÊâßË°åÂëΩ‰ª§</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ‰ΩøÁî®Ëøô‰∏™ÂëΩ‰ª§Â∞±ÂèØ‰ª•ËøõÂÖ•Êüê‰∏™ÂÆπÂô®ÁöÑÂÜÖÈÉ®ÔºåÁÑ∂ÂêéËøõË°åÁõ∏ÂÖ≥Êìç‰Ωú‰∫Ü</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÊØîÂ¶ÇÔºåÂèØ‰ª•Êü•ÁúãtxtÊñá‰ª∂ÁöÑÂÜÖÂÆπ</span></span><br><span class="line">[root@master ~]# kubectl exec pod-command -n dev -it -c busybox /bin/sh</span><br><span class="line">/ # tail -f /tmp/hello.txt</span><br><span class="line">14:10:55</span><br><span class="line">14:10:58</span><br><span class="line">14:11:01</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ÁâπÂà´ËØ¥ÊòéÔºö</span><br><span class="line">    ÈÄöËøá‰∏äÈù¢ÂèëÁé∞commandÂ∑≤ÁªèÂèØ‰ª•ÂÆåÊàêÂêØÂä®ÂëΩ‰ª§Âíå‰º†ÈÄíÂèÇÊï∞ÁöÑÂäüËÉΩÔºå‰∏∫‰ªÄ‰πàËøôÈáåËøòË¶ÅÊèê‰æõ‰∏Ä‰∏™argsÈÄâÈ°πÔºåÁî®‰∫é‰º†ÈÄíÂèÇÊï∞Âë¢?ËøôÂÖ∂ÂÆûË∑üdockerÊúâÁÇπÂÖ≥Á≥ªÔºåkubernetes‰∏≠ÁöÑcommand„ÄÅargs‰∏§È°πÂÖ∂ÂÆûÊòØÂÆûÁé∞Ë¶ÜÁõñDockerfile‰∏≠ENTRYPOINTÁöÑÂäüËÉΩ„ÄÇ</span><br><span class="line"> 1 Â¶ÇÊûúcommandÂíåargsÂùáÊ≤°ÊúâÂÜôÔºåÈÇ£‰πàÁî®DockerfileÁöÑÈÖçÁΩÆ„ÄÇ</span><br><span class="line"> 2 Â¶ÇÊûúcommandÂÜô‰∫ÜÔºå‰ΩÜargsÊ≤°ÊúâÂÜôÔºåÈÇ£‰πàDockerfileÈªòËÆ§ÁöÑÈÖçÁΩÆ‰ºöË¢´ÂøΩÁï•ÔºåÊâßË°åËæìÂÖ•ÁöÑcommand</span><br><span class="line"> 3 Â¶ÇÊûúcommandÊ≤°ÂÜôÔºå‰ΩÜargsÂÜô‰∫ÜÔºåÈÇ£‰πàDockerfile‰∏≠ÈÖçÁΩÆÁöÑENTRYPOINTÁöÑÂëΩ‰ª§‰ºöË¢´ÊâßË°åÔºå‰ΩøÁî®ÂΩìÂâçargsÁöÑÂèÇÊï∞</span><br><span class="line"> 4 Â¶ÇÊûúcommandÂíåargsÈÉΩÂÜô‰∫ÜÔºåÈÇ£‰πàDockerfileÁöÑÈÖçÁΩÆË¢´ÂøΩÁï•ÔºåÊâßË°åcommandÂπ∂ËøΩÂä†‰∏äargsÂèÇÊï∞</span><br></pre></td></tr></table></figure>



<h3 id="ÁéØÂ¢ÉÂèòÈáè"><a href="#ÁéØÂ¢ÉÂèòÈáè" class="headerlink" title="ÁéØÂ¢ÉÂèòÈáè"></a>ÁéØÂ¢ÉÂèòÈáè</h3><p>ÂàõÂª∫pod-env.yamlÊñá‰ª∂ÔºåÂÜÖÂÆπÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-env</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">busybox</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">busybox:1.30</span></span><br><span class="line">    <span class="attr">command:</span> [<span class="string">&quot;/bin/sh&quot;</span>,<span class="string">&quot;-c&quot;</span>,<span class="string">&quot;while true;do /bin/echo $(date +%T);sleep 60; done;&quot;</span>]</span><br><span class="line">    <span class="attr">env:</span> <span class="comment"># ËÆæÁΩÆÁéØÂ¢ÉÂèòÈáèÂàóË°®</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&quot;username&quot;</span></span><br><span class="line">      <span class="attr">value:</span> <span class="string">&quot;admin&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&quot;password&quot;</span></span><br><span class="line">      <span class="attr">value:</span> <span class="string">&quot;123456&quot;</span></span><br></pre></td></tr></table></figure>

<p>envÔºåÁéØÂ¢ÉÂèòÈáèÔºåÁî®‰∫éÂú®pod‰∏≠ÁöÑÂÆπÂô®ËÆæÁΩÆÁéØÂ¢ÉÂèòÈáè„ÄÇ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ÂàõÂª∫Pod</span></span><br><span class="line">[root@master ~]# kubectl create -f pod-env.yaml</span><br><span class="line">pod/pod-env created</span><br><span class="line"></span><br><span class="line">[root@master ~]# kubectl get pods -n dev</span><br><span class="line">NAME                  READY   STATUS             RESTARTS   AGE</span><br><span class="line">pod-base              1/2     CrashLoopBackOff   10         28m</span><br><span class="line">pod-command           2/2     Running            0          9m41s</span><br><span class="line">pod-env               1/1     Running            0          12s</span><br><span class="line">pod-imagepullpolicy   1/2     CrashLoopBackOff   7          15m</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ËøõÂÖ•ÂÆπÂô®ÔºåËæìÂá∫ÁéØÂ¢ÉÂèòÈáè</span></span><br><span class="line">[root@master ~]# kubectl exec pod-env -n dev -c busybox -it /bin/sh</span><br><span class="line">/ # echo $username</span><br><span class="line">admin</span><br><span class="line">/ # echo $password</span><br><span class="line">123456</span><br></pre></td></tr></table></figure>

<p>ËøôÁßçÊñπÂºè‰∏çÊòØÂæàÊé®ËçêÔºåÊé®ËçêÂ∞ÜËøô‰∫õÈÖçÁΩÆÂçïÁã¨Â≠òÂÇ®Âú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÔºåËøôÁßçÊñπÂºèÂ∞ÜÂú®ÂêéÈù¢‰ªãÁªç„ÄÇ</p>
<h3 id="Á´ØÂè£ËÆæÁΩÆ"><a href="#Á´ØÂè£ËÆæÁΩÆ" class="headerlink" title="Á´ØÂè£ËÆæÁΩÆ"></a>Á´ØÂè£ËÆæÁΩÆ</h3><p>Êú¨Â∞èËäÇÊù•‰ªãÁªçÂÆπÂô®ÁöÑÁ´ØÂè£ËÆæÁΩÆÔºå‰πüÂ∞±ÊòØcontainersÁöÑportsÈÄâÈ°π„ÄÇ</p>
<p>È¶ñÂÖàÁúã‰∏ãportsÊîØÊåÅÁöÑÂ≠êÈÄâÈ°πÔºö</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl explain pod.spec.containers.ports</span><br><span class="line">KIND:     Pod</span><br><span class="line">VERSION:  v1</span><br><span class="line">RESOURCE: ports &lt;[]Object&gt;</span><br><span class="line">FIELDS:</span><br><span class="line">   name         &lt;string&gt;  # Á´ØÂè£ÂêçÁß∞ÔºåÂ¶ÇÊûúÊåáÂÆöÔºåÂøÖÈ°ª‰øùËØÅnameÂú®pod‰∏≠ÊòØÂîØ‰∏ÄÁöÑ		</span><br><span class="line">   containerPort&lt;integer&gt; # ÂÆπÂô®Ë¶ÅÁõëÂê¨ÁöÑÁ´ØÂè£(0&lt;x&lt;65536)</span><br><span class="line">   hostPort     &lt;integer&gt; # ÂÆπÂô®Ë¶ÅÂú®‰∏ªÊú∫‰∏äÂÖ¨ÂºÄÁöÑÁ´ØÂè£ÔºåÂ¶ÇÊûúËÆæÁΩÆÔºå‰∏ªÊú∫‰∏äÂè™ËÉΩËøêË°åÂÆπÂô®ÁöÑ‰∏Ä‰∏™ÂâØÊú¨(‰∏ÄËà¨ÁúÅÁï•) </span><br><span class="line">   hostIP       &lt;string&gt;  # Ë¶ÅÂ∞ÜÂ§ñÈÉ®Á´ØÂè£ÁªëÂÆöÂà∞ÁöÑ‰∏ªÊú∫IP(‰∏ÄËà¨ÁúÅÁï•)</span><br><span class="line">   protocol     &lt;string&gt;  # Á´ØÂè£ÂçèËÆÆ„ÄÇÂøÖÈ°ªÊòØUDP„ÄÅTCPÊàñSCTP„ÄÇÈªòËÆ§‰∏∫‚ÄúTCP‚Äù„ÄÇ</span><br></pre></td></tr></table></figure>

<p>Êé•‰∏ãÊù•ÔºåÁºñÂÜô‰∏Ä‰∏™ÊµãËØïÊ°à‰æãÔºåÂàõÂª∫pod-ports.yaml</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-ports</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">    <span class="attr">ports:</span> <span class="comment"># ËÆæÁΩÆÂÆπÂô®Êö¥Èú≤ÁöÑÁ´ØÂè£ÂàóË°®</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx-port</span></span><br><span class="line">      <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">TCP</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ÂàõÂª∫Pod</span></span><br><span class="line">[root@master ~]# kubectl create -f pod-ports.yaml</span><br><span class="line">pod/pod-ports created</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êü•Áúãpod</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Âú®‰∏ãÈù¢ÂèØ‰ª•ÊòéÊòæÁúãÂà∞ÈÖçÁΩÆ‰ø°ÊÅØ</span></span><br><span class="line">[root@master ~]# kubectl get pod pod-ports -n dev -o yaml</span><br><span class="line">......</span><br><span class="line">spec:</span><br><span class="line">  containers:</span><br><span class="line">  - image: nginx:1.17.1</span><br><span class="line">    imagePullPolicy: IfNotPresent</span><br><span class="line">    name: nginx</span><br><span class="line">    ports:</span><br><span class="line">    - containerPort: 80</span><br><span class="line">      name: nginx-port</span><br><span class="line">      protocol: TCP</span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<p>ËÆøÈóÆÂÆπÂô®‰∏≠ÁöÑÁ®ãÂ∫èÈúÄË¶Å‰ΩøÁî®ÁöÑÊòØ<code>Podip:containerPort</code></p>
<h3 id="ËµÑÊ∫êÈÖçÈ¢ù"><a href="#ËµÑÊ∫êÈÖçÈ¢ù" class="headerlink" title="ËµÑÊ∫êÈÖçÈ¢ù"></a>ËµÑÊ∫êÈÖçÈ¢ù</h3><p>ÂÆπÂô®‰∏≠ÁöÑÁ®ãÂ∫èË¶ÅËøêË°åÔºåËÇØÂÆöÊòØË¶ÅÂç†Áî®‰∏ÄÂÆöËµÑÊ∫êÁöÑÔºåÊØîÂ¶ÇcpuÂíåÂÜÖÂ≠òÁ≠âÔºåÂ¶ÇÊûú‰∏çÂØπÊüê‰∏™ÂÆπÂô®ÁöÑËµÑÊ∫êÂÅöÈôêÂà∂ÔºåÈÇ£‰πàÂÆÉÂ∞±ÂèØËÉΩÂêÉÊéâÂ§ßÈáèËµÑÊ∫êÔºåÂØºËá¥ÂÖ∂ÂÆÉÂÆπÂô®Êó†Ê≥ïËøêË°å„ÄÇÈíàÂØπËøôÁßçÊÉÖÂÜµÔºåkubernetesÊèê‰æõ‰∫ÜÂØπÂÜÖÂ≠òÂíåcpuÁöÑËµÑÊ∫êËøõË°åÈÖçÈ¢ùÁöÑÊú∫Âà∂ÔºåËøôÁßçÊú∫Âà∂‰∏ªË¶ÅÈÄöËøáresourcesÈÄâÈ°πÂÆûÁé∞Ôºå‰ªñÊúâ‰∏§‰∏™Â≠êÈÄâÈ°πÔºö</p>
<ul>
<li>limitsÔºöÁî®‰∫éÈôêÂà∂ËøêË°åÊó∂ÂÆπÂô®ÁöÑÊúÄÂ§ßÂç†Áî®ËµÑÊ∫êÔºåÂΩìÂÆπÂô®Âç†Áî®ËµÑÊ∫êË∂ÖËøálimitsÊó∂‰ºöË¢´ÁªàÊ≠¢ÔºåÂπ∂ËøõË°åÈáçÂêØ</li>
<li>requests ÔºöÁî®‰∫éËÆæÁΩÆÂÆπÂô®ÈúÄË¶ÅÁöÑÊúÄÂ∞èËµÑÊ∫êÔºåÂ¶ÇÊûúÁéØÂ¢ÉËµÑÊ∫ê‰∏çÂ§üÔºåÂÆπÂô®Â∞ÜÊó†Ê≥ïÂêØÂä®</li>
</ul>
<p>ÂèØ‰ª•ÈÄöËøá‰∏äÈù¢‰∏§‰∏™ÈÄâÈ°πËÆæÁΩÆËµÑÊ∫êÁöÑ‰∏ä‰∏ãÈôê„ÄÇ</p>
<p>Êé•‰∏ãÊù•ÔºåÁºñÂÜô‰∏Ä‰∏™ÊµãËØïÊ°à‰æãÔºåÂàõÂª∫pod-resources.yaml</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-resources</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">    <span class="attr">resources:</span> <span class="comment"># ËµÑÊ∫êÈÖçÈ¢ù</span></span><br><span class="line">      <span class="attr">limits:</span>  <span class="comment"># ÈôêÂà∂ËµÑÊ∫êÔºà‰∏äÈôêÔºâ</span></span><br><span class="line">        <span class="attr">cpu:</span> <span class="string">&quot;2&quot;</span> <span class="comment"># CPUÈôêÂà∂ÔºåÂçï‰ΩçÊòØcoreÊï∞</span></span><br><span class="line">        <span class="attr">memory:</span> <span class="string">&quot;10Gi&quot;</span> <span class="comment"># ÂÜÖÂ≠òÈôêÂà∂</span></span><br><span class="line">      <span class="attr">requests:</span> <span class="comment"># ËØ∑Ê±ÇËµÑÊ∫êÔºà‰∏ãÈôêÔºâ</span></span><br><span class="line">        <span class="attr">cpu:</span> <span class="string">&quot;1&quot;</span>  <span class="comment"># CPUÈôêÂà∂ÔºåÂçï‰ΩçÊòØcoreÊï∞</span></span><br><span class="line">        <span class="attr">memory:</span> <span class="string">&quot;10Mi&quot;</span>  <span class="comment"># ÂÜÖÂ≠òÈôêÂà∂</span></span><br></pre></td></tr></table></figure>

<p>Âú®ËøôÂØπcpuÂíåmemoryÁöÑÂçï‰ΩçÂÅö‰∏Ä‰∏™ËØ¥ÊòéÔºö</p>
<ul>
<li>cpuÔºöcoreÊï∞ÔºåÂèØ‰ª•‰∏∫Êï¥Êï∞ÊàñÂ∞èÊï∞</li>
<li>memoryÔºö ÂÜÖÂ≠òÂ§ßÂ∞èÔºåÂèØ‰ª•‰ΩøÁî®Gi„ÄÅMi„ÄÅG„ÄÅMÁ≠âÂΩ¢Âºè</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"># ËøêË°åPod</span><br><span class="line">[root@master ~]# kubectl create  -f pod-resources.yaml</span><br><span class="line">pod/pod-resources created</span><br><span class="line"></span><br><span class="line"># Êü•ÁúãÂèëÁé∞podËøêË°åÊ≠£Â∏∏</span><br><span class="line">[root@master ~]# kubectl get pod pod-resources -n dev</span><br><span class="line">NAME            READY   STATUS    RESTARTS   AGE</span><br><span class="line">pod-resources   1/1     Running   0          14s</span><br><span class="line"></span><br><span class="line"># Êé•‰∏ãÊù•ÔºåÂÅúÊ≠¢Pod</span><br><span class="line">[root@master ~]# kubectl delete -f pod-resources.yaml</span><br><span class="line">pod &quot;pod-resources&quot; deleted</span><br><span class="line"></span><br><span class="line"># ÁºñËæëpodÔºå‰øÆÊîπresources.requests.memoryÁöÑÂÄº‰∏∫10Gi</span><br><span class="line">[root@master ~]# vim pod-resources.yaml</span><br><span class="line"></span><br><span class="line"># ÂÜçÊ¨°ÂêØÂä®pod</span><br><span class="line">[root@master ~]# kubectl create -f pod-resources.yaml</span><br><span class="line">pod/pod-resources created</span><br><span class="line"></span><br><span class="line"># Êü•ÁúãPodÁä∂ÊÄÅÔºåÂèëÁé∞PodÂêØÂä®Â§±Ë¥•</span><br><span class="line">[root@master ~]# kubectl get pod pod-resources -n dev -o wide</span><br><span class="line">NAME            READY   STATUS    RESTARTS   AGE          </span><br><span class="line">pod-resources   0/1     Pending   0          20s    </span><br><span class="line"></span><br><span class="line"># Êü•ÁúãpodËØ¶ÊÉÖ‰ºöÂèëÁé∞ÔºåÂ¶Ç‰∏ãÊèêÁ§∫</span><br><span class="line">[root@master ~]# kubectl describe pod pod-resources -n dev</span><br><span class="line">......</span><br><span class="line">Warning  FailedScheduling  35s   default-scheduler  0/3 nodes are available: 1 node(s) had taint &#123;node-role.kubernetes.io/m</span><br></pre></td></tr></table></figure>


      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/%E9%9B%86%E7%BE%A4/" rel="tag"># ÈõÜÁæ§</a>
          
            <a href="/tags/k8s/" rel="tag"># k8s</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/docker-advanced/" rel="next" title="docker-advanced">
                <i class="fa fa-chevron-left"></i> docker-advanced
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/shell-base/" rel="prev" title="shellÂÖ•Èó®">
                shellÂÖ•Èó® <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
<span class="jiathis_txt">ÂàÜ‰∫´Âà∞Ôºö</span>
<a class="jiathis_button_fav">Êî∂ËóèÂ§π</a>
<a class="jiathis_button_copy">Â§çÂà∂ÁΩëÂùÄ</a>
<a class="jiathis_button_email">ÈÇÆ‰ª∂</a>
<a class="jiathis_button_weixin">ÂæÆ‰ø°</a>
<a class="jiathis_button_qzone">QQÁ©∫Èó¥</a>
<a class="jiathis_button_tqq">ËÖæËÆØÂæÆÂçö</a>
<a class="jiathis_button_douban">Ë±ÜÁì£</a>
<a class="jiathis_button_share">‰∏ÄÈîÆÂàÜ‰∫´</a>

<a href="http://www.jiathis.com/share?uid=2140465" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">Êõ¥Â§ö</a>
<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
var jiathis_config={
  data_track_clickback:true,
  summary:"",
  shortUrl:false,
  hideMore:false
}
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=" charset="utf-8"></script>
<!-- JiaThis Button END -->
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            ÊñáÁ´†ÁõÆÂΩï
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Á´ôÁÇπÊ¶ÇËßà
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/myPicture1.jpg"
                alt="" />
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">30</span>
                  <span class="site-state-item-name">Êó•Âøó</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">ÂàÜÁ±ª</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">29</span>
                  <span class="site-state-item-name">Ê†áÁ≠æ</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/cjsong125" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="735709343@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://weibo.com/u/1920834272" target="_blank" title="weibo">
                      
                        <i class="fa fa-fw fa-weibo"></i>weibo</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://cjsong125.github.io" title="CodeChenBlog" target="_blank">CodeChenBlog</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B"><span class="nav-text">ÁÆÄ‰ªã</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E9%9C%80%E8%A6%81k8s%EF%BC%9F"><span class="nav-text">‰ªÄ‰πàÊó∂ÂÄôÈúÄË¶Åk8sÔºü</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Kubernetes%E7%BB%84%E4%BB%B6"><span class="nav-text">KubernetesÁªÑ‰ª∂</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Kubernetes-%E7%BB%84%E4%BB%B6"><span class="nav-text">Kubernetes ÁªÑ‰ª∂</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#k8s%E9%9B%86%E7%BE%A4%E6%9E%B6%E6%9E%84"><span class="nav-text">k8sÈõÜÁæ§Êû∂ÊûÑ</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#master"><span class="nav-text">master</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#worker"><span class="nav-text">worker</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%87%8D%E8%A6%81%E6%A6%82%E5%BF%B5-Pod"><span class="nav-text">ÈáçË¶ÅÊ¶ÇÂøµ Pod</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pod"><span class="nav-text">pod</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF%E6%96%B9%E5%BC%8F"><span class="nav-text">ÁΩëÁªúÈÄöËÆØÊñπÂºè</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="nav-text">ÈõÜÁæ§ÁéØÂ¢ÉÊê≠Âª∫</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8E%AF%E5%A2%83%E8%A7%84%E5%88%92"><span class="nav-text">ÁéØÂ¢ÉËßÑÂàí</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E7%BE%A4%E7%B1%BB%E5%9E%8B"><span class="nav-text">ÈõÜÁæ§Á±ªÂûã</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E6%96%B9%E5%BC%8F"><span class="nav-text">ÂÆâË£ÖÊñπÂºè</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BB%E6%9C%BA%E8%A7%84%E5%88%92"><span class="nav-text">‰∏ªÊú∫ËßÑÂàí</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="nav-text">ÁéØÂ¢ÉÊê≠Âª∫</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BB%E6%9C%BA%E5%AE%89%E8%A3%85"><span class="nav-text">‰∏ªÊú∫ÂÆâË£Ö</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8E%AF%E5%A2%83%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">ÁéØÂ¢ÉÂàùÂßãÂåñ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85docker"><span class="nav-text">ÂÆâË£Ödocker</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85kubernetes%E7%BB%84%E4%BB%B6"><span class="nav-text">ÂÆâË£ÖkubernetesÁªÑ‰ª∂</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%86%E5%A4%87%E9%9B%86%E7%BE%A4%E9%95%9C%E5%83%8F"><span class="nav-text">ÂáÜÂ§áÈõÜÁæ§ÈïúÂÉè</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E7%BE%A4%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">ÈõÜÁæ§ÂàùÂßãÂåñ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E7%BD%91%E7%BB%9C%E6%8F%92%E4%BB%B6"><span class="nav-text">ÂÆâË£ÖÁΩëÁªúÊèí‰ª∂</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E9%83%A8%E7%BD%B2"><span class="nav-text">ÊúçÂä°ÈÉ®ÁΩ≤</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86"><span class="nav-text">ËµÑÊ∫êÁÆ°ÁêÜ</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E4%BB%8B%E7%BB%8D"><span class="nav-text">ËµÑÊ∫êÁÆ°ÁêÜ‰ªãÁªç</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#YAML%E8%AF%AD%E8%A8%80%E4%BB%8B%E7%BB%8D"><span class="nav-text">YAMLËØ≠Ë®Ä‰ªãÁªç</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E6%96%B9%E5%BC%8F"><span class="nav-text">ËµÑÊ∫êÁÆ°ÁêÜÊñπÂºè</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E5%BC%8F%E5%AF%B9%E8%B1%A1%E7%AE%A1%E7%90%86"><span class="nav-text">ÂëΩ‰ª§ÂºèÂØπË±°ÁÆ°ÁêÜ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E5%BC%8F%E5%AF%B9%E8%B1%A1%E9%85%8D%E7%BD%AE"><span class="nav-text">ÂëΩ‰ª§ÂºèÂØπË±°ÈÖçÁΩÆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A3%B0%E6%98%8E%E5%BC%8F%E5%AF%B9%E8%B1%A1%E9%85%8D%E7%BD%AE"><span class="nav-text">Â£∞ÊòéÂºèÂØπË±°ÈÖçÁΩÆ</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%9E%E6%88%98%E5%85%A5%E9%97%A8"><span class="nav-text">ÂÆûÊàòÂÖ•Èó®</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Namespace"><span class="nav-text">Namespace</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pod"><span class="nav-text">Pod</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Label"><span class="nav-text">Label</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Deployment"><span class="nav-text">Deployment</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Service"><span class="nav-text">Service</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Pod%E8%AF%A6%E8%A7%A3"><span class="nav-text">PodËØ¶Ëß£</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Pod%E4%BB%8B%E7%BB%8D"><span class="nav-text">Pod‰ªãÁªç</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Pod%E7%BB%93%E6%9E%84"><span class="nav-text">PodÁªìÊûÑ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pod%E5%AE%9A%E4%B9%89"><span class="nav-text">PodÂÆö‰πâ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pod%E9%85%8D%E7%BD%AE"><span class="nav-text">PodÈÖçÁΩÆ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE"><span class="nav-text">Âü∫Êú¨ÈÖçÁΩÆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%95%9C%E5%83%8F%E6%8B%89%E5%8F%96"><span class="nav-text">ÈïúÂÉèÊãâÂèñ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4"><span class="nav-text">ÂêØÂä®ÂëΩ‰ª§</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="nav-text">ÁéØÂ¢ÉÂèòÈáè</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AB%AF%E5%8F%A3%E8%AE%BE%E7%BD%AE"><span class="nav-text">Á´ØÂè£ËÆæÁΩÆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B5%84%E6%BA%90%E9%85%8D%E9%A2%9D"><span class="nav-text">ËµÑÊ∫êÈÖçÈ¢ù</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2021 &mdash; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">CodeChen</span>

  
</div>


  <div class="powered-by">Áî± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> Âº∫ÂäõÈ©±Âä®</div>








        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      Êú¨Á´ôËÆøÈóÆÊï∞ <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      ‰∫∫Ê¨°
    </span>
  

  
    <span class="site-pv">
      Êú¨Á´ôÊÄªËÆøÈóÆÈáè <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      Ê¨°
    </span>
  
</div>








        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: '6BRrBnAHS7a11TcVJ70lEGpJ-gzGzoHsz',
        appKey: 'UC71zLA2sOyVPdG7c54dpBfG',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
